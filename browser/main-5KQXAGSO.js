var Ng=Object.defineProperty,Og=Object.defineProperties;var Fg=Object.getOwnPropertyDescriptors;var ad=Object.getOwnPropertySymbols;var Lg=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable;var ld=(i,t,e)=>t in i?Ng(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,y=(i,t)=>{for(var e in t||={})Lg.call(t,e)&&ld(i,e,t[e]);if(ad)for(var e of ad(t))Pg.call(t,e)&&ld(i,e,t[e]);return i},F=(i,t)=>Og(i,Fg(t));function ud(i,t){return Object.is(i,t)}var me=null,Ur=!1,$r=1,yt=Symbol("SIGNAL");function Z(i){let t=me;return me=i,t}function cd(){return me}var zi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ma(i){if(Ur)throw new Error("");if(me===null)return;me.consumerOnSignalRead(i);let t=me.nextProducerIndex++;if(Zr(me),t<me.producerNode.length&&me.producerNode[t]!==i&&Bi(me)){let e=me.producerNode[t];qr(e,me.producerIndexOfThis[t])}me.producerNode[t]!==i&&(me.producerNode[t]=i,me.producerIndexOfThis[t]=Bi(me)?pd(i,me,t):0),me.producerLastReadVersion[t]=i.version}function Vg(){$r++}function dd(i){if(!(Bi(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===$r)){if(!i.producerMustRecompute(i)&&!ba(i)){i.dirty=!1,i.lastCleanEpoch=$r;return}i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=$r}}function hd(i){if(i.liveConsumerNode===void 0)return;let t=Ur;Ur=!0;try{for(let e of i.liveConsumerNode)e.dirty||Hg(e)}finally{Ur=t}}function fd(){return me?.consumerAllowSignalWrites!==!1}function Hg(i){i.dirty=!0,hd(i),i.consumerMarkedDirty?.(i)}function Gr(i){return i&&(i.nextProducerIndex=0),Z(i)}function ga(i,t){if(Z(t),!(!i||i.producerNode===void 0||i.producerIndexOfThis===void 0||i.producerLastReadVersion===void 0)){if(Bi(i))for(let e=i.nextProducerIndex;e<i.producerNode.length;e++)qr(i.producerNode[e],i.producerIndexOfThis[e]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function ba(i){Zr(i);for(let t=0;t<i.producerNode.length;t++){let e=i.producerNode[t],n=i.producerLastReadVersion[t];if(n!==e.version||(dd(e),n!==e.version))return!0}return!1}function va(i){if(Zr(i),Bi(i))for(let t=0;t<i.producerNode.length;t++)qr(i.producerNode[t],i.producerIndexOfThis[t]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function pd(i,t,e){if(md(i),i.liveConsumerNode.length===0&&gd(i))for(let n=0;n<i.producerNode.length;n++)i.producerIndexOfThis[n]=pd(i.producerNode[n],i,n);return i.liveConsumerIndexOfThis.push(e),i.liveConsumerNode.push(t)-1}function qr(i,t){if(md(i),i.liveConsumerNode.length===1&&gd(i))for(let n=0;n<i.producerNode.length;n++)qr(i.producerNode[n],i.producerIndexOfThis[n]);let e=i.liveConsumerNode.length-1;if(i.liveConsumerNode[t]=i.liveConsumerNode[e],i.liveConsumerIndexOfThis[t]=i.liveConsumerIndexOfThis[e],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,t<i.liveConsumerNode.length){let n=i.liveConsumerIndexOfThis[t],r=i.liveConsumerNode[t];Zr(r),r.producerIndexOfThis[n]=t}}function Bi(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Zr(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function md(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}function gd(i){return i.producerNode!==void 0}function bd(i){let t=Object.create(jg);t.computation=i;let e=()=>{if(dd(t),ma(t),t.value===Wr)throw t.error;return t.value};return e[yt]=t,e}var fa=Symbol("UNSET"),pa=Symbol("COMPUTING"),Wr=Symbol("ERRORED"),jg=F(y({},zi),{value:fa,dirty:!0,error:null,equal:ud,producerMustRecompute(i){return i.value===fa||i.value===pa},producerRecomputeValue(i){if(i.value===pa)throw new Error("Detected cycle in computations.");let t=i.value;i.value=pa;let e=Gr(i),n;try{n=i.computation()}catch(r){n=Wr,i.error=r}finally{ga(i,e)}if(t!==fa&&t!==Wr&&n!==Wr&&i.equal(t,n)){i.value=t;return}i.value=n,i.version++}});function Bg(){throw new Error}var vd=Bg;function yd(){vd()}function Cd(i){vd=i}var zg=null;function wd(i){let t=Object.create(Dd);t.value=i;let e=()=>(ma(t),t.value);return e[yt]=t,e}function ya(i,t){fd()||yd(),i.equal(i.value,t)||(i.value=t,Ug(i))}function Ed(i,t){fd()||yd(),ya(i,t(i.value))}var Dd=F(y({},zi),{equal:ud,value:void 0});function Ug(i){i.version++,Vg(),hd(i),zg?.()}function A(i){return typeof i=="function"}function Vn(i){let e=i(n=>{Error.call(n),n.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Yr=Vn(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((n,r)=>`${r+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Ui(i,t){if(i){let e=i.indexOf(t);0<=e&&i.splice(e,1)}}var ce=class i{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:n}=this;if(A(n))try{n()}catch(s){t=s instanceof Yr?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{Md(s)}catch(o){t=t??[],o instanceof Yr?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Yr(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Md(t);else{if(t instanceof i){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ui(e,t)}remove(t){let{_finalizers:e}=this;e&&Ui(e,t),t instanceof i&&t._removeParent(this)}};ce.EMPTY=(()=>{let i=new ce;return i.closed=!0,i})();var Ca=ce.EMPTY;function Qr(i){return i instanceof ce||i&&"closed"in i&&A(i.remove)&&A(i.add)&&A(i.unsubscribe)}function Md(i){A(i)?i():i.unsubscribe()}var Xe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Hn={setTimeout(i,t,...e){let{delegate:n}=Hn;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){let{delegate:t}=Hn;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function Kr(i){Hn.setTimeout(()=>{let{onUnhandledError:t}=Xe;if(t)t(i);else throw i})}function $i(){}var Sd=wa("C",void 0,void 0);function _d(i){return wa("E",void 0,i)}function xd(i){return wa("N",i,void 0)}function wa(i,t,e){return{kind:i,value:t,error:e}}var cn=null;function jn(i){if(Xe.useDeprecatedSynchronousErrorHandling){let t=!cn;if(t&&(cn={errorThrown:!1,error:null}),i(),t){let{errorThrown:e,error:n}=cn;if(cn=null,e)throw n}}else i()}function Td(i){Xe.useDeprecatedSynchronousErrorHandling&&cn&&(cn.errorThrown=!0,cn.error=i)}var dn=class extends ce{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Qr(t)&&t.add(this)):this.destination=Gg}static create(t,e,n){return new Bn(t,e,n)}next(t){this.isStopped?Da(xd(t),this):this._next(t)}error(t){this.isStopped?Da(_d(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Da(Sd,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$g=Function.prototype.bind;function Ea(i,t){return $g.call(i,t)}var Ma=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Xr(n)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Xr(n)}else Xr(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Xr(e)}}},Bn=class extends dn{constructor(t,e,n){super();let r;if(A(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&Xe.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Ea(t.next,s),error:t.error&&Ea(t.error,s),complete:t.complete&&Ea(t.complete,s)}):r=t}this.destination=new Ma(r)}};function Xr(i){Xe.useDeprecatedSynchronousErrorHandling?Td(i):Kr(i)}function Wg(i){throw i}function Da(i,t){let{onStoppedNotification:e}=Xe;e&&Hn.setTimeout(()=>e(i,t))}var Gg={closed:!0,next:$i,error:Wg,complete:$i};var zn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function He(i){return i}function Sa(...i){return _a(i)}function _a(i){return i.length===0?He:i.length===1?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}var K=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){let n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){let s=Zg(e)?e:new Bn(e,n,r);return jn(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return n=Id(n),new n((r,s)=>{let o=new Bn({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)}[zn](){return this}pipe(...e){return _a(e)(this)}toPromise(e){return e=Id(e),new e((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function Id(i){var t;return(t=i??Xe.Promise)!==null&&t!==void 0?t:Promise}function qg(i){return i&&A(i.next)&&A(i.error)&&A(i.complete)}function Zg(i){return i&&i instanceof dn||qg(i)&&Qr(i)}function xa(i){return A(i?.lift)}function q(i){return t=>{if(xa(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(i,t,e,n,r){return new Ta(i,t,e,n,r)}var Ta=class extends dn{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Un(){return q((i,t)=>{let e=null;i._refCount++;let n=W(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount){e=null;return}let r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}var $n=class extends K{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,xa(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ce;let e=this.getSubject();t.add(this.source.subscribe(W(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ce.EMPTY)}return t}refCount(){return Un()(this)}};var Rd=Vn(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ve=(()=>{class i extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let n=new Jr(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Rd}next(e){jn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(e)}})}error(e){jn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){jn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:n,isStopped:r,observers:s}=this;return n||r?Ca:(this.currentObservers=null,s.push(e),new ce(()=>{this.currentObservers=null,Ui(s,e)}))}_checkFinalizedStatuses(e){let{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){let e=new K;return e.source=this,e}}return i.create=(t,e)=>new Jr(t,e),i})(),Jr=class extends ve{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.next)===null||n===void 0||n.call(e,t)}error(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.error)===null||n===void 0||n.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,n;return(n=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&n!==void 0?n:Ca}};var ae=class extends ve{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}};var je=new K(i=>i.complete());function Ad(i){return i&&A(i.schedule)}function kd(i){return i[i.length-1]}function es(i){return A(kd(i))?i.pop():void 0}function Pt(i){return Ad(kd(i))?i.pop():void 0}function Od(i,t,e,n){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):r(c.value).then(a,l)}u((n=n.apply(i,t||[])).next())})}function Nd(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hn(i){return this instanceof hn?(this.v=i,this):new hn(i)}function Fd(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){n[f]&&(r[f]=function(m){return new Promise(function(b,g){s.push([f,m,b,g])>1||l(f,m)})},p&&(r[f]=p(r[f])))}function l(f,p){try{u(n[f](p))}catch(m){h(s[0][3],m)}}function u(f){f.value instanceof hn?Promise.resolve(f.value.v).then(c,d):h(s[0][2],f)}function c(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ld(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof Nd=="function"?Nd(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){o=i[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var ts=i=>i&&typeof i.length=="number"&&typeof i!="function";function ns(i){return A(i?.then)}function is(i){return A(i[zn])}function rs(i){return Symbol.asyncIterator&&A(i?.[Symbol.asyncIterator])}function ss(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Yg(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var os=Yg();function as(i){return A(i?.[os])}function ls(i){return Fd(this,arguments,function*(){let e=i.getReader();try{for(;;){let{value:n,done:r}=yield hn(e.read());if(r)return yield hn(void 0);yield yield hn(n)}}finally{e.releaseLock()}})}function us(i){return A(i?.getReader)}function de(i){if(i instanceof K)return i;if(i!=null){if(is(i))return Qg(i);if(ts(i))return Kg(i);if(ns(i))return Xg(i);if(rs(i))return Pd(i);if(as(i))return Jg(i);if(us(i))return eb(i)}throw ss(i)}function Qg(i){return new K(t=>{let e=i[zn]();if(A(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kg(i){return new K(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}function Xg(i){return new K(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Kr)})}function Jg(i){return new K(t=>{for(let e of i)if(t.next(e),t.closed)return;t.complete()})}function Pd(i){return new K(t=>{tb(i,t).catch(e=>t.error(e))})}function eb(i){return Pd(ls(i))}function tb(i,t){var e,n,r,s;return Od(this,void 0,void 0,function*(){try{for(e=Ld(i);n=yield e.next(),!n.done;){let o=n.value;if(t.next(o),t.closed)return}}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function Ve(i,t,e,n=0,r=!1){let s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function cs(i,t=0){return q((e,n)=>{e.subscribe(W(n,r=>Ve(n,i,()=>n.next(r),t),()=>Ve(n,i,()=>n.complete(),t),r=>Ve(n,i,()=>n.error(r),t)))})}function ds(i,t=0){return q((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function Vd(i,t){return de(i).pipe(ds(t),cs(t))}function Hd(i,t){return de(i).pipe(ds(t),cs(t))}function jd(i,t){return new K(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}function Bd(i,t){return new K(e=>{let n;return Ve(e,t,()=>{n=i[os](),Ve(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){e.error(o);return}s?e.complete():e.next(r)},0,!0)}),()=>A(n?.return)&&n.return()})}function hs(i,t){if(!i)throw new Error("Iterable cannot be null");return new K(e=>{Ve(e,t,()=>{let n=i[Symbol.asyncIterator]();Ve(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function zd(i,t){return hs(ls(i),t)}function Ud(i,t){if(i!=null){if(is(i))return Vd(i,t);if(ts(i))return jd(i,t);if(ns(i))return Hd(i,t);if(rs(i))return hs(i,t);if(as(i))return Bd(i,t);if(us(i))return zd(i,t)}throw ss(i)}function le(i,t){return t?Ud(i,t):de(i)}function R(...i){let t=Pt(i);return le(i,t)}function Wn(i,t){let e=A(i)?i:()=>i,n=r=>r.error(e());return new K(t?r=>t.schedule(n,0,r):n)}function Ia(i){return!!i&&(i instanceof K||A(i.lift)&&A(i.subscribe))}var Ct=Vn(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function U(i,t){return q((e,n)=>{let r=0;e.subscribe(W(n,s=>{n.next(i.call(t,s,r++))}))})}var{isArray:nb}=Array;function ib(i,t){return nb(t)?i(...t):i(t)}function fs(i){return U(t=>ib(i,t))}var{isArray:rb}=Array,{getPrototypeOf:sb,prototype:ob,keys:ab}=Object;function ps(i){if(i.length===1){let t=i[0];if(rb(t))return{args:t,keys:null};if(lb(t)){let e=ab(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}function lb(i){return i&&typeof i=="object"&&sb(i)===ob}function ms(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function gs(...i){let t=Pt(i),e=es(i),{args:n,keys:r}=ps(i);if(n.length===0)return le([],t);let s=new K(ub(n,t,r?o=>ms(r,o):He));return e?s.pipe(fs(e)):s}function ub(i,t,e=He){return n=>{$d(t,()=>{let{length:r}=i,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)$d(t,()=>{let u=le(i[l],t),c=!1;u.subscribe(W(n,d=>{s[l]=d,c||(c=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}function $d(i,t,e){i?Ve(e,i,t):t()}function Wd(i,t,e,n,r,s,o,a){let l=[],u=0,c=0,d=!1,h=()=>{d&&!l.length&&!u&&t.complete()},f=m=>u<n?p(m):l.push(m),p=m=>{s&&t.next(m),u++;let b=!1;de(e(m,c++)).subscribe(W(t,g=>{r?.(g),s?f(g):t.next(g)},()=>{b=!0},void 0,()=>{if(b)try{for(u--;l.length&&u<n;){let g=l.shift();o?Ve(t,o,()=>p(g)):p(g)}h()}catch(g){t.error(g)}}))};return i.subscribe(W(t,f,()=>{d=!0,h()})),()=>{a?.()}}function ge(i,t,e=1/0){return A(t)?ge((n,r)=>U((s,o)=>t(n,s,r,o))(de(i(n,r))),e):(typeof t=="number"&&(e=t),q((n,r)=>Wd(n,r,i,e)))}function Gn(i=1/0){return ge(He,i)}function Gd(){return Gn(1)}function qn(...i){return Gd()(le(i,Pt(i)))}function bs(i){return new K(t=>{de(i()).subscribe(t)})}function Ra(...i){let t=es(i),{args:e,keys:n}=ps(i),r=new K(s=>{let{length:o}=e;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let c=0;c<o;c++){let d=!1;de(e[c]).subscribe(W(s,h=>{d||(d=!0,u--),a[c]=h},()=>l--,void 0,()=>{(!l||!d)&&(u||s.next(n?ms(n,a):a),s.complete())}))}});return t?r.pipe(fs(t)):r}function Je(i,t){return q((e,n)=>{let r=0;e.subscribe(W(n,s=>i.call(t,s,r++)&&n.next(s)))})}function Vt(i){return q((t,e)=>{let n=null,r=!1,s;n=t.subscribe(W(e,void 0,void 0,o=>{s=de(i(o,Vt(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function qd(i,t,e,n,r){return(s,o)=>{let a=e,l=t,u=0;s.subscribe(W(o,c=>{let d=u++;l=a?i(l,c,d):(a=!0,c),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Zn(i,t){return A(t)?ge(i,t,1):ge(i,1)}function Ht(i){return q((t,e)=>{let n=!1;t.subscribe(W(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function wt(i){return i<=0?()=>je:q((t,e)=>{let n=0;t.subscribe(W(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Aa(i){return U(()=>i)}function vs(i=cb){return q((t,e)=>{let n=!1;t.subscribe(W(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function cb(){return new Ct}function Wi(i){return q((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}function lt(i,t){let e=arguments.length>=2;return n=>n.pipe(i?Je((r,s)=>i(r,s,n)):He,wt(1),e?Ht(t):vs(()=>new Ct))}function Yn(i){return i<=0?()=>je:q((t,e)=>{let n=[];t.subscribe(W(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(let r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function ka(i,t){let e=arguments.length>=2;return n=>n.pipe(i?Je((r,s)=>i(r,s,n)):He,Yn(1),e?Ht(t):vs(()=>new Ct))}function Na(i,t){return q(qd(i,t,arguments.length>=2,!0))}function Oa(...i){let t=Pt(i);return q((e,n)=>{(t?qn(i,e,t):qn(i,e)).subscribe(n)})}function et(i,t){return q((e,n)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&n.complete();e.subscribe(W(n,l=>{r?.unsubscribe();let u=0,c=s++;de(i(l,c)).subscribe(r=W(n,d=>n.next(t?t(l,d,c,u++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Fa(i){return q((t,e)=>{de(i).subscribe(W(e,()=>e.complete(),$i)),!e.closed&&t.subscribe(e)})}function Se(i,t,e){let n=A(i)||t||e?{next:i,error:t,complete:e}:i;return n?q((r,s)=>{var o;(o=n.subscribe)===null||o===void 0||o.call(n);let a=!0;r.subscribe(W(s,l=>{var u;(u=n.next)===null||u===void 0||u.call(n,l),s.next(l)},()=>{var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),s.complete()},l=>{var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,l),s.error(l)},()=>{var l,u;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):He}var Oh="https://g.co/ng/security#xss",S=class extends Error{constructor(t,e){super($l(t,e)),this.code=t}};function $l(i,t){return`${`NG0${Math.abs(i)}`}${t?": "+t:""}`}function nr(i){return{toString:i}.toString()}var ys="__parameters__";function db(i){return function(...e){if(i){let n=i(...e);for(let r in n)this[r]=n[r]}}}function Fh(i,t,e){return nr(()=>{let n=db(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,u,c){let d=l.hasOwnProperty(ys)?l[ys]:Object.defineProperty(l,ys,{value:[]})[ys];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}var Ya=globalThis;function ne(i){for(let t in i)if(i[t]===ne)return t;throw Error("Could not find renamed property on target object.")}function hb(i,t){for(let e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function Fe(i){if(typeof i=="string")return i;if(Array.isArray(i))return"["+i.map(Fe).join(", ")+"]";if(i==null)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;let t=i.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function Zd(i,t){return i==null||i===""?t===null?"":t:t==null||t===""?i:i+" "+t}var fb=ne({__forward_ref__:ne});function Zt(i){return i.__forward_ref__=Zt,i.toString=function(){return Fe(this())},i}function Oe(i){return Lh(i)?i():i}function Lh(i){return typeof i=="function"&&i.hasOwnProperty(fb)&&i.__forward_ref__===Zt}function _(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Sn(i){return{providers:i.providers||[],imports:i.imports||[]}}function eo(i){return Yd(i,Vh)||Yd(i,Hh)}function Ph(i){return eo(i)!==null}function Yd(i,t){return i.hasOwnProperty(t)?i[t]:null}function pb(i){let t=i&&(i[Vh]||i[Hh]);return t||null}function Qd(i){return i&&(i.hasOwnProperty(Kd)||i.hasOwnProperty(mb))?i[Kd]:null}var Vh=ne({\u0275prov:ne}),Kd=ne({\u0275inj:ne}),Hh=ne({ngInjectableDef:ne}),mb=ne({ngInjectorDef:ne}),I=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jh(i){return i&&!!i.\u0275providers}var gb=ne({\u0275cmp:ne}),bb=ne({\u0275dir:ne}),vb=ne({\u0275pipe:ne}),yb=ne({\u0275mod:ne}),Rs=ne({\u0275fac:ne}),Zi=ne({__NG_ELEMENT_ID__:ne}),Xd=ne({__NG_ENV_ID__:ne});function to(i){return typeof i=="string"?i:i==null?"":String(i)}function Cb(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():to(i)}function wb(i,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new S(-200,i)}function Wl(i,t){throw new S(-201,!1)}var j=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(j||{}),Qa;function Bh(){return Qa}function $e(i){let t=Qa;return Qa=i,t}function zh(i,t,e){let n=eo(i);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(e&j.Optional)return null;if(t!==void 0)return t;Wl(i,"Injector")}var Eb={},Yi=Eb,Ka="__NG_DI_FLAG__",As="ngTempTokenPath",Db="ngTokenPath",Mb=/\n/gm,Sb="\u0275",Jd="__source",Jn;function _b(){return Jn}function jt(i){let t=Jn;return Jn=i,t}function xb(i,t=j.Default){if(Jn===void 0)throw new S(-203,!1);return Jn===null?zh(i,void 0,t):Jn.get(i,t&j.Optional?null:void 0,t)}function $(i,t=j.Default){return(Bh()||xb)(Oe(i),t)}function E(i,t=j.Default){return $(i,no(t))}function no(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Xa(i){let t=[];for(let e=0;e<i.length;e++){let n=Oe(i[e]);if(Array.isArray(n)){if(n.length===0)throw new S(900,!1);let r,s=j.Default;for(let o=0;o<n.length;o++){let a=n[o],l=Tb(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}t.push($(r,s))}else t.push($(n))}return t}function Uh(i,t){return i[Ka]=t,i.prototype[Ka]=t,i}function Tb(i){return i[Ka]}function Ib(i,t,e,n){let r=i[As];throw t[Jd]&&r.unshift(t[Jd]),i.message=Rb(`
`+i.message,r,e,n),i[Db]=r,i[As]=null,i}function Rb(i,t,e,n=null){i=i&&i.charAt(0)===`
`&&i.charAt(1)==Sb?i.slice(2):i;let r=Fe(t);if(Array.isArray(t))r=t.map(Fe).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Fe(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(Mb,`
  `)}`}var Gl=Uh(Fh("Optional"),8);var $h=Uh(Fh("SkipSelf"),4);function ti(i,t){let e=i.hasOwnProperty(Rs);return e?i[Rs]:null}function Ab(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}function kb(i){return i.flat(Number.POSITIVE_INFINITY)}function ql(i,t){i.forEach(e=>Array.isArray(e)?ql(e,t):t(e))}function Wh(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function ks(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Nb(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(r===1)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;){let s=r-2;i[r]=i[s],r--}i[t]=e,i[t+1]=n}}function Ob(i,t,e){let n=ir(i,t);return n>=0?i[n|1]=e:(n=~n,Nb(i,n,t,e)),n}function La(i,t){let e=ir(i,t);if(e>=0)return i[e|1]}function ir(i,t){return Fb(i,t,1)}function Fb(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){let s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}var ni={},We=[],ii=new I(""),Gh=new I("",-1),qh=new I(""),Ns=class{get(t,e=Yi){if(e===Yi){let n=new Error(`NullInjectorError: No provider for ${Fe(t)}!`);throw n.name="NullInjectorError",n}return e}},Zh=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Zh||{}),dt=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(dt||{}),Ut=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(Ut||{});function Lb(i,t,e){let n=i.length;for(;;){let r=i.indexOf(t,e);if(r===-1)return r;if(r===0||i.charCodeAt(r-1)<=32){let s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}function Ja(i,t,e){let n=0;for(;n<e.length;){let r=e[n];if(typeof r=="number"){if(r!==0)break;n++;let s=e[n++],o=e[n++],a=e[n++];i.setAttribute(t,o,a,s)}else{let s=r,o=e[++n];Pb(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function Yh(i){return i===3||i===4||i===6}function Pb(i){return i.charCodeAt(0)===64}function Qi(i,t){if(!(t===null||t.length===0))if(i===null||i.length===0)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){let r=t[n];typeof r=="number"?e=r:e===0||(e===-1||e===2?eh(i,e,r,null,t[++n]):eh(i,e,r,null,null))}}return i}function eh(i,t,e,n,r){let s=0,o=i.length;if(t===-1)o=-1;else for(;s<i.length;){let a=i[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<i.length;){let a=i[s];if(typeof a=="number")break;if(a===e){if(n===null){r!==null&&(i[s+1]=r);return}else if(n===i[s+1]){i[s+2]=r;return}}s++,n!==null&&s++,r!==null&&s++}o!==-1&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),n!==null&&i.splice(s++,0,n),r!==null&&i.splice(s++,0,r)}var Qh="ng-template";function Vb(i,t,e,n){let r=0;if(n){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Lb(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Zl(i))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function Zl(i){return i.type===4&&i.value!==Qh}function Hb(i,t,e){let n=i.type===4&&!e?Qh:i.value;return t===n}function jb(i,t,e){let n=4,r=i.attrs,s=r!==null?Ub(r):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!tt(n)&&!tt(l))return!1;if(o&&tt(l))continue;o=!1,n=l|n&1;continue}if(!o)if(n&4){if(n=2|n&1,l!==""&&!Hb(i,l,e)||l===""&&t.length===1){if(tt(n))return!1;o=!0}}else if(n&8){if(r===null||!Vb(i,r,l,e)){if(tt(n))return!1;o=!0}}else{let u=t[++a],c=Bb(l,r,Zl(i),e);if(c===-1){if(tt(n))return!1;o=!0;continue}if(u!==""){let d;if(c>s?d="":d=r[c+1].toLowerCase(),n&2&&u!==d){if(tt(n))return!1;o=!0}}}}return tt(n)||o}function tt(i){return(i&1)===0}function Bb(i,t,e,n){if(t===null)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){let o=t[r];if(o===i)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return $b(t,i)}function zb(i,t,e=!1){for(let n=0;n<t.length;n++)if(jb(i,t[n],e))return!0;return!1}function Ub(i){for(let t=0;t<i.length;t++){let e=i[t];if(Yh(e))return t}return i.length}function $b(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){let n=i[e];if(typeof n=="number")return-1;if(n===t)return e;e++}return-1}function th(i,t){return i?":not("+t.trim()+")":t}function Wb(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if(typeof o=="string")if(n&2){let a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else n&8?r+="."+o:n&4&&(r+=" "+o);else r!==""&&!tt(o)&&(t+=th(s,r),r=""),n=o,s=s||!tt(n);e++}return r!==""&&(t+=th(s,r)),t}function Gb(i){return i.map(Wb).join(",")}function qb(i){let t=[],e=[],n=1,r=2;for(;n<i.length;){let s=i[n];if(typeof s=="string")r===2?s!==""&&t.push(s,i[++n]):r===8&&e.push(s);else{if(!tt(r))break;r=s}n++}return{attrs:t,classes:e}}function ie(i){return nr(()=>{let t=tf(i),e=F(y({},t),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Zh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||dt.Emulated,styles:i.styles||We,_:null,schemas:i.schemas||null,tView:null,id:""});nf(e);let n=i.dependencies;return e.directiveDefs=ih(n,!1),e.pipeDefs=ih(n,!0),e.id=Qb(e),e})}function Zb(i){return pn(i)||Kh(i)}function Yb(i){return i!==null}function _n(i){return nr(()=>({type:i.type,bootstrap:i.bootstrap||We,declarations:i.declarations||We,imports:i.imports||We,exports:i.exports||We,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function nh(i,t){if(i==null)return ni;let e={};for(let n in i)if(i.hasOwnProperty(n)){let r=i[n],s,o,a=Ut.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),t?(e[s]=a!==Ut.None?[n,a]:n,t[s]=o):e[s]=n}return e}function ye(i){return nr(()=>{let t=tf(i);return nf(t),t})}function pn(i){return i[gb]||null}function Kh(i){return i[bb]||null}function Xh(i){return i[vb]||null}function Jh(i){let t=pn(i)||Kh(i)||Xh(i);return t!==null?t.standalone:!1}function ef(i,t){let e=i[yb]||null;if(!e&&t===!0)throw new Error(`Type ${Fe(i)} does not have '\u0275mod' property.`);return e}function tf(i){let t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:i.inputs||ni,exportAs:i.exportAs||null,standalone:i.standalone===!0,signals:i.signals===!0,selectors:i.selectors||We,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nh(i.inputs,t),outputs:nh(i.outputs),debugInfo:null}}function nf(i){i.features?.forEach(t=>t(i))}function ih(i,t){if(!i)return null;let e=t?Xh:Zb;return()=>(typeof i=="function"?i():i).map(n=>e(n)).filter(Yb)}function Qb(i){let t=0,e=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function io(i){return{\u0275providers:i}}function Kb(...i){return{\u0275providers:rf(!0,i),\u0275fromNgModule:!0}}function rf(i,...t){let e=[],n=new Set,r,s=o=>{e.push(o)};return ql(t,o=>{let a=o;el(a,s,[],n)&&(r||=[],r.push(a))}),r!==void 0&&sf(r,s),e}function sf(i,t){for(let e=0;e<i.length;e++){let{ngModule:n,providers:r}=i[e];Yl(r,s=>{t(s,n)})}}function el(i,t,e,n){if(i=Oe(i),!i)return!1;let r=null,s=Qd(i),o=!s&&pn(i);if(!s&&!o){let l=i.ngModule;if(s=Qd(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=i}let a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)el(u,t,e,n)}}else if(s){if(s.imports!=null&&!a){n.add(r);let u;try{ql(s.imports,c=>{el(c,t,e,n)&&(u||=[],u.push(c))})}finally{}u!==void 0&&sf(u,t)}if(!a){let u=ti(r)||(()=>new r);t({provide:r,useFactory:u,deps:We},r),t({provide:qh,useValue:r,multi:!0},r),t({provide:ii,useValue:()=>$(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let u=i;Yl(l,c=>{t(c,u)})}}else return!1;return r!==i&&i.providers!==void 0}function Yl(i,t){for(let e of i)jh(e)&&(e=e.\u0275providers),Array.isArray(e)?Yl(e,t):t(e)}var Xb=ne({provide:String,useValue:ne});function of(i){return i!==null&&typeof i=="object"&&Xb in i}function Jb(i){return!!(i&&i.useExisting)}function ev(i){return!!(i&&i.useFactory)}function ri(i){return typeof i=="function"}function tv(i){return!!i.useClass}var ro=new I(""),Ms={},nv={},Pa;function Ql(){return Pa===void 0&&(Pa=new Ns),Pa}var qe=class{},Ki=class extends qe{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nl(t,o=>this.processProvider(o)),this.records.set(Gh,Qn(void 0,this)),r.has("environment")&&this.records.set(qe,Qn(void 0,this));let s=this.records.get(ro);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(qh,We,j.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Z(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Z(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=jt(this),n=$e(void 0),r;try{return t()}finally{jt(e),$e(n)}}get(t,e=Yi,n=j.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Xd))return t[Xd](this);n=no(n);let r,s=jt(this),o=$e(void 0);try{if(!(n&j.SkipSelf)){let l=this.records.get(t);if(l===void 0){let u=av(t)&&eo(t);u&&this.injectableDefInScope(u)?l=Qn(tl(t),Ms):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=n&j.Self?Ql():this.parent;return e=n&j.Optional&&e===Yi?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[As]=a[As]||[]).unshift(Fe(t)),s)throw a;return Ib(a,t,"R3InjectorError",this.source)}else throw a}finally{$e(o),jt(s)}}resolveInjectorInitializers(){let t=Z(null),e=jt(this),n=$e(void 0),r;try{let s=this.get(ii,We,j.Self);for(let o of s)o()}finally{jt(e),$e(n),Z(t)}}toString(){let t=[],e=this.records;for(let n of e.keys())t.push(Fe(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(t){t=Oe(t);let e=ri(t)?t:Oe(t&&t.provide),n=rv(t);if(!ri(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Qn(void 0,Ms,!0),r.factory=()=>Xa(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){let n=Z(null);try{return e.value===Ms&&(e.value=nv,e.value=e.factory()),typeof e.value=="object"&&e.value&&ov(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Z(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Oe(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function tl(i){let t=eo(i),e=t!==null?t.factory:ti(i);if(e!==null)return e;if(i instanceof I)throw new S(204,!1);if(i instanceof Function)return iv(i);throw new S(204,!1)}function iv(i){if(i.length>0)throw new S(204,!1);let e=pb(i);return e!==null?()=>e.factory(i):()=>new i}function rv(i){if(of(i))return Qn(void 0,i.useValue);{let t=af(i);return Qn(t,Ms)}}function af(i,t,e){let n;if(ri(i)){let r=Oe(i);return ti(r)||tl(r)}else if(of(i))n=()=>Oe(i.useValue);else if(ev(i))n=()=>i.useFactory(...Xa(i.deps||[]));else if(Jb(i))n=()=>$(Oe(i.useExisting));else{let r=Oe(i&&(i.useClass||i.provide));if(sv(i))n=()=>new r(...Xa(i.deps));else return ti(r)||tl(r)}return n}function Qn(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function sv(i){return!!i.deps}function ov(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function av(i){return typeof i=="function"||typeof i=="object"&&i instanceof I}function nl(i,t){for(let e of i)Array.isArray(e)?nl(e,t):e&&jh(e)?nl(e.\u0275providers,t):t(e)}function St(i,t){i instanceof Ki&&i.assertNotDestroyed();let e,n=jt(i),r=$e(void 0);try{return t()}finally{jt(n),$e(r)}}function lv(){return Bh()!==void 0||_b()!=null}function uv(i){return typeof i=="function"}var _t=0,L=1,T=2,Re=3,nt=4,rt=5,Os=6,Fs=7,it=8,si=9,ht=10,fe=11,Xi=12,rh=13,di=14,ft=15,mn=16,Kn=17,Et=18,so=19,lf=20,Bt=21,Va=22,Ge=23,$t=25,uf=1;var gn=7,Ls=8,oi=9,Be=10,Ps=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(Ps||{});function zt(i){return Array.isArray(i)&&typeof i[uf]=="object"}function xt(i){return Array.isArray(i)&&i[uf]===!0}function cf(i){return(i.flags&4)!==0}function oo(i){return i.componentOffset>-1}function Kl(i){return(i.flags&1)===1}function Wt(i){return!!i.template}function il(i){return(i[T]&512)!==0}var rl=class{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}};function df(i,t,e,n){t!==null?t.applyValueToInputSignal(t,n):i[e]=n}function Yt(){return hf}function hf(i){return i.type.prototype.ngOnChanges&&(i.setInput=dv),cv}Yt.ngInherit=!0;function cv(){let i=pf(this),t=i?.current;if(t){let e=i.previous;if(e===ni)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function dv(i,t,e,n,r){let s=this.declaredInputs[n],o=pf(i)||hv(i,{previous:ni,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new rl(u&&u.currentValue,e,l===ni),df(i,t,r,e)}var ff="__ngSimpleChanges__";function pf(i){return i[ff]||null}function hv(i,t){return i[ff]=t}var sh=null;var ut=function(i,t,e){sh?.(i,t,e)},fv="svg",pv="math";function pt(i){for(;Array.isArray(i);)i=i[_t];return i}function mf(i,t){return pt(t[i])}function Ze(i,t){return pt(t[i.index])}function gf(i,t){return i.data[t]}function Qt(i,t){let e=t[i];return zt(e)?e:e[_t]}function mv(i){return(i[T]&4)===4}function Xl(i){return(i[T]&128)===128}function gv(i){return xt(i[Re])}function Vs(i,t){return t==null?null:i[t]}function bf(i){i[Kn]=0}function vf(i){i[T]&1024||(i[T]|=1024,Xl(i)&&lo(i))}function bv(i,t){for(;i>0;)t=t[di],i--;return t}function ao(i){return!!(i[T]&9216||i[Ge]?.dirty)}function sl(i){i[ht].changeDetectionScheduler?.notify(8),i[T]&64&&(i[T]|=1024),ao(i)&&lo(i)}function lo(i){i[ht].changeDetectionScheduler?.notify(0);let t=bn(i);for(;t!==null&&!(t[T]&8192||(t[T]|=8192,!Xl(t)));)t=bn(t)}function yf(i,t){if((i[T]&256)===256)throw new S(911,!1);i[Bt]===null&&(i[Bt]=[]),i[Bt].push(t)}function vv(i,t){if(i[Bt]===null)return;let e=i[Bt].indexOf(t);e!==-1&&i[Bt].splice(e,1)}function bn(i){let t=i[Re];return xt(t)?t[Re]:t}var z={lFrame:Tf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Cf=!1;function yv(){return z.lFrame.elementDepthCount}function Cv(){z.lFrame.elementDepthCount++}function wv(){z.lFrame.elementDepthCount--}function wf(){return z.bindingsEnabled}function Ev(){return z.skipHydrationRootTNode!==null}function Dv(i){return z.skipHydrationRootTNode===i}function Mv(){z.skipHydrationRootTNode=null}function Y(){return z.lFrame.lView}function _e(){return z.lFrame.tView}function se(i){return z.lFrame.contextLView=i,i[it]}function oe(i){return z.lFrame.contextLView=null,i}function Ae(){let i=Ef();for(;i!==null&&i.type===64;)i=i.parent;return i}function Ef(){return z.lFrame.currentTNode}function Sv(){let i=z.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}function rr(i,t){let e=z.lFrame;e.currentTNode=i,e.isParent=t}function Df(){return z.lFrame.isParent}function _v(){z.lFrame.isParent=!1}function Mf(){return Cf}function oh(i){Cf=i}function xv(){let i=z.lFrame,t=i.bindingRootIndex;return t===-1&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Tv(i){return z.lFrame.bindingIndex=i}function uo(){return z.lFrame.bindingIndex++}function Iv(i){let t=z.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function Rv(){return z.lFrame.inI18n}function Av(i,t){let e=z.lFrame;e.bindingIndex=e.bindingRootIndex=i,ol(t)}function kv(){return z.lFrame.currentDirectiveIndex}function ol(i){z.lFrame.currentDirectiveIndex=i}function Nv(i){let t=z.lFrame.currentDirectiveIndex;return t===-1?null:i[t]}function Sf(){return z.lFrame.currentQueryIndex}function Jl(i){z.lFrame.currentQueryIndex=i}function Ov(i){let t=i[L];return t.type===2?t.declTNode:t.type===1?i[rt]:null}function _f(i,t,e){if(e&j.SkipSelf){let r=t,s=i;for(;r=r.parent,r===null&&!(e&j.Host);)if(r=Ov(s),r===null||(s=s[di],r.type&10))break;if(r===null)return!1;t=r,i=s}let n=z.lFrame=xf();return n.currentTNode=t,n.lView=i,!0}function eu(i){let t=xf(),e=i[L];z.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function xf(){let i=z.lFrame,t=i===null?null:i.child;return t===null?Tf(i):t}function Tf(i){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=t),t}function If(){let i=z.lFrame;return z.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var Rf=If;function tu(){let i=If();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Fv(i){return(z.lFrame.contextLView=bv(i,z.lFrame.contextLView))[it]}function hi(){return z.lFrame.selectedIndex}function vn(i){z.lFrame.selectedIndex=i}function co(){let i=z.lFrame;return gf(i.tView,i.selectedIndex)}function Lv(){return z.lFrame.currentNamespace}var Af=!0;function nu(){return Af}function iu(i){Af=i}function Pv(i,t,e){let{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){let o=hf(t);(e.preOrderHooks??=[]).push(i,o),(e.preOrderCheckHooks??=[]).push(i,o)}r&&(e.preOrderHooks??=[]).push(0-i,r),s&&((e.preOrderHooks??=[]).push(i,s),(e.preOrderCheckHooks??=[]).push(i,s))}function ru(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){let s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(i.contentHooks??=[]).push(-e,o),a&&((i.contentHooks??=[]).push(e,a),(i.contentCheckHooks??=[]).push(e,a)),l&&(i.viewHooks??=[]).push(-e,l),u&&((i.viewHooks??=[]).push(e,u),(i.viewCheckHooks??=[]).push(e,u)),c!=null&&(i.destroyHooks??=[]).push(e,c)}}function Ss(i,t,e){kf(i,t,3,e)}function _s(i,t,e,n){(i[T]&3)===e&&kf(i,t,e,n)}function Ha(i,t){let e=i[T];(e&3)===t&&(e&=16383,e+=1,i[T]=e)}function kf(i,t,e,n){let r=n!==void 0?i[Kn]&65535:0,s=n??-1,o=t.length-1,a=0;for(let l=r;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],n!=null&&a>=n)break}else t[l]<0&&(i[Kn]+=65536),(a<s||s==-1)&&(Vv(i,e,t,l),i[Kn]=(i[Kn]&4294901760)+l+2),l++}function ah(i,t){ut(4,i,t);let e=Z(null);try{t.call(i)}finally{Z(e),ut(5,i,t)}}function Vv(i,t,e,n){let r=e[n]<0,s=e[n+1],o=r?-e[n]:e[n],a=i[o];r?i[T]>>14<i[Kn]>>16&&(i[T]&3)===t&&(i[T]+=16384,ah(a,s)):ah(a,s)}var ei=-1,yn=class{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}};function Hv(i){return i instanceof yn}function jv(i){return(i.flags&8)!==0}function Bv(i){return(i.flags&16)!==0}var ja={},al=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=no(n);let r=this.injector.get(t,ja,n);return r!==ja||e===ja?r:this.parentInjector.get(t,e,n)}};function Nf(i){return i!==ei}function Hs(i){return i&32767}function zv(i){return i>>16}function js(i,t){let e=zv(i),n=t;for(;e>0;)n=n[di],e--;return n}var ll=!0;function lh(i){let t=ll;return ll=i,t}var Uv=256,Of=Uv-1,Ff=5,$v=0,ct={};function Wv(i,t,e){let n;typeof e=="string"?n=e.charCodeAt(0)||0:e.hasOwnProperty(Zi)&&(n=e[Zi]),n==null&&(n=e[Zi]=$v++);let r=n&Of,s=1<<r;t.data[i+(r>>Ff)]|=s}function Bs(i,t){let e=Lf(i,t);if(e!==-1)return e;let n=t[L];n.firstCreatePass&&(i.injectorIndex=t.length,Ba(n.data,i),Ba(t,null),Ba(n.blueprint,null));let r=su(i,t),s=i.injectorIndex;if(Nf(r)){let o=Hs(r),a=js(r,t),l=a[L].data;for(let u=0;u<8;u++)t[s+u]=a[o+u]|l[o+u]}return t[s+8]=r,s}function Ba(i,t){i.push(0,0,0,0,0,0,0,0,t)}function Lf(i,t){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||t[i.injectorIndex+8]===null?-1:i.injectorIndex}function su(i,t){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;r!==null;){if(n=Bf(r),n===null)return ei;if(e++,r=r[di],n.injectorIndex!==-1)return n.injectorIndex|e<<16}return ei}function ul(i,t,e){Wv(i,t,e)}function Gv(i,t){if(t==="class")return i.classes;if(t==="style")return i.styles;let e=i.attrs;if(e){let n=e.length,r=0;for(;r<n;){let s=e[r];if(Yh(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<n&&typeof e[r]=="string";)r++;else{if(s===t)return e[r+1];r=r+2}}}return null}function Pf(i,t,e){if(e&j.Optional||i!==void 0)return i;Wl(t,"NodeInjector")}function Vf(i,t,e,n){if(e&j.Optional&&n===void 0&&(n=null),!(e&(j.Self|j.Host))){let r=i[si],s=$e(void 0);try{return r?r.get(t,n,e&j.Optional):zh(t,n,e&j.Optional)}finally{$e(s)}}return Pf(n,t,e)}function Hf(i,t,e,n=j.Default,r){if(i!==null){if(t[T]&2048&&!(n&j.Self)){let o=Qv(i,t,e,n,ct);if(o!==ct)return o}let s=jf(i,t,e,n,ct);if(s!==ct)return s}return Vf(t,e,n,r)}function jf(i,t,e,n,r){let s=Zv(e);if(typeof s=="function"){if(!_f(t,i,n))return n&j.Host?Pf(r,e,n):Vf(t,e,n,r);try{let o;if(o=s(n),o==null&&!(n&j.Optional))Wl(e);else return o}finally{Rf()}}else if(typeof s=="number"){let o=null,a=Lf(i,t),l=ei,u=n&j.Host?t[ft][rt]:null;for((a===-1||n&j.SkipSelf)&&(l=a===-1?su(i,t):t[a+8],l===ei||!ch(n,!1)?a=-1:(o=t[L],a=Hs(l),t=js(l,t)));a!==-1;){let c=t[L];if(uh(s,a,c.data)){let d=qv(a,t,e,o,n,u);if(d!==ct)return d}l=t[a+8],l!==ei&&ch(n,t[L].data[a+8]===u)&&uh(s,a,t)?(o=c,a=Hs(l),t=js(l,t)):a=-1}}return r}function qv(i,t,e,n,r,s){let o=t[L],a=o.data[i+8],l=n==null?oo(a)&&ll:n!=o&&(a.type&3)!==0,u=r&j.Host&&s===a,c=xs(a,o,e,l,u);return c!==null?Cn(t,o,c,a):ct}function xs(i,t,e,n,r){let s=i.providerIndexes,o=t.data,a=s&1048575,l=i.directiveStart,u=i.directiveEnd,c=s>>20,d=n?a:a+c,h=r?a+c:u;for(let f=d;f<h;f++){let p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(r){let f=o[l];if(f&&Wt(f)&&f.type===e)return l}return null}function Cn(i,t,e,n){let r=i[e],s=t.data;if(Hv(r)){let o=r;o.resolving&&wb(Cb(s[e]));let a=lh(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?$e(o.injectImpl):null,c=_f(i,n,j.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&Pv(e,s[e],t)}finally{u!==null&&$e(u),lh(a),o.resolving=!1,Rf()}}return r}function Zv(i){if(typeof i=="string")return i.charCodeAt(0)||0;let t=i.hasOwnProperty(Zi)?i[Zi]:void 0;return typeof t=="number"?t>=0?t&Of:Yv:t}function uh(i,t,e){let n=1<<i;return!!(e[t+(i>>Ff)]&n)}function ch(i,t){return!(i&j.Self)&&!(i&j.Host&&t)}var fn=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Hf(this._tNode,this._lView,t,no(n),e)}};function Yv(){return new fn(Ae(),Y())}function Kt(i){return nr(()=>{let t=i.prototype.constructor,e=t[Rs]||cl(t),n=Object.prototype,r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){let s=r[Rs]||cl(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function cl(i){return Lh(i)?()=>{let t=cl(Oe(i));return t&&t()}:ti(i)}function Qv(i,t,e,n,r){let s=i,o=t;for(;s!==null&&o!==null&&o[T]&2048&&!(o[T]&512);){let a=jf(s,o,e,n|j.Self,ct);if(a!==ct)return a;let l=s.parent;if(!l){let u=o[lf];if(u){let c=u.get(e,ct,n);if(c!==ct)return c}l=Bf(o),o=o[di]}s=l}return r}function Bf(i){let t=i[L],e=t.type;return e===2?t.declTNode:e===1?i[rt]:null}function ou(i){return Gv(Ae(),i)}function dh(i,t=null,e=null,n){let r=zf(i,t,e,n);return r.resolveInjectorInitializers(),r}function zf(i,t=null,e=null,n,r=new Set){let s=[e||We,Kb(i)];return n=n||(typeof i=="object"?void 0:Fe(i)),new Ki(s,t||Ql(),n||null,r)}var Gt=class i{static{this.THROW_IF_NOT_FOUND=Yi}static{this.NULL=new Ns}static create(t,e){if(Array.isArray(t))return dh({name:""},e,t,"");{let n=t.name??"";return dh({name:n},t.parent,t.providers,n)}}static{this.\u0275prov=_({token:i,providedIn:"any",factory:()=>$(Gh)})}static{this.__NG_ELEMENT_ID__=-1}};var Kv=new I("");Kv.__NG_ELEMENT_ID__=i=>{let t=Ae();if(t===null)throw new S(204,!1);if(t.type&2)return t.value;if(i&j.Optional)return null;throw new S(204,!1)};var Xv="ngOriginalError";function za(i){return i[Xv]}var Uf=!0,$f=(()=>{class i{static{this.__NG_ELEMENT_ID__=Jv}static{this.__NG_ENV_ID__=e=>e}}return i})(),dl=class extends $f{constructor(t){super(),this._lView=t}onDestroy(t){return yf(this._lView,t),()=>vv(this._lView,t)}};function Jv(){return new dl(Y())}var fi=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ae(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=_({token:i,providedIn:"root",factory:()=>new i})}}return i})();var hl=class extends ve{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,lv()&&(this.destroyRef=E($f,{optional:!0})??void 0,this.pendingTasks=E(fi,{optional:!0})??void 0)}emit(t){let e=Z(null);try{super.next(t)}finally{Z(e)}}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return t instanceof ce&&t.add(a),a}wrapInTimeout(t){return e=>{let n=this.pendingTasks?.add();setTimeout(()=>{t(e),n!==void 0&&this.pendingTasks?.remove(n)})}}},ue=hl;function zs(...i){}function Wf(i){let t,e;function n(){i=zs;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{i(),n()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{i(),n()})),()=>n()}function hh(i){return queueMicrotask(()=>i()),()=>{i=zs}}var au="isAngularZone",Us=au+"_ID",ey=0,he=class i{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ue(!1),this.onMicrotaskEmpty=new ue(!1),this.onStable=new ue(!1),this.onError=new ue(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Uf}=t;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,iy(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(au)===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new S(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,ty,zs,zs);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}},ty={};function lu(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ny(i){if(i.isCheckStableRunning||i.callbackScheduled)return;i.callbackScheduled=!0;function t(){Wf(()=>{i.callbackScheduled=!1,fl(i),i.isCheckStableRunning=!0,lu(i),i.isCheckStableRunning=!1})}i.scheduleInRootZone?Zone.root.run(()=>{t()}):i._outer.run(()=>{t()}),fl(i)}function iy(i){let t=()=>{ny(i)},e=ey++;i._inner=i._inner.fork({name:"angular",properties:{[au]:!0,[Us]:e,[Us+e]:!0},onInvokeTask:(n,r,s,o,a,l)=>{if(ry(l))return n.invokeTask(s,o,a,l);try{return fh(i),n.invokeTask(s,o,a,l)}finally{(i.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&t(),ph(i)}},onInvoke:(n,r,s,o,a,l,u)=>{try{return fh(i),n.invoke(s,o,a,l,u)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!sy(l)&&t(),ph(i)}},onHasTask:(n,r,s,o)=>{n.hasTask(s,o),r===s&&(o.change=="microTask"?(i._hasPendingMicrotasks=o.microTask,fl(i),lu(i)):o.change=="macroTask"&&(i.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,s,o)=>(n.handleError(s,o),i.runOutsideAngular(()=>i.onError.emit(o)),!1)})}function fl(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.callbackScheduled===!0?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function fh(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ph(i){i._nesting--,lu(i)}var pl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ue,this.onMicrotaskEmpty=new ue,this.onStable=new ue,this.onError=new ue}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}};function ry(i){return Gf(i,"__ignore_ng_zone__")}function sy(i){return Gf(i,"__scheduler_tick__")}function Gf(i,t){return!Array.isArray(i)||i.length!==1?!1:i[0]?.data?.[t]===!0}var Dt=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&za(t);for(;e&&za(e);)e=za(e);return e||null}},oy=new I("",{providedIn:"root",factory:()=>{let i=E(he),t=E(Dt);return e=>i.runOutsideAngular(()=>t.handleError(e))}});function ay(){return pi(Ae(),Y())}function pi(i,t){return new ke(Ze(i,t))}var ke=(()=>{class i{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=ay}}return i})();function ly(i){return i instanceof ke?i.nativeElement:i}function uy(){return this._results[Symbol.iterator]()}var ml=class i{get changes(){return this._changes??=new ue}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=i.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=uy)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let n=kb(t);(this._changesDetected=!Ab(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qf(i){return(i.flags&128)===128}var Zf=new Map,cy=0;function dy(){return cy++}function hy(i){Zf.set(i[so],i)}function gl(i){Zf.delete(i[so])}var mh="__ngContext__";function wn(i,t){zt(t)?(i[mh]=t[so],hy(t)):i[mh]=t}function Yf(i){return Kf(i[Xi])}function Qf(i){return Kf(i[nt])}function Kf(i){for(;i!==null&&!xt(i);)i=i[nt];return i}var bl;function Xf(i){bl=i}function fy(){if(bl!==void 0)return bl;if(typeof document<"u")return document;throw new S(210,!1)}var uu=new I("",{providedIn:"root",factory:()=>py}),py="ng",cu=new I(""),mi=new I("",{providedIn:"platform",factory:()=>"unknown"});var du=new I("",{providedIn:"root",factory:()=>fy().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var my="h",gy="b";var by=()=>null;function hu(i,t,e=!1){return by(i,t,e)}var Jf=!1,vy=new I("",{providedIn:"root",factory:()=>Jf});var Cs;function yy(){if(Cs===void 0&&(Cs=null,Ya.trustedTypes))try{Cs=Ya.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Cs}function gh(i){return yy()?.createScriptURL(i)||i}var $s=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Oh})`}};function sr(i){return i instanceof $s?i.changingThisBreaksApplicationSecurity:i}function fu(i,t){let e=Cy(i);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Oh})`)}return e===t}function Cy(i){return i instanceof $s&&i.getTypeName()||null}var wy=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ep(i){return i=String(i),i.match(wy)?i:"unsafe:"+i}var ho=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(ho||{});function Ey(i){let t=np();return t?t.sanitize(ho.URL,i)||"":fu(i,"URL")?sr(i):ep(to(i))}function Dy(i){let t=np();if(t)return gh(t.sanitize(ho.RESOURCE_URL,i)||"");if(fu(i,"ResourceURL"))return gh(sr(i));throw new S(904,!1)}function My(i,t){return t==="src"&&(i==="embed"||i==="frame"||i==="iframe"||i==="media"||i==="script")||t==="href"&&(i==="base"||i==="link")?Dy:Ey}function tp(i,t,e){return My(t,e)(i)}function np(){let i=Y();return i&&i[ht].sanitizer}function ip(i){return i.ownerDocument}function rp(i){return i instanceof Function?i():i}var Mt=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Mt||{}),Sy;function pu(i,t){return Sy(i,t)}function Xn(i,t,e,n,r){if(n!=null){let s,o=!1;xt(n)?s=n:zt(n)&&(o=!0,n=n[_t]);let a=pt(n);i===0&&e!==null?r==null?up(t,e,a):Ws(t,e,a,r||null,!0):i===1&&e!==null?Ws(t,e,a,r||null,!0):i===2?jy(t,a,o):i===3&&t.destroyNode(a),s!=null&&zy(t,i,s,e,r)}}function _y(i,t){return i.createText(t)}function xy(i,t,e){i.setValue(t,e)}function sp(i,t,e){return i.createElement(t,e)}function Ty(i,t){op(i,t),t[_t]=null,t[rt]=null}function Iy(i,t,e,n,r,s){n[_t]=r,n[rt]=t,fo(i,n,e,1,r,s)}function op(i,t){t[ht].changeDetectionScheduler?.notify(9),fo(i,t,t[fe],2,null,null)}function Ry(i){let t=i[Xi];if(!t)return Ua(i[L],i);for(;t;){let e=null;if(zt(t))e=t[Xi];else{let n=t[Be];n&&(e=n)}if(!e){for(;t&&!t[nt]&&t!==i;)zt(t)&&Ua(t[L],t),t=t[Re];t===null&&(t=i),zt(t)&&Ua(t[L],t),e=t&&t[nt]}t=e}}function Ay(i,t,e,n){let r=Be+n,s=e.length;n>0&&(e[r-1][nt]=t),n<s-Be?(t[nt]=e[r],Wh(e,Be+n,t)):(e.push(t),t[nt]=null),t[Re]=e;let o=t[mn];o!==null&&e!==o&&ap(o,t);let a=t[Et];a!==null&&a.insertView(i),sl(t),t[T]|=128}function ap(i,t){let e=i[oi],n=t[Re];if(zt(n))i[T]|=Ps.HasTransplantedViews;else{let r=n[Re][ft];t[ft]!==r&&(i[T]|=Ps.HasTransplantedViews)}e===null?i[oi]=[t]:e.push(t)}function mu(i,t){let e=i[oi],n=e.indexOf(t);e.splice(n,1)}function vl(i,t){if(i.length<=Be)return;let e=Be+t,n=i[e];if(n){let r=n[mn];r!==null&&r!==i&&mu(r,n),t>0&&(i[e-1][nt]=n[nt]);let s=ks(i,Be+t);Ty(n[L],n);let o=s[Et];o!==null&&o.detachView(s[L]),n[Re]=null,n[nt]=null,n[T]&=-129}return n}function lp(i,t){if(!(t[T]&256)){let e=t[fe];e.destroyNode&&fo(i,t,e,3,null,null),Ry(t)}}function Ua(i,t){if(t[T]&256)return;let e=Z(null);try{t[T]&=-129,t[T]|=256,t[Ge]&&va(t[Ge]),Ny(i,t),ky(i,t),t[L].type===1&&t[fe].destroy();let n=t[mn];if(n!==null&&xt(t[Re])){n!==t[Re]&&mu(n,t);let r=t[Et];r!==null&&r.detachView(i)}gl(t)}finally{Z(e)}}function ky(i,t){let e=i.cleanup,n=t[Fs];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let o=e[s+3];o>=0?n[o]():n[-o].unsubscribe(),s+=2}else{let o=n[e[s+1]];e[s].call(o)}n!==null&&(t[Fs]=null);let r=t[Bt];if(r!==null){t[Bt]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function Ny(i,t){let e;if(i!=null&&(e=i.destroyHooks)!=null)for(let n=0;n<e.length;n+=2){let r=t[e[n]];if(!(r instanceof yn)){let s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];ut(4,a,l);try{l.call(a)}finally{ut(5,a,l)}}else{ut(4,r,s);try{s.call(r)}finally{ut(5,r,s)}}}}}function Oy(i,t,e){return Fy(i,t.parent,e)}function Fy(i,t,e){let n=t;for(;n!==null&&n.type&168;)t=n,n=t.parent;if(n===null)return e[_t];{let{componentOffset:r}=n;if(r>-1){let{encapsulation:s}=i.data[n.directiveStart+r];if(s===dt.None||s===dt.Emulated)return null}return Ze(n,e)}}function Ws(i,t,e,n,r){i.insertBefore(t,e,n,r)}function up(i,t,e){i.appendChild(t,e)}function bh(i,t,e,n,r){n!==null?Ws(i,t,e,n,r):up(i,t,e)}function cp(i,t){return i.parentNode(t)}function Ly(i,t){return i.nextSibling(t)}function Py(i,t,e){return Hy(i,t,e)}function Vy(i,t,e){return i.type&40?Ze(i,e):null}var Hy=Vy,vh;function gu(i,t,e,n){let r=Oy(i,n,t),s=t[fe],o=n.parent||t[rt],a=Py(o,n,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)bh(s,r,e[l],a,!1);else bh(s,r,e,a,!1);vh!==void 0&&vh(s,n,t,e,r)}function Gi(i,t){if(t!==null){let e=t.type;if(e&3)return Ze(t,i);if(e&4)return yl(-1,i[t.index]);if(e&8){let n=t.child;if(n!==null)return Gi(i,n);{let r=i[t.index];return xt(r)?yl(-1,r):pt(r)}}else{if(e&128)return Gi(i,t.next);if(e&32)return pu(t,i)()||pt(i[t.index]);{let n=dp(i,t);if(n!==null){if(Array.isArray(n))return n[0];let r=bn(i[ft]);return Gi(r,n)}else return Gi(i,t.next)}}}return null}function dp(i,t){if(t!==null){let n=i[ft][rt],r=t.projection;return n.projection[r]}return null}function yl(i,t){let e=Be+i+1;if(e<t.length){let n=t[e],r=n[L].firstChild;if(r!==null)return Gi(n,r)}return t[gn]}function jy(i,t,e){i.removeChild(null,t,e)}function bu(i,t,e,n,r,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=n[e.index],l=e.type;if(o&&t===0&&(a&&wn(pt(a),n),e.flags|=2),(e.flags&32)!==32)if(l&8)bu(i,t,e.child,n,r,s,!1),Xn(t,i,r,a,s);else if(l&32){let u=pu(e,n),c;for(;c=u();)Xn(t,i,r,c,s);Xn(t,i,r,a,s)}else l&16?By(i,t,n,e,r,s):Xn(t,i,r,a,s);e=o?e.projectionNext:e.next}}function fo(i,t,e,n,r,s){bu(e,n,i.firstChild,t,r,s,!1)}function By(i,t,e,n,r,s){let o=e[ft],l=o[rt].projection[n.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let c=l[u];Xn(t,i,r,c,s)}else{let u=l,c=o[Re];qf(n)&&(u.flags|=128),bu(i,t,u,c,r,s,!0)}}function zy(i,t,e,n,r){let s=e[gn],o=pt(e);s!==o&&Xn(t,i,n,s,r);for(let a=Be;a<e.length;a++){let l=e[a];fo(l[L],l,i,t,n,s)}}function Uy(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=n.indexOf("-")===-1?void 0:Mt.DashCase;r==null?i.removeStyle(e,n,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Mt.Important),i.setStyle(e,n,r,s))}}function $y(i,t,e){i.setAttribute(t,"style",e)}function hp(i,t,e){e===""?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function fp(i,t,e){let{mergedAttrs:n,classes:r,styles:s}=e;n!==null&&Ja(i,t,n),r!==null&&hp(i,t,r),s!==null&&$y(i,t,s)}var Xt={};function x(i=1){pp(_e(),Y(),hi()+i,!1)}function pp(i,t,e,n){if(!n)if((t[T]&3)===3){let s=i.preOrderCheckHooks;s!==null&&Ss(t,s,e)}else{let s=i.preOrderHooks;s!==null&&_s(t,s,0,e)}vn(e)}function D(i,t=j.Default){let e=Y();if(e===null)return $(i,t);let n=Ae();return Hf(n,e,Oe(i),t)}function mp(i,t,e,n,r,s){let o=Z(null);try{let a=null;r&Ut.SignalBased&&(a=t[n][yt]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&Ut.HasDecoratorInputTransform&&(s=i.inputTransforms[n].call(t,s)),i.setInput!==null?i.setInput(t,a,s,e,n):df(t,a,n,s)}finally{Z(o)}}function Wy(i,t){let e=i.hostBindingOpCodes;if(e!==null)try{for(let n=0;n<e.length;n++){let r=e[n];if(r<0)vn(~r);else{let s=r,o=e[++n],a=e[++n];Av(o,s);let l=t[s];a(2,l)}}}finally{vn(-1)}}function po(i,t,e,n,r,s,o,a,l,u,c){let d=t.blueprint.slice();return d[_t]=r,d[T]=n|4|128|8|64,(u!==null||i&&i[T]&2048)&&(d[T]|=2048),bf(d),d[Re]=d[di]=i,d[it]=e,d[ht]=o||i&&i[ht],d[fe]=a||i&&i[fe],d[si]=l||i&&i[si]||null,d[rt]=s,d[so]=dy(),d[Os]=c,d[lf]=u,d[ft]=t.type==2?i[ft]:d,d}function mo(i,t,e,n,r){let s=i.data[t];if(s===null)s=Gy(i,t,e,n,r),Rv()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=n,s.attrs=r;let o=Sv();s.injectorIndex=o===null?-1:o.injectorIndex}return rr(s,!0),s}function Gy(i,t,e,n,r){let s=Ef(),o=Df(),a=o?s:s&&s.parent,l=i.data[t]=Xy(i,a,e,t,n,r);return i.firstChild===null&&(i.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function gp(i,t,e,n){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function bp(i,t,e,n,r){let s=hi(),o=n&2;try{vn(-1),o&&t.length>$t&&pp(i,t,$t,!1),ut(o?2:0,r),e(n,r)}finally{vn(s),ut(o?3:1,r)}}function vp(i,t,e){if(cf(t)){let n=Z(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let o=r;o<s;o++){let a=i.data[o];if(a.contentQueries){let l=e[o];a.contentQueries(1,l,o)}}}finally{Z(n)}}}function yp(i,t,e){wf()&&(rC(i,t,e,Ze(e,t)),(e.flags&64)===64&&Mp(i,t,e))}function Cp(i,t,e=Ze){let n=t.localNames;if(n!==null){let r=t.index+1;for(let s=0;s<n.length;s+=2){let o=n[s+1],a=o===-1?e(t,i):i[o];i[r++]=a}}}function wp(i){let t=i.tView;return t===null||t.incompleteFirstPass?i.tView=vu(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):t}function vu(i,t,e,n,r,s,o,a,l,u,c){let d=$t+n,h=d+r,f=qy(d,h),p=typeof u=="function"?u():u;return f[L]={type:i,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}function qy(i,t){let e=[];for(let n=0;n<t;n++)e.push(n<i?null:Xt);return e}function Zy(i,t,e,n){let s=n.get(vy,Jf)||e===dt.ShadowDom,o=i.selectRootElement(t,s);return Yy(o),o}function Yy(i){Qy(i)}var Qy=()=>null;function Ky(i,t,e,n){let r=xp(t);r.push(e),i.firstCreatePass&&Tp(i).push(n,r.length-1)}function Xy(i,t,e,n,r,s){let o=t?t.injectorIndex:-1,a=0;return Ev()&&(a|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yh(i,t,e,n,r){for(let s in t){if(!t.hasOwnProperty(s))continue;let o=t[s];if(o===void 0)continue;n??={};let a,l=Ut.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(r!==null){if(!r.hasOwnProperty(s))continue;u=r[s]}i===0?Ch(n,e,u,a,l):Ch(n,e,u,a)}return n}function Ch(i,t,e,n,r){let s;i.hasOwnProperty(e)?(s=i[e]).push(t,n):s=i[e]=[t,n],r!==void 0&&s.push(r)}function Jy(i,t,e){let n=t.directiveStart,r=t.directiveEnd,s=i.data,o=t.attrs,a=[],l=null,u=null;for(let c=n;c<r;c++){let d=s[c],h=e?e.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=yh(0,d.inputs,c,l,f),u=yh(1,d.outputs,c,u,p);let m=l!==null&&o!==null&&!Zl(t)?mC(l,c,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}function eC(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function yu(i,t,e,n,r,s,o,a){let l=Ze(t,e),u=t.inputs,c;!a&&u!=null&&(c=u[n])?(Cu(i,e,c,n,r),oo(t)&&tC(e,t.index)):t.type&3?(n=eC(n),r=o!=null?o(r,t.value||"",n):r,s.setProperty(l,n,r)):t.type&12}function tC(i,t){let e=Qt(t,i);e[T]&16||(e[T]|=64)}function Ep(i,t,e,n){if(wf()){let r=n===null?null:{"":-1},s=oC(i,e),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Dp(i,t,e,o,r,a),r&&aC(e,n,r)}e.mergedAttrs=Qi(e.mergedAttrs,e.attrs)}function Dp(i,t,e,n,r,s){for(let u=0;u<n.length;u++)ul(Bs(e,t),i,n[u].type);uC(e,i.data.length,n.length);for(let u=0;u<n.length;u++){let c=n[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=gp(i,t,n.length,null);for(let u=0;u<n.length;u++){let c=n[u];e.mergedAttrs=Qi(e.mergedAttrs,c.hostAttrs),cC(i,e,t,l,c),lC(l,c,r),c.contentQueries!==null&&(e.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(e.flags|=64);let d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((i.preOrderHooks??=[]).push(e.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}Jy(i,e,s)}function nC(i,t,e,n,r){let s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;o===null&&(o=i.hostBindingOpCodes=[]);let a=~t.index;iC(o)!=a&&o.push(a),o.push(e,n,s)}}function iC(i){let t=i.length;for(;t>0;){let e=i[--t];if(typeof e=="number"&&e<0)return e}return 0}function rC(i,t,e,n){let r=e.directiveStart,s=e.directiveEnd;oo(e)&&dC(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||Bs(e,t),wn(n,t);let o=e.initialInputs;for(let a=r;a<s;a++){let l=i.data[a],u=Cn(t,i,a,e);if(wn(u,t),o!==null&&pC(t,a-r,u,l,e,o),Wt(l)){let c=Qt(e.index,t);c[it]=Cn(t,i,a,e)}}}function Mp(i,t,e){let n=e.directiveStart,r=e.directiveEnd,s=e.index,o=kv();try{vn(s);for(let a=n;a<r;a++){let l=i.data[a],u=t[a];ol(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&sC(l,u)}}finally{vn(-1),ol(o)}}function sC(i,t){i.hostBindings!==null&&i.hostBindings(1,t)}function oC(i,t){let e=i.directiveRegistry,n=null,r=null;if(e)for(let s=0;s<e.length;s++){let o=e[s];if(zb(t,o.selectors,!1))if(n||(n=[]),Wt(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o);let l=a.length;Cl(i,t,l)}else n.unshift(o),Cl(i,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return n===null?null:[n,r]}function Cl(i,t,e){t.componentOffset=e,(i.components??=[]).push(t.index)}function aC(i,t,e){if(t){let n=i.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new S(-301,!1);n.push(t[r],s)}}}function lC(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Wt(t)&&(e[""]=i)}}function uC(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function cC(i,t,e,n,r){i.data[n]=r;let s=r.factory||(r.factory=ti(r.type,!0)),o=new yn(s,Wt(r),D);i.blueprint[n]=o,e[n]=o,nC(i,t,n,gp(i,e,r.hostVars,Xt),r)}function dC(i,t,e){let n=Ze(t,i),r=wp(e),s=i[ht].rendererFactory,o=16;e.signals?o=4096:e.onPush&&(o=64);let a=go(i,po(i,r,null,o,n,t,null,s.createRenderer(n,e),null,null,null));i[t.index]=a}function hC(i,t,e,n,r,s){let o=Ze(i,t);fC(t[fe],o,s,i.value,e,n,r)}function fC(i,t,e,n,r,s,o){if(s==null)i.removeAttribute(t,r,e);else{let a=o==null?to(s):o(s,n||"",r);i.setAttribute(t,r,a,e)}}function pC(i,t,e,n,r,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],c=o[a++],d=o[a++];mp(n,e,l,u,c,d)}}function mC(i,t,e){let n=null,r=0;for(;r<e.length;){let s=e[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(i.hasOwnProperty(s)){n===null&&(n=[]);let o=i[s];for(let a=0;a<o.length;a+=3)if(o[a]===t){n.push(s,o[a+1],o[a+2],e[r+1]);break}}r+=2}return n}function Sp(i,t,e,n){return[i,!0,0,t,null,n,null,e,null,null]}function _p(i,t){let e=i.contentQueries;if(e!==null){let n=Z(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];if(o!==-1){let a=i.data[o];Jl(s),a.contentQueries(2,t[o],o)}}}finally{Z(n)}}}function go(i,t){return i[Xi]?i[rh][nt]=t:i[Xi]=t,i[rh]=t,t}function wl(i,t,e){Jl(0);let n=Z(null);try{t(i,e)}finally{Z(n)}}function xp(i){return i[Fs]??=[]}function Tp(i){return i.cleanup??=[]}function Ip(i,t){let e=i[si],n=e?e.get(Dt,null):null;n&&n.handleError(t)}function Cu(i,t,e,n,r){for(let s=0;s<e.length;){let o=e[s++],a=e[s++],l=e[s++],u=t[o],c=i.data[o];mp(c,u,n,a,l,r)}}function gC(i,t,e){let n=mf(t,i);xy(i[fe],n,e)}function bC(i,t){let e=Qt(t,i),n=e[L];vC(n,e);let r=e[_t];r!==null&&e[Os]===null&&(e[Os]=hu(r,e[si])),wu(n,e,e[it])}function vC(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])}function wu(i,t,e){eu(t);try{let n=i.viewQuery;n!==null&&wl(1,n,e);let r=i.template;r!==null&&bp(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),t[Et]?.finishViewCreation(i),i.staticContentQueries&&_p(i,t),i.staticViewQueries&&wl(2,i.viewQuery,e);let s=i.components;s!==null&&yC(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[T]&=-5,tu()}}function yC(i,t){for(let e=0;e<t.length;e++)bC(i,t[e])}function CC(i,t,e,n){let r=Z(null);try{let s=t.tView,a=i[T]&4096?4096:16,l=po(i,s,e,a,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),u=i[t.index];l[mn]=u;let c=i[Et];return c!==null&&(l[Et]=c.createEmbeddedView(s)),wu(s,l,e),l}finally{Z(r)}}function wh(i,t){return!t||t.firstChild===null||qf(i)}function wC(i,t,e,n=!0){let r=t[L];if(Ay(r,t,i,e),n){let o=yl(e,i),a=t[fe],l=cp(a,i[gn]);l!==null&&Iy(r,i[rt],a,t,l,o)}let s=t[Os];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Gs(i,t,e,n,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&n.push(pt(s)),xt(s)&&EC(s,n);let o=e.type;if(o&8)Gs(i,t,e.child,n);else if(o&32){let a=pu(e,t),l;for(;l=a();)n.push(l)}else if(o&16){let a=dp(t,e);if(Array.isArray(a))n.push(...a);else{let l=bn(t[ft]);Gs(l[L],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}function EC(i,t){for(let e=Be;e<i.length;e++){let n=i[e],r=n[L].firstChild;r!==null&&Gs(n[L],n,r,t)}i[gn]!==i[_t]&&t.push(i[gn])}var Rp=[];function DC(i){return i[Ge]??MC(i)}function MC(i){let t=Rp.pop()??Object.create(_C);return t.lView=i,t}function SC(i){i.lView[Ge]!==i&&(i.lView=null,Rp.push(i))}var _C=F(y({},zi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{lo(i.lView)},consumerOnSignalRead(){this.lView[Ge]=this}});function xC(i){let t=i[Ge]??Object.create(TC);return t.lView=i,t}var TC=F(y({},zi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let t=bn(i.lView);for(;t&&!Ap(t[L]);)t=bn(t);t&&vf(t)},consumerOnSignalRead(){this.lView[Ge]=this}});function Ap(i){return i.type!==2}var IC=100;function kp(i,t=!0,e=0){let n=i[ht],r=n.rendererFactory,s=!1;s||r.begin?.();try{RC(i,e)}catch(o){throw t&&Ip(i,o),o}finally{s||(r.end?.(),n.inlineEffectRunner?.flush())}}function RC(i,t){let e=Mf();try{oh(!0),El(i,t);let n=0;for(;ao(i);){if(n===IC)throw new S(103,!1);n++,El(i,1)}}finally{oh(e)}}function AC(i,t,e,n){let r=t[T];if((r&256)===256)return;let s=!1,o=!1;!s&&t[ht].inlineEffectRunner?.flush(),eu(t);let a=!0,l=null,u=null;s||(Ap(i)?(u=DC(t),l=Gr(u)):cd()===null?(a=!1,u=xC(t),l=Gr(u)):t[Ge]&&(va(t[Ge]),t[Ge]=null));try{bf(t),Tv(i.bindingStartIndex),e!==null&&bp(i,t,e,2,n);let c=(r&3)===3;if(!s)if(c){let f=i.preOrderCheckHooks;f!==null&&Ss(t,f,null)}else{let f=i.preOrderHooks;f!==null&&_s(t,f,0,null),Ha(t,0)}if(o||kC(t),Np(t,0),i.contentQueries!==null&&_p(i,t),!s)if(c){let f=i.contentCheckHooks;f!==null&&Ss(t,f)}else{let f=i.contentHooks;f!==null&&_s(t,f,1),Ha(t,1)}Wy(i,t);let d=i.components;d!==null&&Fp(t,d,0);let h=i.viewQuery;if(h!==null&&wl(2,h,n),!s)if(c){let f=i.viewCheckHooks;f!==null&&Ss(t,f)}else{let f=i.viewHooks;f!==null&&_s(t,f,2),Ha(t,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),t[Va]){for(let f of t[Va])f();t[Va]=null}s||(t[T]&=-73)}catch(c){throw s||lo(t),c}finally{u!==null&&(ga(u,l),a&&SC(u)),tu()}}function Np(i,t){for(let e=Yf(i);e!==null;e=Qf(e))for(let n=Be;n<e.length;n++){let r=e[n];Op(r,t)}}function kC(i){for(let t=Yf(i);t!==null;t=Qf(t)){if(!(t[T]&Ps.HasTransplantedViews))continue;let e=t[oi];for(let n=0;n<e.length;n++){let r=e[n];vf(r)}}}function NC(i,t,e){let n=Qt(t,i);Op(n,e)}function Op(i,t){Xl(i)&&El(i,t)}function El(i,t){let n=i[L],r=i[T],s=i[Ge],o=!!(t===0&&r&16);if(o||=!!(r&64&&t===0),o||=!!(r&1024),o||=!!(s?.dirty&&ba(s)),o||=!1,s&&(s.dirty=!1),i[T]&=-9217,o)AC(n,i,n.template,i[it]);else if(r&8192){Np(i,1);let a=n.components;a!==null&&Fp(i,a,1)}}function Fp(i,t,e){for(let n=0;n<t.length;n++)NC(i,t[n],e)}function Eu(i,t){let e=Mf()?64:1088;for(i[ht].changeDetectionScheduler?.notify(t);i;){i[T]|=e;let n=bn(i);if(il(i)&&!n)return i;i=n}return null}var En=class{get rootNodes(){let t=this._lView,e=t[L];return Gs(e,t,e.firstChild,[])}constructor(t,e,n=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[it]}set context(t){this._lView[it]=t}get destroyed(){return(this._lView[T]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Re];if(xt(t)){let e=t[Ls],n=e?e.indexOf(this):-1;n>-1&&(vl(t,n),ks(e,n))}this._attachedToViewContainer=!1}lp(this._lView[L],this._lView)}onDestroy(t){yf(this._lView,t)}markForCheck(){Eu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[T]&=-129}reattach(){sl(this._lView),this._lView[T]|=128}detectChanges(){this._lView[T]|=1024,kp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=il(this._lView),e=this._lView[mn];e!==null&&!t&&mu(e,this._lView),op(this._lView[L],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t;let e=il(this._lView),n=this._lView[mn];n!==null&&!e&&ap(n,this._lView),sl(this._lView)}},Dn=(()=>{class i{static{this.__NG_ELEMENT_ID__=LC}}return i})(),OC=Dn,FC=class extends OC{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,n){let r=CC(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:n});return new En(r)}};function LC(){return Du(Ae(),Y())}function Du(i,t){return i.type&4?new FC(t,i,pi(i,t)):null}var bk=new RegExp(`^(\\d+)*(${gy}|${my})*(.*)`);var PC=()=>null;function Eh(i,t){return PC(i,t)}var ai=class{},bo=new I("",{providedIn:"root",factory:()=>!1});var Lp=new I(""),Pp=new I(""),Dl=class{},qs=class{};function VC(i){let t=Error(`No component factory found for ${Fe(i)}.`);return t[HC]=i,t}var HC="ngComponent";var Ml=class{resolveComponentFactory(t){throw VC(t)}},li=class{static{this.NULL=new Ml}},ui=class{},mt=(()=>{class i{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>jC()}}return i})();function jC(){let i=Y(),t=Ae(),e=Qt(t.index,i);return(zt(e)?e:i)[fe]}var BC=(()=>{class i{static{this.\u0275prov=_({token:i,providedIn:"root",factory:()=>null})}}return i})();function Sl(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)r=Zd(r,a);else if(s==2){let l=a,u=t[++o];n=Zd(n,l+": "+u+";")}}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}var Zs=class extends li{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=pn(t);return new Ji(e,this.ngModule)}};function Dh(i,t){let e=[];for(let n in i){if(!i.hasOwnProperty(n))continue;let r=i[n];if(r===void 0)continue;let s=Array.isArray(r),o=s?r[0]:r,a=s?r[1]:Ut.None;t?e.push({propName:o,templateName:n,isSignal:(a&Ut.SignalBased)!==0}):e.push({propName:o,templateName:n})}return e}function zC(i){let t=i.toLowerCase();return t==="svg"?fv:t==="math"?pv:null}var Ji=class extends qs{get inputs(){let t=this.componentDef,e=t.inputTransforms,n=Dh(t.inputs,!0);if(e!==null)for(let r of n)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return n}get outputs(){return Dh(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=Gb(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let s=Z(null);try{r=r||this.ngModule;let o=r instanceof qe?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new al(t,o):t,l=a.get(ui,null);if(l===null)throw new S(407,!1);let u=a.get(BC,null),c=a.get(ai,null),d={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:c},h=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=n?Zy(h,n,this.componentDef.encapsulation,a):sp(h,f,zC(f)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let b=null;p!==null&&(b=hu(p,a,!0));let g=vu(0,null,null,1,0,null,null,null,null,null,null),v=po(null,g,null,m,null,null,d,h,a,null,b);eu(v);let M,H,B=null;try{let Q=this.componentDef,Pe,pe=null;Q.findHostDirectiveDefs?(Pe=[],pe=new Map,Q.findHostDirectiveDefs(Q,Pe,pe),Pe.push(Q)):Pe=[Q];let ji=UC(v,p);B=$C(ji,p,Q,Pe,v,d,h),H=gf(g,$t),p&&qC(h,Q,p,n),e!==void 0&&ZC(H,this.ngContentSelectors,e),M=GC(B,Q,Pe,pe,v,[YC]),wu(g,v,null)}catch(Q){throw B!==null&&gl(B),gl(v),Q}finally{tu()}return new _l(this.componentType,M,pi(H,v),v,H)}finally{Z(s)}}},_l=class extends Dl{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new En(r,void 0,!1),this.componentType=t}setInput(t,e){let n=this._tNode.inputs,r;if(n!==null&&(r=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let s=this._rootLView;Cu(s[L],s,r,t,e),this.previousInputValues.set(t,e);let o=Qt(this._tNode.index,s);Eu(o,1)}}get injector(){return new fn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function UC(i,t){let e=i[L],n=$t;return i[n]=t,mo(e,n,2,"#host",null)}function $C(i,t,e,n,r,s,o){let a=r[L];WC(n,i,t,o);let l=null;t!==null&&(l=hu(t,r[si]));let u=s.rendererFactory.createRenderer(t,e),c=16;e.signals?c=4096:e.onPush&&(c=64);let d=po(r,wp(e),null,c,r[i.index],i,s,u,null,null,l);return a.firstCreatePass&&Cl(a,i,n.length-1),go(r,d),r[i.index]=d}function WC(i,t,e,n){for(let r of i)t.mergedAttrs=Qi(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(Sl(t,t.mergedAttrs,!0),e!==null&&fp(n,e,t))}function GC(i,t,e,n,r,s){let o=Ae(),a=r[L],l=Ze(o,r);Dp(a,r,o,e,null,n);for(let c=0;c<e.length;c++){let d=o.directiveStart+c,h=Cn(r,a,d,o);wn(h,r)}Mp(a,r,o),l&&wn(l,r);let u=Cn(r,a,o.directiveStart+o.componentOffset,o);if(i[it]=r[it]=u,s!==null)for(let c of s)c(u,t);return vp(a,o,r),u}function qC(i,t,e,n){if(n)Ja(i,e,["ng-version","18.2.11"]);else{let{attrs:r,classes:s}=qb(t.selectors[0]);r&&Ja(i,e,r),s&&s.length>0&&hp(i,e,s.join(" "))}}function ZC(i,t,e){let n=i.projection=[];for(let r=0;r<t.length;r++){let s=e[r];n.push(s!=null?Array.from(s):null)}}function YC(){let i=Ae();ru(Y()[L],i)}var Jt=(()=>{class i{static{this.__NG_ELEMENT_ID__=QC}}return i})();function QC(){let i=Ae();return Hp(i,Y())}var KC=Jt,Vp=class extends KC{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return pi(this._hostTNode,this._hostLView)}get injector(){return new fn(this._hostTNode,this._hostLView)}get parentInjector(){let t=su(this._hostTNode,this._hostLView);if(Nf(t)){let e=js(t,this._hostLView),n=Hs(t),r=e[L].data[n+8];return new fn(r,e)}else return new fn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Mh(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Be}createEmbeddedView(t,e,n){let r,s;typeof n=="number"?r=n:n!=null&&(r=n.index,s=n.injector);let o=Eh(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,r,wh(this._hostTNode,o)),a}createComponent(t,e,n,r,s){let o=t&&!uv(t),a;if(o)a=e;else{let p=e||{};a=p.index,n=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?t:new Ji(pn(t)),u=n||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?u:this.parentInjector).get(qe,null);m&&(s=m)}let c=pn(l.componentType??{}),d=Eh(this._lContainer,c?.id??null),h=d?.firstChild??null,f=l.create(u,r,h,s);return this.insertImpl(f.hostView,a,wh(this._hostTNode,d)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,n){let r=t._lView;if(gv(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[Re],u=new Vp(l,l[rt],l[Re]);u.detach(u.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return wC(o,r,s,n),t.attachToViewContainerRef(),Wh($a(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Mh(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),n=vl(this._lContainer,e);n&&(ks($a(this._lContainer),e),lp(n[L],n))}detach(t){let e=this._adjustIndex(t,-1),n=vl(this._lContainer,e);return n&&ks($a(this._lContainer),e)!=null?new En(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function Mh(i){return i[Ls]}function $a(i){return i[Ls]||(i[Ls]=[])}function Hp(i,t){let e,n=t[i.index];return xt(n)?e=n:(e=Sp(n,t,null,i),t[i.index]=e,go(t,e)),JC(e,t,i,n),new Vp(e,i,t)}function XC(i,t){let e=i[fe],n=e.createComment(""),r=Ze(t,i),s=cp(e,r);return Ws(e,s,n,Ly(e,r),!1),n}var JC=nw,ew=()=>!1;function tw(i,t,e){return ew(i,t,e)}function nw(i,t,e,n){if(i[gn])return;let r;e.type&8?r=pt(n):r=XC(t,e),i[gn]=r}var xl=class i{constructor(t){this.queryList=t,this.matches=null}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},Tl=class i{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let n=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){let o=e.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new i(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Mu(t,e).matches!==null&&this.queries[e].setDirty()}},Ys=class{constructor(t,e,n=null){this.flags=e,this.read=n,typeof t=="string"?this.predicate=cw(t):this.predicate=t}},Il=class i{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){let r=e!==null?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,e!==null?e.push(s):e=[s])}return e!==null?new i(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Rl=class i{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new i(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,n=t.parent;for(;n!==null&&n.type&8&&n.index!==e;)n=n.parent;return e===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){let s=n[r];this.matchTNodeWithReadOption(t,e,iw(e,s)),this.matchTNodeWithReadOption(t,e,xs(e,t,s,!1,!1))}else n===Dn?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,xs(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(n!==null){let r=this.metadata.read;if(r!==null)if(r===ke||r===Jt||r===Dn&&e.type&4)this.addMatch(e.index,-2);else{let s=xs(e,t,r,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function iw(i,t){let e=i.localNames;if(e!==null){for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1]}return null}function rw(i,t){return i.type&11?pi(i,t):i.type&4?Du(i,t):null}function sw(i,t,e,n){return e===-1?rw(t,i):e===-2?ow(i,t,n):Cn(i,i[L],e,t)}function ow(i,t,e){if(e===ke)return pi(t,i);if(e===Dn)return Du(t,i);if(e===Jt)return Hp(t,i)}function jp(i,t,e,n){let r=t[Et].queries[n];if(r.matches===null){let s=i.data,o=e.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let u=o[l];if(u<0)a.push(null);else{let c=s[u];a.push(sw(t,c,o[l+1],e.metadata.read))}}r.matches=a}return r.matches}function Al(i,t,e,n){let r=i.queries.getByIndex(e),s=r.matches;if(s!==null){let o=jp(i,t,r,e);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)n.push(o[a/2]);else{let u=s[a+1],c=t[-l];for(let d=Be;d<c.length;d++){let h=c[d];h[mn]===h[Re]&&Al(h[L],h,u,n)}if(c[oi]!==null){let d=c[oi];for(let h=0;h<d.length;h++){let f=d[h];Al(f[L],f,u,n)}}}}}return n}function aw(i,t){return i[Et].queries[t].queryList}function Bp(i,t,e){let n=new ml((e&4)===4);return Ky(i,t,n,n.destroy),(t[Et]??=new Tl).queries.push(new xl(n))-1}function lw(i,t,e){let n=_e();return n.firstCreatePass&&(zp(n,new Ys(i,t,e),-1),(t&2)===2&&(n.staticViewQueries=!0)),Bp(n,Y(),t)}function uw(i,t,e,n){let r=_e();if(r.firstCreatePass){let s=Ae();zp(r,new Ys(t,e,n),s.index),dw(r,i),(e&2)===2&&(r.staticContentQueries=!0)}return Bp(r,Y(),e)}function cw(i){return i.split(",").map(t=>t.trim())}function zp(i,t,e){i.queries===null&&(i.queries=new Il),i.queries.track(new Rl(t,e))}function dw(i,t){let e=i.contentQueries||(i.contentQueries=[]),n=e.length?e[e.length-1]:-1;t!==n&&e.push(i.queries.length-1,t)}function Mu(i,t){return i.queries.getByIndex(t)}function hw(i,t){let e=i[L],n=Mu(e,t);return n.crossesNgTemplate?Al(e,i,t,[]):jp(e,i,n,t)}var Sh=new Set;function or(i){Sh.has(i)||(Sh.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function fw(i){return typeof i=="function"&&i[yt]!==void 0}function vo(i,t){or("NgSignals");let e=wd(i),n=e[yt];return t?.equal&&(n.equal=t.equal),e.set=r=>ya(n,r),e.update=r=>Ed(n,r),e.asReadonly=pw.bind(e),e}function pw(){let i=this[yt];if(i.readonlyFn===void 0){let t=()=>this();t[yt]=i,i.readonlyFn=t}return i.readonlyFn}function Up(i){return fw(i)&&typeof i.set=="function"}function mw(i){return Object.getPrototypeOf(i.prototype).constructor}function Tt(i){let t=mw(i.type),e=!0,n=[i];for(;t;){let r;if(Wt(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new S(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);let o=i;o.inputs=ws(i.inputs),o.inputTransforms=ws(i.inputTransforms),o.declaredInputs=ws(i.declaredInputs),o.outputs=ws(i.outputs);let a=r.hostBindings;a&&Cw(i,a);let l=r.viewQuery,u=r.contentQueries;if(l&&vw(i,l),u&&yw(i,u),gw(i,r),hb(i.outputs,r.outputs),Wt(r)&&r.data.animation){let c=i.data;c.animation=(c.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(i),a===Tt&&(e=!1)}}t=Object.getPrototypeOf(t)}bw(n)}function gw(i,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||i.inputs.hasOwnProperty(e))continue;let n=t.inputs[e];if(n!==void 0&&(i.inputs[e]=n,i.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(n)?n[0]:n;if(!t.inputTransforms.hasOwnProperty(r))continue;i.inputTransforms??={},i.inputTransforms[r]=t.inputTransforms[r]}}}function bw(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){let r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Qi(r.hostAttrs,e=Qi(e,r.hostAttrs))}}function ws(i){return i===ni?{}:i===We?[]:i}function vw(i,t){let e=i.viewQuery;e?i.viewQuery=(n,r)=>{t(n,r),e(n,r)}:i.viewQuery=t}function yw(i,t){let e=i.contentQueries;e?i.contentQueries=(n,r,s)=>{t(n,r,s),e(n,r,s)}:i.contentQueries=t}function Cw(i,t){let e=i.hostBindings;e?i.hostBindings=(n,r)=>{t(n,r),e(n,r)}:i.hostBindings=t}function Su(i){let t=i.inputConfig,e={};for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];Array.isArray(r)&&r[3]&&(e[n]=r[3])}i.inputTransforms=e}var qt=class{},er=class{};var kl=class extends qt{constructor(t,e,n,r=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zs(this);let s=ef(t);this._bootstrapComponents=rp(s.bootstrap),this._r3Injector=zf(t,e,[{provide:qt,useValue:this},{provide:li,useValue:this.componentFactoryResolver},...n],Fe(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Nl=class extends er{constructor(t){super(),this.moduleType=t}create(t){return new kl(this.moduleType,t,[])}};var Qs=class extends qt{constructor(t){super(),this.componentFactoryResolver=new Zs(this),this.instance=null;let e=new Ki([...t.providers,{provide:qt,useValue:this},{provide:li,useValue:this.componentFactoryResolver}],t.parent||Ql(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function _u(i,t,e=null){return new Qs({providers:i,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}function $p(i){return Ew(i)?Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i:!1}function ww(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{let e=i[Symbol.iterator](),n;for(;!(n=e.next()).done;)t(n.value)}}function Ew(i){return i!==null&&(typeof i=="function"||typeof i=="object")}function Dw(i,t,e){return i[t]=e}function Mw(i,t){return i[t]}function ar(i,t,e){let n=i[t];return Object.is(n,e)?!1:(i[t]=e,!0)}function Sw(i){return(i.flags&32)===32}function _w(i,t,e,n,r,s,o,a,l){let u=t.consts,c=mo(t,i,4,o||null,a||null);Ep(t,e,c,Vs(u,l)),ru(t,c);let d=c.tView=vu(2,c,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}function xw(i,t,e,n,r,s,o,a,l,u){let c=e+$t,d=t.firstCreatePass?_w(c,t,i,n,r,s,o,a,l):t.data[c];rr(d,!1);let h=Tw(t,i,d,e);nu()&&gu(t,i,h,d),wn(h,i);let f=Sp(h,i,h,d);return i[c]=f,go(i,f),tw(f,d,i),Kl(d)&&yp(t,i,d),l!=null&&Cp(i,d,u),d}function Ce(i,t,e,n,r,s,o,a){let l=Y(),u=_e(),c=Vs(u.consts,s);return xw(l,u,i,t,e,n,r,c,o,a),Ce}var Tw=Iw;function Iw(i,t,e,n){return iu(!0),t[fe].createComment("")}var qi=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(qi||{}),Rw=(()=>{class i{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=_({token:i,providedIn:"root",factory:()=>new i})}}return i})(),_h=class i{constructor(){this.ngZone=E(he),this.scheduler=E(ai),this.errorHandler=E(Dt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[qi.EarlyRead,qi.Write,qi.MixedReadWrite,qi.Read]}execute(){this.executing=!0;for(let t of i.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[t]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(n){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(n)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=_({token:i,providedIn:"root",factory:()=>new i})}};function en(i,t,e,n){let r=Y(),s=uo();if(ar(r,s,t)){let o=_e(),a=co();hC(a,r,i,t,e,n)}return en}function Wp(i,t,e,n){return ar(i,uo(),e)?t+to(e)+n:Xt}function Es(i,t){return i<<17|t<<2}function Mn(i){return i>>17&32767}function Aw(i){return(i&2)==2}function kw(i,t){return i&131071|t<<17}function Ol(i){return i|2}function ci(i){return(i&131068)>>2}function Wa(i,t){return i&-131069|t<<2}function Nw(i){return(i&1)===1}function Fl(i){return i|1}function Ow(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=Mn(o),l=ci(o);i[n]=e;let u=!1,c;if(Array.isArray(e)){let d=e;c=d[1],(c===null||ir(d,c)>0)&&(u=!0)}else c=e;if(r)if(l!==0){let h=Mn(i[a+1]);i[n+1]=Es(h,a),h!==0&&(i[h+1]=Wa(i[h+1],n)),i[a+1]=kw(i[a+1],n)}else i[n+1]=Es(a,0),a!==0&&(i[a+1]=Wa(i[a+1],n)),a=n;else i[n+1]=Es(l,0),a===0?a=n:i[l+1]=Wa(i[l+1],n),l=n;u&&(i[n+1]=Ol(i[n+1])),xh(i,c,n,!0),xh(i,c,n,!1),Fw(t,c,i,n,s),o=Es(a,l),s?t.classBindings=o:t.styleBindings=o}function Fw(i,t,e,n,r){let s=r?i.residualClasses:i.residualStyles;s!=null&&typeof t=="string"&&ir(s,t)>=0&&(e[n+1]=Fl(e[n+1]))}function xh(i,t,e,n){let r=i[e+1],s=t===null,o=n?Mn(r):ci(r),a=!1;for(;o!==0&&(a===!1||s);){let l=i[o],u=i[o+1];Lw(l,t)&&(a=!0,i[o+1]=n?Fl(u):Ol(u)),o=n?Mn(u):ci(u)}a&&(i[e+1]=n?Ol(r):Fl(r))}function Lw(i,t){return i===null||t==null||(Array.isArray(i)?i[1]:i)===t?!0:Array.isArray(i)&&typeof t=="string"?ir(i,t)>=0:!1}function G(i,t,e){let n=Y(),r=uo();if(ar(n,r,t)){let s=_e(),o=co();yu(s,o,n,i,t,n[fe],e,!1)}return G}function Th(i,t,e,n,r){let s=t.inputs,o=r?"class":"style";Cu(i,e,s[o],o,n)}function lr(i,t){return Pw(i,t,null,!0),lr}function Pw(i,t,e,n){let r=Y(),s=_e(),o=Iv(2);if(s.firstUpdatePass&&Hw(s,i,o,n),t!==Xt&&ar(r,o,t)){let a=s.data[hi()];$w(s,a,r,r[fe],i,r[o+1]=Ww(t,e),n,o)}}function Vw(i,t){return t>=i.expandoStartIndex}function Hw(i,t,e,n){let r=i.data;if(r[e+1]===null){let s=r[hi()],o=Vw(i,e);Gw(s,n)&&t===null&&!o&&(t=!1),t=jw(r,s,t,n),Ow(r,s,t,e,o,n)}}function jw(i,t,e,n){let r=Nv(i),s=n?t.residualClasses:t.residualStyles;if(r===null)(n?t.classBindings:t.styleBindings)===0&&(e=Ga(null,i,t,e,n),e=tr(e,t.attrs,n),s=null);else{let o=t.directiveStylingLast;if(o===-1||i[o]!==r)if(e=Ga(r,i,t,e,n),s===null){let l=Bw(i,t,n);l!==void 0&&Array.isArray(l)&&(l=Ga(null,i,t,l[1],n),l=tr(l,t.attrs,n),zw(i,t,n,l))}else s=Uw(i,t,n)}return s!==void 0&&(n?t.residualClasses=s:t.residualStyles=s),e}function Bw(i,t,e){let n=e?t.classBindings:t.styleBindings;if(ci(n)!==0)return i[Mn(n)]}function zw(i,t,e,n){let r=e?t.classBindings:t.styleBindings;i[Mn(r)]=n}function Uw(i,t,e){let n,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let o=i[s].hostAttrs;n=tr(n,o,e)}return tr(n,t.attrs,e)}function Ga(i,t,e,n,r){let s=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(s=t[a],n=tr(n,s.hostAttrs,r),s!==i);)a++;return i!==null&&(e.directiveStylingLast=a),n}function tr(i,t,e){let n=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?r=o:r===n&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),Ob(i,o,e?!0:t[++s]))}return i===void 0?null:i}function $w(i,t,e,n,r,s,o,a){if(!(t.type&3))return;let l=i.data,u=l[a+1],c=Nw(u)?Ih(l,t,e,r,ci(u),o):void 0;if(!Ks(c)){Ks(s)||Aw(u)&&(s=Ih(l,null,e,r,a,o));let d=mf(hi(),e);Uy(n,o,d,r,s)}}function Ih(i,t,e,n,r,s){let o=t===null,a;for(;r>0;){let l=i[r],u=Array.isArray(l),c=u?l[1]:l,d=c===null,h=e[r+1];h===Xt&&(h=d?We:void 0);let f=d?La(h,n):c===n?h:void 0;if(u&&!Ks(f)&&(f=La(l,n)),Ks(f)&&(a=f,o))return a;let p=i[r+1];r=o?Mn(p):ci(p)}if(t!==null){let l=s?t.residualClasses:t.residualStyles;l!=null&&(a=La(l,n))}return a}function Ks(i){return i!==void 0}function Ww(i,t){return i==null||i===""||(typeof t=="string"?i=i+t:typeof i=="object"&&(i=Fe(sr(i)))),i}function Gw(i,t){return(i.flags&(t?8:16))!==0}function qw(i,t,e,n,r,s){let o=t.consts,a=Vs(o,r),l=mo(t,i,2,n,a);return Ep(t,e,l,Vs(o,s)),l.attrs!==null&&Sl(l,l.attrs,!1),l.mergedAttrs!==null&&Sl(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function w(i,t,e,n){let r=Y(),s=_e(),o=$t+i,a=r[fe],l=s.firstCreatePass?qw(o,s,r,t,e,n):s.data[o],u=Zw(s,r,l,a,t,i);r[o]=u;let c=Kl(l);return rr(l,!0),fp(a,u,l),!Sw(l)&&nu()&&gu(s,r,u,l),yv()===0&&wn(u,r),Cv(),c&&(yp(s,r,l),vp(s,l,r)),n!==null&&Cp(r,l),w}function C(){let i=Ae();Df()?_v():(i=i.parent,rr(i,!1));let t=i;Dv(t)&&Mv(),wv();let e=_e();return e.firstCreatePass&&(ru(e,i),cf(i)&&e.queries.elementEnd(i)),t.classesWithoutHost!=null&&jv(t)&&Th(e,t,Y(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Bv(t)&&Th(e,t,Y(),t.stylesWithoutHost,!1),C}function P(i,t,e,n){return w(i,t,e,n),C(),P}var Zw=(i,t,e,n,r,s)=>(iu(!0),sp(n,r,Lv()));function Ye(){return Y()}var Xs="en-US";var Yw=Xs;function Qw(i){typeof i=="string"&&(Yw=i.toLowerCase().replace(/_/g,"-"))}var Kw=(i,t,e)=>{};function V(i,t,e,n){let r=Y(),s=_e(),o=Ae();return Gp(s,r,r[fe],o,i,t,n),V}function Xw(i,t,e,n){let r=i.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===e&&r[s+1]===n){let a=t[Fs],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function Gp(i,t,e,n,r,s,o){let a=Kl(n),u=i.firstCreatePass&&Tp(i),c=t[it],d=xp(t),h=!0;if(n.type&3||o){let m=Ze(n,t),b=o?o(m):m,g=d.length,v=o?H=>o(pt(H[n.index])):n.index,M=null;if(!o&&a&&(M=Xw(i,t,r,n.index)),M!==null){let H=M.__ngLastListenerFn__||M;H.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,h=!1}else{s=Ah(n,t,c,s),Kw(m,r,s);let H=e.listen(b,r,s);d.push(s,H),u&&u.push(r,v,g,g+1)}}else s=Ah(n,t,c,s);let f=n.outputs,p;if(h&&f!==null&&(p=f[r])){let m=p.length;if(m)for(let b=0;b<m;b+=2){let g=p[b],v=p[b+1],B=t[g][v].subscribe(s),Q=d.length;d.push(s,B),u&&u.push(r,n.index,Q,-(Q+1))}}}function Rh(i,t,e,n){let r=Z(null);try{return ut(6,t,e),e(n)!==!1}catch(s){return Ip(i,s),!1}finally{ut(7,t,e),Z(r)}}function Ah(i,t,e,n){return function r(s){if(s===Function)return n;let o=i.componentOffset>-1?Qt(i.index,t):t;Eu(o,5);let a=Rh(t,e,n,s),l=r.__ngNextListenerFn__;for(;l;)a=Rh(t,e,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function ee(i=1){return Fv(i)}function ur(i,t,e,n,r){let s=Y(),o=Wp(s,t,e,n);if(o!==Xt){let a=_e(),l=co();yu(a,l,s,i,o,s[fe],r,!1)}return ur}function qp(i,t,e,n){uw(i,t,e,n)}function tn(i,t,e){lw(i,t,e)}function gt(i){let t=Y(),e=_e(),n=Sf();Jl(n+1);let r=Mu(e,n);if(i.dirty&&mv(t)===((r.metadata.flags&2)===2)){if(r.matches===null)i.reset([]);else{let s=hw(t,n);i.reset(s,ly),i.notifyOnChanges()}return!0}return!1}function bt(){return aw(Y(),Sf())}function k(i,t=""){let e=Y(),n=_e(),r=i+$t,s=n.firstCreatePass?mo(n,r,1,t,null):n.data[r],o=Jw(n,e,s,t,i);e[r]=o,nu()&&gu(n,e,o,s),rr(s,!1)}var Jw=(i,t,e,n,r)=>(iu(!0),_y(t[fe],n));function Le(i,t,e){let n=Y(),r=Wp(n,i,t,e);return r!==Xt&&gC(n,hi(),r),Le}function we(i,t,e){Up(t)&&(t=t());let n=Y(),r=uo();if(ar(n,r,t)){let s=_e(),o=co();yu(s,o,n,i,t,n[fe],e,!1)}return we}function xe(i,t){let e=Up(i);return e&&i.set(t),e}function Ee(i,t){let e=Y(),n=_e(),r=Ae();return Gp(n,e,e[fe],r,i,t),Ee}function eE(i,t,e){let n=_e();if(n.firstCreatePass){let r=Wt(i);Ll(e,n.data,n.blueprint,r,!0),Ll(t,n.data,n.blueprint,r,!1)}}function Ll(i,t,e,n,r){if(i=Oe(i),Array.isArray(i))for(let s=0;s<i.length;s++)Ll(i[s],t,e,n,r);else{let s=_e(),o=Y(),a=Ae(),l=ri(i)?i:Oe(i.provide),u=af(i),c=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ri(i)||!i.multi){let f=new yn(u,r,D),p=Za(l,t,r?c:c+h,d);p===-1?(ul(Bs(a,o),s,l),qa(s,i,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{let f=Za(l,t,c+h,d),p=Za(l,t,c,c+h),m=f>=0&&e[f],b=p>=0&&e[p];if(r&&!b||!r&&!m){ul(Bs(a,o),s,l);let g=iE(r?nE:tE,e.length,r,n,u);!r&&b&&(e[p].providerFactory=g),qa(s,i,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(g),o.push(g)}else{let g=Zp(e[r?p:f],u,!r&&n);qa(s,i,f>-1?f:p,g)}!r&&n&&b&&e[p].componentProviders++}}}function qa(i,t,e,n){let r=ri(t),s=tv(t);if(r||s){let l=(s?Oe(t.useClass):t).prototype.ngOnDestroy;if(l){let u=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){let c=u.indexOf(e);c===-1?u.push(e,[n,l]):u[c+1].push(n,l)}else u.push(e,l)}}}function Zp(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function Za(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function tE(i,t,e,n){return Pl(this.multi,[])}function nE(i,t,e,n){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Cn(e,e[L],this.providerFactory.index,n);s=a.slice(0,o),Pl(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Pl(r,s);return s}function Pl(i,t){for(let e=0;e<i.length;e++){let n=i[e];t.push(n())}return t}function iE(i,t,e,n,r){let s=new yn(i,e,D);return s.multi=[],s.index=t,s.componentProviders=0,Zp(s,r,n&&!e),s}function gi(i,t=[]){return e=>{e.providersResolver=(n,r)=>eE(n,r?r(i):i,t)}}var rE=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let n=rf(!1,e.type),r=n.length>0?_u([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=_({token:i,providedIn:"environment",factory:()=>new i($(qe))})}}return i})();function re(i){or("NgStandalone"),i.getStandaloneInjector=t=>t.get(rE).getOrCreateStandaloneInjector(i)}function It(i,t,e){let n=xv()+i,r=Y();return r[n]===Xt?Dw(r,n,e?t.call(e):t()):Mw(r,n)}var yo=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();var Yp=new I("");function xn(i){return!!i&&typeof i.then=="function"}function Qp(i){return!!i&&typeof i.subscribe=="function"}var Kp=new I(""),Xp=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n}),this.appInits=E(Kp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=r();if(xn(s))e.push(s);else if(Qp(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),e.length===0&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),xu=new I("");function sE(){Cd(()=>{throw new S(600,!1)})}function oE(i){return i.isBoundToModule}var aE=10;function lE(i,t,e){try{let n=e();return xn(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}var Tn=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(oy),this.afterRenderManager=E(Rw),this.zonelessEnabled=E(bo),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ve,this.afterTick=new ve,this.componentTypes=[],this.components=[],this.isStable=E(fi).hasPendingTasks.pipe(U(e=>!e)),this._injector=E(qe)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(n=>{e=this.isStable.subscribe({next:r=>{r&&n()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,n){let r=e instanceof qs;if(!this._injector.get(Xp).done){let h=!r&&Jh(e),f=!1;throw new S(405,f)}let o;r?o=e:o=this._injector.get(li).resolveComponentFactory(e),this.componentTypes.push(o.componentType);let a=oE(o)?void 0:this._injector.get(qt),l=n||o.selector,u=o.create(Gt.NULL,[],l,a),c=u.location.nativeElement,d=u.injector.get(Yp,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),Ts(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new S(101,!1);let e=Z(null);try{this._runningTick=!0,this.synchronize()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1,Z(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(ui,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<aE;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(n);for(let{_lView:r,notifyErrorHandler:s}of this._views)uE(r,s,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>ao(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){let n=e;Ts(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let n=this._injector.get(xu,[]);[...this._bootstrapListeners,...n].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ts(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new S(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Ts(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function uE(i,t,e,n){if(!e&&!ao(i))return;kp(i,t,e&&!n?0:1)}var Vl=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Tu=(()=>{class i{compileModuleSync(e){return new Nl(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let n=this.compileModuleSync(e),r=ef(e),s=rp(r.declarations).reduce((o,a)=>{let l=pn(a);return l&&o.push(new Ji(l)),o},[]);return new Vl(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var cE=(()=>{class i{constructor(){this.zone=E(he),this.changeDetectionScheduler=E(ai),this.applicationRef=E(Tn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dE=new I("",{factory:()=>!1});function Jp({ngZoneFactory:i,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return i??=()=>new he(F(y({},tm()),{scheduleInRootZone:e})),[{provide:he,useFactory:i},{provide:ii,multi:!0,useFactory:()=>{let n=E(cE,{optional:!0});return()=>n.initialize()}},{provide:ii,multi:!0,useFactory:()=>{let n=E(hE);return()=>{n.initialize()}}},t===!0?{provide:Lp,useValue:!0}:[],{provide:Pp,useValue:e??Uf}]}function em(i){let t=i?.ignoreChangesOutsideZone,e=i?.scheduleInRootZone,n=Jp({ngZoneFactory:()=>{let r=tm(i);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&or("NgZone_CoalesceEvent"),new he(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return io([{provide:dE,useValue:!0},{provide:bo,useValue:!1},n])}function tm(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var hE=(()=>{class i{constructor(){this.subscription=new ce,this.initialized=!1,this.zone=E(he),this.pendingTasks=E(fi)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var fE=(()=>{class i{constructor(){this.appRef=E(Tn),this.taskService=E(fi),this.ngZone=E(he),this.zonelessEnabled=E(bo),this.disableScheduling=E(Lp,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ce,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Us):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(Pp,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof pl||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let n=this.useMicrotaskScheduler?hh:Wf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>n(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>n(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Us+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){throw this.taskService.remove(e),n}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function pE(){return typeof $localize<"u"&&$localize.locale||Xs}var Iu=new I("",{providedIn:"root",factory:()=>E(Iu,j.Optional|j.SkipSelf)||pE()});var Hl=new I("");function Ds(i){return!i.moduleRef}function mE(i){let t=Ds(i)?i.r3Injector:i.moduleRef.injector,e=t.get(he);return e.run(()=>{Ds(i)?i.r3Injector.resolveInjectorInitializers():i.moduleRef.resolveInjectorInitializers();let n=t.get(Dt,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:s=>{n.handleError(s)}})}),Ds(i)){let s=()=>t.destroy(),o=i.platformInjector.get(Hl);o.add(s),t.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>i.moduleRef.destroy(),o=i.platformInjector.get(Hl);o.add(s),i.moduleRef.onDestroy(()=>{Ts(i.allPlatformModules,i.moduleRef),r.unsubscribe(),o.delete(s)})}return lE(n,e,()=>{let s=t.get(Xp);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(Iu,Xs);if(Qw(o||Xs),Ds(i)){let a=t.get(Tn);return i.rootComponent!==void 0&&a.bootstrap(i.rootComponent),a}else return gE(i.moduleRef,i.allPlatformModules),i.moduleRef})})})}function gE(i,t){let e=i.injector.get(Tn);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(n=>e.bootstrap(n));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(e);else throw new S(-403,!1);t.push(i)}var Is=null;function bE(i=[],t){return Gt.create({name:t,providers:[{provide:ro,useValue:"platform"},{provide:Hl,useValue:new Set([()=>Is=null])},...i]})}function vE(i=[]){if(Is)return Is;let t=bE(i);return Is=t,sE(),yE(t),t}function yE(i){i.get(cu,null)?.forEach(e=>e())}var nn=(()=>{class i{static{this.__NG_ELEMENT_ID__=CE}}return i})();function CE(i){return wE(Ae(),Y(),(i&16)===16)}function wE(i,t,e){if(oo(i)&&!e){let n=Qt(i.index,t);return new En(n,n)}else if(i.type&175){let n=t[ft];return new En(n,t)}return null}var jl=class{constructor(){}supports(t){return $p(t)}create(t){return new Bl(t)}},EE=(i,t)=>t,Bl=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||EE}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){let o=!n||e&&e.currentIndex<kh(n,r,s)?e:n,a=kh(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,o.previousIndex==null)r++;else{s||(s=[]);let u=a-r,c=l-r;if(u!=c){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;c<=p&&p<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=c-u}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!$p(t))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,n=!1,r,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),n=!0):(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,ww(t,a=>{o=this._trackByFn(r,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,r),n=!0):(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(n,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new zl(e,n),s,r)),t}_verifyReinsertion(t,e,n,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Js),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,n=t._next;return e===null?this._itHead=n:e._next=n,n===null?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Js),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},zl=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ul=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;n!==null;n=n._nextDup)if((e===null||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){let e=t._prevDup,n=t._nextDup;return e===null?this._head=n:e._nextDup=n,n===null?this._tail=e:n._prevDup=e,this._head===null}},Js=class{constructor(){this.map=new Map}put(t){let e=t.trackById,n=this.map.get(e);n||(n=new Ul,this.map.set(e,n)),n.add(t)}get(t,e){let n=t,r=this.map.get(n);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function kh(i,t,e){let n=i.previousIndex;if(n===null)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}function Nh(){return new Ru([new jl])}var Ru=(()=>{class i{static{this.\u0275prov=_({token:i,providedIn:"root",factory:Nh})}constructor(e){this.factories=e}static create(e,n){if(n!=null){let r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||Nh()),deps:[[i,new $h,new Gl]]}}find(e){let n=this.factories.find(r=>r.supports(e));if(n!=null)return n;throw new S(901,!1)}}return i})();function nm(i){try{let{rootComponent:t,appProviders:e,platformProviders:n}=i,r=vE(n),s=[Jp({}),{provide:ai,useExisting:fE},...e||[]],o=new Qs({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return mE({r3Injector:o.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}}function In(i){return typeof i=="boolean"?i:i!=null&&i!=="false"}function Co(i,t){or("NgSignals");let e=bd(i);return t?.equal&&(e[yt].equal=t.equal),e}function rn(i){let t=Z(null);try{return i()}finally{Z(t)}}var am=null;function Rt(){return am}function lm(i){am??=i}var wo=class{};var Qe=new I(""),um=(()=>{class i{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>E(DE),providedIn:"platform"})}}return i})();var DE=(()=>{class i extends um{constructor(){super(),this._doc=E(Qe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rt().getBaseHref(this._doc)}onPopState(e){let n=Rt().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){let n=Rt().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){this._history.pushState(e,n,r)}replaceState(e,n,r){this._history.replaceState(e,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>new i,providedIn:"platform"})}}return i})();function cm(i,t){if(i.length==0)return t;if(t.length==0)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?i+t.substring(1):e==1?i+t:i+"/"+t}function im(i){let t=i.match(/#|\?|$/),e=t&&t.index||i.length,n=e-(i[e-1]==="/"?1:0);return i.slice(0,n)+i.slice(e)}function Rn(i){return i&&i[0]!=="?"?"?"+i:i}var bi=(()=>{class i{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>E(dm),providedIn:"root"})}}return i})(),ME=new I(""),dm=(()=>{class i extends bi{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??E(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return cm(this._baseHref,e)}path(e=!1){let n=this._platformLocation.pathname+Rn(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Rn(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Rn(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||i)($(um),$(ME,8))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var cr=(()=>{class i{constructor(e){this._subject=new ue,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let n=this._locationStrategy.getBaseHref();this._basePath=xE(im(rm(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Rn(n))}normalize(e){return i.stripTrailingSlash(_E(this._basePath,rm(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rn(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rn(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}static{this.normalizeQueryParams=Rn}static{this.joinWithSlash=cm}static{this.stripTrailingSlash=im}static{this.\u0275fac=function(n){return new(n||i)($(bi))}}static{this.\u0275prov=_({token:i,factory:()=>SE(),providedIn:"root"})}}return i})();function SE(){return new cr($(bi))}function _E(i,t){if(!i||!t.startsWith(i))return t;let e=t.substring(i.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function rm(i){return i.replace(/\/index.html$/,"")}function xE(i){if(new RegExp("^(https?:)?//").test(i)){let[,e]=i.split(/\/\/[^\/]+/);return e}return i}function hm(i,t){t=encodeURIComponent(t);for(let e of i.split(";")){let n=e.indexOf("="),[r,s]=n==-1?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var Au=class{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},vi=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(r.previousIndex==null)n.createEmbeddedView(this._template,new Au(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)n.remove(s===null?void 0:s);else if(s!==null){let a=n.get(s);n.move(a,o),sm(a,r)}});for(let r=0,s=n.length;r<s;r++){let a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=n.get(r.currentIndex);sm(s,r)})}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||i)(D(Jt),D(Dn),D(Ru))}}static{this.\u0275dir=ye({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return i})();function sm(i,t){i.context.$implicit=t.item}var Do=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new ku,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){om("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){om("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||i)(D(Jt),D(Dn))}}static{this.\u0275dir=ye({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return i})(),ku=class{constructor(){this.$implicit=null,this.ngIf=null}};function om(i,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${i} must be a TemplateRef, but received '${Fe(t)}'.`)}var At=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=_n({type:i})}static{this.\u0275inj=Sn({})}}return i})(),fm="browser",TE="server";function Ou(i){return i===TE}var Eo=class{};var Pu=class extends wo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Vu=class i extends Pu{static makeCurrent(){lm(new i)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=IE();return e==null?null:RE(e)}resetBaseElement(){hr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return hm(document.cookie,t)}},hr=null;function IE(){return hr=hr||document.querySelector("base"),hr?hr.getAttribute("href"):null}function RE(i){return new URL(i,document.baseURI).pathname}var AE=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac})}}return i})(),Hu=new I(""),bm=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new S(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||i)($(Hu),$(he))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac})}}return i})(),Mo=class{constructor(t){this._doc=t}},Fu="ng-app-id",vm=(()=>{class i{constructor(e,n,r,s={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ou(s),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Fu}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){let r=this.styleRef;if(r.has(e)){let s=r.get(e);return s.usage+=n,s.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let r=this.styleNodesInDOM,s=r?.get(n);if(s?.parentNode===e)return r.delete(n),s.removeAttribute(Fu),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(Fu,this.appId),e.appendChild(o),o}}addStyleToHost(e,n){let r=this.getStyleElement(e,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(r):s.set(n,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)($(Qe),$(uu),$(du,8),$(mi))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac})}}return i})(),Lu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bu=/%COMP%/g,ym="%COMP%",kE=`_nghost-${ym}`,NE=`_ngcontent-${ym}`,OE=!0,FE=new I("",{providedIn:"root",factory:()=>OE});function LE(i){return NE.replace(Bu,i)}function PE(i){return kE.replace(Bu,i)}function Cm(i,t){return t.map(e=>e.replace(Bu,i))}var pm=(()=>{class i{constructor(e,n,r,s,o,a,l,u=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ou(a),this.defaultRenderer=new fr(e,o,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===dt.ShadowDom&&(n=F(y({},n),{encapsulation:dt.Emulated}));let r=this.getOrCreateRenderer(e,n);return r instanceof So?r.applyToHost(e):r instanceof pr&&r.applyStyles(),r}getOrCreateRenderer(e,n){let r=this.rendererByCompId,s=r.get(n.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(n.encapsulation){case dt.Emulated:s=new So(l,u,n,this.appId,c,o,a,d);break;case dt.ShadowDom:return new ju(l,u,e,n,o,a,this.nonce,d);default:s=new pr(l,u,n,c,o,a,d);break}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)($(bm),$(vm),$(uu),$(FE),$(Qe),$(mi),$(he),$(du))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac})}}return i})(),fr=class{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Lu[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(mm(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(mm(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new S(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let s=Lu[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=Lu[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Mt.DashCase|Mt.Important)?t.style.setProperty(e,n,r&Mt.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Mt.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=Rt().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function mm(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var ju=class extends fr{constructor(t,e,n,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Cm(r.id,r.styles);for(let c of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},pr=class extends fr{constructor(t,e,n,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?Cm(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},So=class extends pr{constructor(t,e,n,r,s,o,a,l){let u=r+"-"+n.id;super(t,e,n,s,o,a,l,u),this.contentAttr=LE(u),this.hostAttr=PE(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},VE=(()=>{class i extends Mo{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)($(Qe))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac})}}return i})(),gm=["alt","control","meta","shift"],HE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jE={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},BE=(()=>{class i extends Mo{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,n,r){let s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rt().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let n=e.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let s=i._normalizeKey(n.pop()),o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),gm.forEach(u=>{let c=n.indexOf(u);c>-1&&(n.splice(c,1),o+=u+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=HE[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),gm.forEach(o=>{if(o!==r){let a=jE[o];a(e)&&(s+=o+".")}}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||i)($(Qe))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac})}}return i})();function wm(i,t){return nm(y({rootComponent:i},zE(t)))}function zE(i){return{appProviders:[...qE,...i?.providers??[]],platformProviders:GE}}function UE(){Vu.makeCurrent()}function $E(){return new Dt}function WE(){return Xf(document),document}var GE=[{provide:mi,useValue:fm},{provide:cu,useValue:UE,multi:!0},{provide:Qe,useFactory:WE,deps:[]}];var qE=[{provide:ro,useValue:"root"},{provide:Dt,useFactory:$E,deps:[]},{provide:Hu,useClass:VE,multi:!0,deps:[Qe,he,mi]},{provide:Hu,useClass:BE,multi:!0,deps:[Qe]},pm,vm,bm,{provide:ui,useExisting:pm},{provide:Eo,useClass:AE,deps:[]},[]];var Em=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||i)($(Qe))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var O="primary",Rr=Symbol("RouteTitle"),Gu=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Mi(i){return new Gu(i)}function YE(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],a=i[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function QE(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!vt(i[e],t[e]))return!1;return!0}function vt(i,t){let e=i?qu(i):void 0,n=t?qu(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Rm(i[r],t[r]))return!1;return!0}function qu(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Rm(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}else return i===t}function Am(i){return i.length>0?i[i.length-1]:null}function sn(i){return Ia(i)?i:xn(i)?le(Promise.resolve(i)):R(i)}var KE={exact:Nm,subset:Om},km={exact:XE,subset:JE,ignored:()=>!0};function Dm(i,t,e){return KE[e.paths](i.root,t.root,e.matrixParams)&&km[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function XE(i,t){return vt(i,t)}function Nm(i,t,e){if(!kn(i.segments,t.segments)||!To(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!Nm(i.children[n],t.children[n],e))return!1;return!0}function JE(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Rm(i[e],t[e]))}function Om(i,t,e){return Fm(i,t,t.segments,e)}function Fm(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!kn(r,e)||t.hasChildren()||!To(r,e,n))}else if(i.segments.length===e.length){if(!kn(i.segments,e)||!To(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!Om(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!kn(i.segments,r)||!To(i.segments,r,n)||!i.children[O]?!1:Fm(i.children[O],t,s,n)}}function To(i,t,e){return t.every((n,r)=>km[e](i[r].parameters,n.parameters))}var Nt=class{constructor(t=new X([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Mi(this.queryParams),this._queryParamMap}toString(){return nD.serialize(this)}},X=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Io(this)}},An=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Mi(this.parameters),this._parameterMap}toString(){return Pm(this)}};function eD(i,t){return kn(i,t)&&i.every((e,n)=>vt(e.parameters,t[n].parameters))}function kn(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function tD(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===O&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==O&&(e=e.concat(t(r,n)))}),e}var yc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>new wr,providedIn:"root"})}}return i})(),wr=class{parse(t){let e=new Yu(t);return new Nt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${mr(t.root,!0)}`,n=sD(t.queryParams),r=typeof t.fragment=="string"?`#${iD(t.fragment)}`:"";return`${e}${n}${r}`}},nD=new wr;function Io(i){return i.segments.map(t=>Pm(t)).join("/")}function mr(i,t){if(!i.hasChildren())return Io(i);if(t){let e=i.children[O]?mr(i.children[O],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==O&&n.push(`${r}:${mr(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=tD(i,(n,r)=>r===O?[mr(i.children[O],!1)]:[`${r}:${mr(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[O]!=null?`${Io(i)}/${e[0]}`:`${Io(i)}/(${e.join("//")})`}}function Lm(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _o(i){return Lm(i).replace(/%3B/gi,";")}function iD(i){return encodeURI(i)}function Zu(i){return Lm(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ro(i){return decodeURIComponent(i)}function Mm(i){return Ro(i.replace(/\+/g,"%20"))}function Pm(i){return`${Zu(i.path)}${rD(i.parameters)}`}function rD(i){return Object.entries(i).map(([t,e])=>`;${Zu(t)}=${Zu(e)}`).join("")}function sD(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${_o(e)}=${_o(r)}`).join("&"):`${_o(e)}=${_o(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var oD=/^[^\/()?;#]+/;function zu(i){let t=i.match(oD);return t?t[0]:""}var aD=/^[^\/()?;=#]+/;function lD(i){let t=i.match(aD);return t?t[0]:""}var uD=/^[^=?&#]+/;function cD(i){let t=i.match(uD);return t?t[0]:""}var dD=/^[^&#]+/;function hD(i){let t=i.match(dD);return t?t[0]:""}var Yu=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[O]=new X(t,e)),n}parseSegment(){let t=zu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new An(Ro(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=lD(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=zu(this.remaining);r&&(n=r,this.capture(n))}t[Ro(e)]=Ro(n)}parseQueryParam(t){let e=cD(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=hD(this.remaining);o&&(n=o,this.capture(n))}let r=Mm(e),s=Mm(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=zu(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new S(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=O);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[O]:new X([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function Vm(i){return i.segments.length>0?new X([],{[O]:i}):i}function Hm(i){let t={};for(let[n,r]of Object.entries(i.children)){let s=Hm(r);if(n===O&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new X(i.segments,t);return fD(e)}function fD(i){if(i.numberOfChildren===1&&i.children[O]){let t=i.children[O];return new X(i.segments.concat(t.segments),t.children)}return i}function Nn(i){return i instanceof Nt}function pD(i,t,e=null,n=null){let r=jm(i);return Bm(r,t,e,n)}function jm(i){let t;function e(s){let o={};for(let l of s.children){let u=e(l);o[l.outlet]=u}let a=new X(s.url,o);return s===i&&(t=a),a}let n=e(i.root),r=Vm(n);return t??r}function Bm(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return Uu(r,r,r,e,n);let s=mD(t);if(s.toRoot())return Uu(r,r,new X([],{}),e,n);let o=gD(s,r,i),a=o.processChildren?vr(o.segmentGroup,o.index,s.commands):Um(o.segmentGroup,o.index,s.commands);return Uu(r,o.segmentGroup,a,e,n)}function Ao(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Er(i){return typeof i=="object"&&i!=null&&i.outlets}function Uu(i,t,e,n,r){let s={};n&&Object.entries(n).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`});let o;i===t?o=e:o=zm(i,t,e);let a=Vm(Hm(o));return new Nt(a,s,r)}function zm(i,t,e){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===t?n[r]=e:n[r]=zm(s,t,e)}),new X(i.segments,n)}var ko=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ao(n[0]))throw new S(4003,!1);let r=n.find(Er);if(r&&r!==Am(n))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mD(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new ko(!0,0,i);let t=0,e=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new ko(e,t,n)}var wi=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function gD(i,t,e){if(i.isAbsolute)return new wi(t,!0,0);if(!e)return new wi(t,!1,NaN);if(e.parent===null)return new wi(e,!0,0);let n=Ao(i.commands[0])?0:1,r=e.segments.length-1+n;return bD(e,r,i.numberOfDoubleDots)}function bD(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new S(4005,!1);r=n.segments.length}return new wi(n,!1,r-s)}function vD(i){return Er(i[0])?i[0].outlets:{[O]:i}}function Um(i,t,e){if(i??=new X([],{}),i.segments.length===0&&i.hasChildren())return vr(i,t,e);let n=yD(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new X(i.segments.slice(0,n.pathIndex),{});return s.children[O]=new X(i.segments.slice(n.pathIndex),i.children),vr(s,0,r)}else return n.match&&r.length===0?new X(i.segments,{}):n.match&&!i.hasChildren()?Qu(i,t,e):n.match?vr(i,0,r):Qu(i,t,e)}function vr(i,t,e){if(e.length===0)return new X(i.segments,{});{let n=vD(e),r={};if(Object.keys(n).some(s=>s!==O)&&i.children[O]&&i.numberOfChildren===1&&i.children[O].segments.length===0){let s=vr(i.children[O],t,e);return new X(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Um(i.children[s],t,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new X(i.segments,r)}}function yD(i,t,e){let n=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;let o=i.segments[r],a=e[n];if(Er(a))break;let l=`${a}`,u=n<e.length-1?e[n+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!_m(l,u,o))return s;n+=2}else{if(!_m(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Qu(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Er(s)){let l=CD(s.outlets);return new X(n,l)}if(r===0&&Ao(e[0])){let l=i.segments[t];n.push(new An(l.path,Sm(e[0]))),r++;continue}let o=Er(s)?s.outlets[O]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Ao(a)?(n.push(new An(o,Sm(a))),r+=2):(n.push(new An(o,{})),r++)}return new X(n,{})}function CD(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=Qu(new X([],{}),0,n))}),t}function Sm(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function _m(i,t,e){return i==e.path&&vt(t,e.parameters)}var yr="imperative",Te=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Te||{}),Ke=class{constructor(t,e){this.id=t,this.url=e}},Dr=class extends Ke{constructor(t,e,n="imperative",r=null){super(t,e),this.type=Te.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ot=class extends Ke{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=Te.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ue=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(Ue||{}),Ku=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Ku||{}),kt=class extends Ke{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Te.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},On=class extends Ke{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Te.NavigationSkipped}},Mr=class extends Ke{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=Te.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},No=class extends Ke{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Te.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xu=class extends Ke{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Te.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class extends Ke{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Te.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ec=class extends Ke{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Te.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tc=class extends Ke{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Te.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nc=class{constructor(t){this.route=t,this.type=Te.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ic=class{constructor(t){this.route=t,this.type=Te.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rc=class{constructor(t){this.snapshot=t,this.type=Te.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sc=class{constructor(t){this.snapshot=t,this.type=Te.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oc=class{constructor(t){this.snapshot=t,this.type=Te.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ac=class{constructor(t){this.snapshot=t,this.type=Te.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Sr=class{},Si=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function wD(i,t){return i.providers&&!i._injector&&(i._injector=_u(i.providers,t,`Route: ${i.path}`)),i._injector??t}function st(i){return i.outlet||O}function ED(i,t){let e=i.filter(n=>st(n)===t);return e.push(...i.filter(n=>st(n)!==t)),e}function Ar(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var lc=class{get injector(){return Ar(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Bo(this.rootInjector),this.attachRef=null}},Bo=(()=>{class i{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new lc(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||i)($(qe))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Oo=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=uc(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=uc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=cc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return cc(t,this._root).map(e=>e.value)}};function uc(i,t){if(i===t.value)return t;for(let e of t.children){let n=uc(i,e);if(n)return n}return null}function cc(i,t){if(i===t.value)return[t];for(let e of t.children){let n=cc(i,e);if(n.length)return n.unshift(t),n}return[]}var ze=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ci(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var Fo=class extends Oo{constructor(t,e){super(t),this.snapshot=e,Cc(this,t)}toString(){return this.snapshot.toString()}};function $m(i){let t=DD(i),e=new ae([new An("",{})]),n=new ae({}),r=new ae({}),s=new ae({}),o=new ae(""),a=new Ft(e,n,s,o,r,O,i,t.root);return a.snapshot=t.root,new Fo(new ze(a,[]),t)}function DD(i){let t={},e={},n={},r="",s=new Ei([],t,n,r,e,O,i,null,{});return new Po("",new ze(s,[]))}var Ft=class{constructor(t,e,n,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(U(u=>u[Rr]))??R(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(t=>Mi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(t=>Mi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lo(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:y(y({},t.params),i.params),data:y(y({},t.data),i.data),resolve:y(y(y(y({},i.data),t.data),r?.data),i._resolvedData)}:n={params:y({},i.params),data:y({},i.data),resolve:y(y({},i.data),i._resolvedData??{})},r&&Gm(r)&&(n.resolve[Rr]=r.title),n}var Ei=class{get title(){return this.data?.[Rr]}constructor(t,e,n,r,s,o,a,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Po=class extends Oo{constructor(t,e){super(e),this.url=t,Cc(this,e)}toString(){return Wm(this._root)}};function Cc(i,t){t.value._routerState=i,t.children.forEach(e=>Cc(i,e))}function Wm(i){let t=i.children.length>0?` { ${i.children.map(Wm).join(", ")} } `:"";return`${i.value}${t}`}function $u(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,vt(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),vt(t.params,e.params)||i.paramsSubject.next(e.params),QE(t.url,e.url)||i.urlSubject.next(e.url),vt(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function dc(i,t){let e=vt(i.params,t.params)&&eD(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||dc(i.parent,t.parent))}function Gm(i){return typeof i.title=="string"||i.title===null}var wc=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=O,this.activateEvents=new ue,this.deactivateEvents=new ue,this.attachEvents=new ue,this.detachEvents=new ue,this.parentContexts=E(Bo),this.location=E(Jt),this.changeDetector=E(nn),this.inputBinder=E(Ec,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new hc(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=ye({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yt]})}}return i})(),hc=class i{__ngOutletInjector(t){return new i(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ft?this.route:t===Bo?this.childContexts:this.parent.get(t,e)}},Ec=new I("");function MD(i,t,e){let n=_r(i,t._root,e?e._root:void 0);return new Fo(n,t)}function _r(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=SD(i,t,e);return new ze(n,r)}else{if(i.shouldAttach(t.value)){let s=i.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>_r(i,a)),o}}let n=_D(t.value),r=t.children.map(s=>_r(i,s));return new ze(n,r)}}function SD(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return _r(i,n,r);return _r(i,n)})}function _D(i){return new Ft(new ae(i.url),new ae(i.params),new ae(i.queryParams),new ae(i.fragment),new ae(i.data),i.outlet,i.component,i)}var xr=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},qm="ngNavigationCancelingError";function Vo(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Nn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Zm(!1,Ue.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function Zm(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[qm]=!0,e.cancellationCode=t,e}function xD(i){return Ym(i)&&Nn(i.url)}function Ym(i){return!!i&&i[qm]}var TD=(i,t,e,n)=>U(r=>(new fc(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),fc=class{constructor(t,e,n,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),$u(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=Ci(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Ci(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Ci(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=Ci(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new ac(s.value.snapshot))}),t.children.length&&this.forwardEvent(new sc(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if($u(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$u(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)}},Ho=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Di=class{constructor(t,e){this.component=t,this.route=e}};function ID(i,t,e){let n=i._root,r=t?t._root:null;return gr(n,r,e,[n.value])}function RD(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function xi(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!Ph(i)?i:t.get(i):n}function gr(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ci(t);return i.children.forEach(o=>{AD(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Cr(a,e.getContext(o),r)),r}function AD(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=kD(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Ho(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?gr(i,t,a?a.children:null,n,r):gr(i,t,e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Di(a.outlet.component,o))}else o&&Cr(t,a,r),r.canActivateChecks.push(new Ho(n)),s.component?gr(i,null,a?a.children:null,n,r):gr(i,null,e,n,r);return r}function kD(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!kn(i.url,t.url);case"pathParamsOrQueryParamsChange":return!kn(i.url,t.url)||!vt(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dc(i,t)||!vt(i.queryParams,t.queryParams);case"paramsChange":default:return!dc(i,t)}}function Cr(i,t,e){let n=Ci(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?t?Cr(o,t.children.getContext(s),e):Cr(o,null,e):Cr(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Di(t.outlet.component,r)):e.canDeactivateChecks.push(new Di(null,r)):e.canDeactivateChecks.push(new Di(null,r))}function kr(i){return typeof i=="function"}function ND(i){return typeof i=="boolean"}function OD(i){return i&&kr(i.canLoad)}function FD(i){return i&&kr(i.canActivate)}function LD(i){return i&&kr(i.canActivateChild)}function PD(i){return i&&kr(i.canDeactivate)}function VD(i){return i&&kr(i.canMatch)}function Qm(i){return i instanceof Ct||i?.name==="EmptyError"}var xo=Symbol("INITIAL_VALUE");function _i(){return et(i=>gs(i.map(t=>t.pipe(wt(1),Oa(xo)))).pipe(U(t=>{for(let e of t)if(e!==!0){if(e===xo)return xo;if(e===!1||HD(e))return e}return!0}),Je(t=>t!==xo),wt(1)))}function HD(i){return Nn(i)||i instanceof xr}function jD(i,t){return ge(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?R(F(y({},e),{guardsResult:!0})):BD(o,n,r,i).pipe(ge(a=>a&&ND(a)?zD(n,s,i,t):R(a)),U(a=>F(y({},e),{guardsResult:a})))})}function BD(i,t,e,n){return le(i).pipe(ge(r=>qD(r.component,r.route,e,t,n)),lt(r=>r!==!0,!0))}function zD(i,t,e,n){return le(t).pipe(Zn(r=>qn($D(r.route.parent,n),UD(r.route,n),GD(i,r.path,e),WD(i,r.route,e))),lt(r=>r!==!0,!0))}function UD(i,t){return i!==null&&t&&t(new oc(i)),R(!0)}function $D(i,t){return i!==null&&t&&t(new rc(i)),R(!0)}function WD(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return R(!0);let r=n.map(s=>bs(()=>{let o=Ar(t)??e,a=xi(s,o),l=FD(a)?a.canActivate(t,i):St(o,()=>a(t,i));return sn(l).pipe(lt())}));return R(r).pipe(_i())}function GD(i,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>RD(o)).filter(o=>o!==null).map(o=>bs(()=>{let a=o.guards.map(l=>{let u=Ar(o.node)??e,c=xi(l,u),d=LD(c)?c.canActivateChild(n,i):St(u,()=>c(n,i));return sn(d).pipe(lt())});return R(a).pipe(_i())}));return R(s).pipe(_i())}function qD(i,t,e,n,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return R(!0);let o=s.map(a=>{let l=Ar(t)??r,u=xi(a,l),c=PD(u)?u.canDeactivate(i,t,e,n):St(l,()=>u(i,t,e,n));return sn(c).pipe(lt())});return R(o).pipe(_i())}function ZD(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return R(!0);let s=r.map(o=>{let a=xi(o,i),l=OD(a)?a.canLoad(t,e):St(i,()=>a(t,e));return sn(l)});return R(s).pipe(_i(),Km(n))}function Km(i){return Sa(Se(t=>{if(typeof t!="boolean")throw Vo(i,t)}),U(t=>t===!0))}function YD(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return R(!0);let s=r.map(o=>{let a=xi(o,i),l=VD(a)?a.canMatch(t,e):St(i,()=>a(t,e));return sn(l)});return R(s).pipe(_i(),Km(n))}var Tr=class{constructor(t){this.segmentGroup=t||null}},Ir=class extends Error{constructor(t){super(),this.urlTree=t}};function yi(i){return Wn(new Tr(i))}function QD(i){return Wn(new S(4e3,!1))}function KD(i){return Wn(Zm(!1,Ue.GuardRejected))}var pc=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return R(n);if(r.numberOfChildren>1||!r.children[O])return QD(`${t.redirectTo}`);r=r.children[O]}}applyRedirectCommands(t,e,n,r,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:u,routeConfig:c,url:d,outlet:h,params:f,data:p,title:m}=r,b=St(s,()=>a({params:f,data:p,queryParams:l,fragment:u,routeConfig:c,url:d,outlet:h,title:m}));if(b instanceof Nt)throw new Ir(b);e=b}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e[0]==="/")throw new Ir(o);return o}applyRedirectCreateUrlTree(t,e,n,r){let s=this.createSegmentGroup(t,e.root,n,r);return new Nt(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);n[r]=e[a]}else n[r]=s}),n}createSegmentGroup(t,e,n,r){let s=this.createSegments(t,e.segments,n,r),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,n,r)}),new X(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new S(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},mc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XD(i,t,e,n,r){let s=Xm(i,t,e);return s.matched?(n=wD(t,n),YD(n,t,e,r).pipe(U(o=>o===!0?s:y({},mc)))):R(s)}function Xm(i,t,e){if(t.path==="**")return JD(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?y({},mc):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||YE)(e,i,t);if(!r)return y({},mc);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?y(y({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function JD(i){return{matched:!0,parameters:i.length>0?Am(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function xm(i,t,e,n){return e.length>0&&n0(i,e,n)?{segmentGroup:new X(t,t0(n,new X(e,i.children))),slicedSegments:[]}:e.length===0&&i0(i,e,n)?{segmentGroup:new X(i.segments,e0(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new X(i.segments,i.children),slicedSegments:e}}function e0(i,t,e,n){let r={};for(let s of e)if(zo(i,t,s)&&!n[st(s)]){let o=new X([],{});r[st(s)]=o}return y(y({},n),r)}function t0(i,t){let e={};e[O]=t;for(let n of i)if(n.path===""&&st(n)!==O){let r=new X([],{});e[st(n)]=r}return e}function n0(i,t,e){return e.some(n=>zo(i,t,n)&&st(n)!==O)}function i0(i,t,e){return e.some(n=>zo(i,t,n))}function zo(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function r0(i,t,e){return t.length===0&&!i.children[e]}var gc=class{};function s0(i,t,e,n,r,s,o="emptyOnly"){return new bc(i,t,e,n,r,o,s).recognize()}var o0=31,bc=class{constructor(t,e,n,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new pc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=xm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(U(({children:e,rootSnapshot:n})=>{let r=new ze(n,e),s=new Po("",r),o=pD(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new Ei([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),O,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,O,e).pipe(U(n=>({children:n,rootSnapshot:e})),Vt(n=>{if(n instanceof Ir)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Tr?this.noMatchError(n):n}))}processSegmentGroup(t,e,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n,s):this.processSegment(t,e,n,n.segments,r,!0,s).pipe(U(o=>o instanceof ze?[o]:[]))}processChildren(t,e,n,r){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return le(s).pipe(Zn(o=>{let a=n.children[o],l=ED(e,o);return this.processSegmentGroup(t,l,a,o,r)}),Na((o,a)=>(o.push(...a),o)),Ht(null),ka(),ge(o=>{if(o===null)return yi(n);let a=Jm(o);return a0(a),R(a)}))}processSegment(t,e,n,r,s,o,a){return le(e).pipe(Zn(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,n,r,s,o,a).pipe(Vt(u=>{if(u instanceof Tr)return R(null);throw u}))),lt(l=>!!l),Vt(l=>{if(Qm(l))return r0(n,r,s)?R(new gc):yi(n);throw l}))}processSegmentAgainstRoute(t,e,n,r,s,o,a,l){return st(n)!==o&&(o===O||!zo(r,s,n))?yi(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,s,o,l):yi(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o,a){let{matched:l,parameters:u,consumedSegments:c,positionalParamSegments:d,remainingSegments:h}=Xm(e,r,s);if(!l)return yi(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>o0&&(this.allowRedirects=!1));let f=new Ei(s,u,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Tm(r),st(r),r.component??r._loadedComponent??null,r,Im(r)),p=Lo(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(r,m).pipe(ge(b=>this.processSegment(t,n,e,b.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,e,n,r,s,o){let a=XD(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),a.pipe(et(l=>l.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(et(({routes:u})=>{let c=n._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new Ei(h,d,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Tm(n),st(n),n.component??n._loadedComponent??null,n,Im(n)),m=Lo(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:b,slicedSegments:g}=xm(e,h,f,u);if(g.length===0&&b.hasChildren())return this.processChildren(c,u,b,p).pipe(U(M=>new ze(p,M)));if(u.length===0&&g.length===0)return R(new ze(p,[]));let v=st(n)===s;return this.processSegment(c,u,b,g,v?O:s,!0,p).pipe(U(M=>new ze(p,M instanceof ze?[M]:[])))}))):yi(e)))}getChildConfig(t,e,n){return e.children?R({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?R({routes:e._loadedRoutes,injector:e._loadedInjector}):ZD(t,e,n,this.urlSerializer).pipe(ge(r=>r?this.configLoader.loadChildren(t,e).pipe(Se(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):KD(e))):R({routes:[],injector:t})}};function a0(i){i.sort((t,e)=>t.value.outlet===O?-1:e.value.outlet===O?1:t.value.outlet.localeCompare(e.value.outlet))}function l0(i){let t=i.value.routeConfig;return t&&t.path===""}function Jm(i){let t=[],e=new Set;for(let n of i){if(!l0(n)){t.push(n);continue}let r=t.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=Jm(n.children);t.push(new ze(n.value,r))}return t.filter(n=>!e.has(n))}function Tm(i){return i.data||{}}function Im(i){return i.resolve||{}}function u0(i,t,e,n,r,s){return ge(o=>s0(i,t,e,n,o.extractedUrl,r,s).pipe(U(({state:a,tree:l})=>F(y({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function c0(i,t){return ge(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return R(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of eg(l))o.add(u);let a=0;return le(o).pipe(Zn(l=>s.has(l)?d0(l,n,i,t):(l.data=Lo(l,l.parent,i).resolve,R(void 0))),Se(()=>a++),Yn(1),ge(l=>a===o.size?R(e):je))})}function eg(i){let t=i.children.map(e=>eg(e)).flat();return[i,...t]}function d0(i,t,e,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!Gm(r)&&(s[Rr]=r.title),h0(s,i,t,n).pipe(U(o=>(i._resolvedData=o,i.data=Lo(i,i.parent,e).resolve,null)))}function h0(i,t,e,n){let r=qu(i);if(r.length===0)return R({});let s={};return le(r).pipe(ge(o=>f0(i[o],t,e,n).pipe(lt(),Se(a=>{if(a instanceof xr)throw Vo(new wr,a);s[o]=a}))),Yn(1),Aa(s),Vt(o=>Qm(o)?je:Wn(o)))}function f0(i,t,e,n){let r=Ar(t)??n,s=xi(i,r),o=s.resolve?s.resolve(t,e):St(r,()=>s(t,e));return sn(o)}function Wu(i){return et(t=>{let e=i(t);return e?le(e).pipe(U(()=>t)):R(t)})}var tg=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===O);return n}getResolvedTitleForRoute(e){return e.data[Rr]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>E(p0),providedIn:"root"})}}return i})(),p0=(()=>{class i extends tg{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)($(Em))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Dc=new I("",{providedIn:"root",factory:()=>({})}),m0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ie({type:i,selectors:[["ng-component"]],standalone:!0,features:[re],decls:1,vars:0,template:function(n,r){n&1&&P(0,"router-outlet")},dependencies:[wc],encapsulation:2})}}return i})();function Mc(i){let t=i.children&&i.children.map(Mc),e=t?F(y({},i),{children:t}):y({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==O&&(e.component=m0),e}var Sc=new I(""),g0=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(Tu)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return R(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=sn(e.loadComponent()).pipe(U(ng),Se(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Wi(()=>{this.componentLoaders.delete(e)})),r=new $n(n,()=>new ve).pipe(Un());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return R({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=b0(n,this.compiler,e,this.onLoadEndListener).pipe(Wi(()=>{this.childrenLoaders.delete(n)})),o=new $n(s,()=>new ve).pipe(Un());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function b0(i,t,e,n){return sn(i.loadChildren()).pipe(U(ng),ge(r=>r instanceof er||Array.isArray(r)?R(r):le(t.compileModuleAsync(r))),U(r=>{n&&n(i);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(Sc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Mc),injector:s}}))}function v0(i){return i&&typeof i=="object"&&"default"in i}function ng(i){return v0(i)?i.default:i}var _c=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>E(y0),providedIn:"root"})}}return i})(),y0=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),C0=new I("");var w0=new I(""),E0=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ve,this.transitionAbortSubject=new ve,this.configLoader=E(g0),this.environmentInjector=E(qe),this.urlSerializer=E(yc),this.rootContexts=E(Bo),this.location=E(cr),this.inputBindingEnabled=E(Ec,{optional:!0})!==null,this.titleStrategy=E(tg),this.options=E(Dc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(_c),this.createViewTransition=E(C0,{optional:!0}),this.navigationErrorHandler=E(w0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let e=r=>this.events.next(new nc(r)),n=r=>this.events.next(new ic(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(F(y(y({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,r){return this.transitions=new ae({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:yr,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Je(s=>s.id!==0),U(s=>F(y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),et(s=>{let o=!1,a=!1;return R(s).pipe(et(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ue.SupersededByNewNavigation),je;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?F(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&c!=="reload"){let d="";return this.events.next(new On(l.id,this.urlSerializer.serialize(l.rawUrl),d,Ku.IgnoredSameUrlNavigation)),l.resolve(!1),je}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return R(l).pipe(et(d=>{let h=this.transitions?.getValue();return this.events.next(new Dr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?je:Promise.resolve(d)}),u0(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Se(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=F(y({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new No(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:m}=l,b=new Dr(d,this.urlSerializer.serialize(h),f,p);this.events.next(b);let g=$m(this.rootComponentType).snapshot;return this.currentTransition=s=F(y({},l),{targetSnapshot:g,urlAfterRedirects:h,extras:F(y({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,R(s)}else{let d="";return this.events.next(new On(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Ku.IgnoredByUrlHandlingStrategy)),l.resolve(!1),je}}),Se(l=>{let u=new Xu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),U(l=>(this.currentTransition=s=F(y({},l),{guards:ID(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),jD(this.environmentInjector,l=>this.events.next(l)),Se(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Vo(this.urlSerializer,l.guardsResult);let u=new Ju(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Je(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ue.GuardRejected),!1)),Wu(l=>{if(l.guards.canActivateChecks.length)return R(l).pipe(Se(u=>{let c=new ec(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),et(u=>{let c=!1;return R(u).pipe(c0(this.paramsInheritanceStrategy,this.environmentInjector),Se({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(u,"",Ue.NoDataFromResolver)}}))}),Se(u=>{let c=new tc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}))}),Wu(l=>{let u=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Se(h=>{c.component=h}),U(()=>{})));for(let h of c.children)d.push(...u(h));return d};return gs(u(l.targetSnapshot.root)).pipe(Ht(null),wt(1))}),Wu(()=>this.afterPreactivation()),et(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,c=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return c?le(c).pipe(U(()=>s)):R(s)}),U(l=>{let u=MD(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=F(y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Se(()=>{this.events.next(new Sr)}),TD(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),wt(1),Se({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ot(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Fa(this.transitionAbortSubject.pipe(Se(l=>{throw l}))),Wi(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ue.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Vt(l=>{if(a=!0,Ym(l))this.events.next(new kt(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),xD(l)?this.events.next(new Si(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Mr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let c=St(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(c instanceof xr){let{message:d,cancellationCode:h}=Vo(this.urlSerializer,c);this.events.next(new kt(s.id,this.urlSerializer.serialize(s.extractedUrl),d,h)),this.events.next(new Si(c.redirectTo,c.navigationBehaviorOptions))}else{this.events.next(u);let d=e.errorHandler(l);s.resolve(!!d)}}catch(c){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(c)}}return je}))}))}cancelNavigationTransition(e,n,r){let s=new kt(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function D0(i){return i!==yr}var M0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>E(S0),providedIn:"root"})}}return i})(),vc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},S0=(()=>{class i extends vc{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Kt(i)))(r||i)}})()}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ig=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:()=>E(_0),providedIn:"root"})}}return i})(),_0=(()=>{class i extends ig{constructor(){super(...arguments),this.location=E(cr),this.urlSerializer=E(yc),this.options=E(Dc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(_c),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Nt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$m(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof Dr)this.stateMemento=this.createStateMemento();else if(e instanceof On)this.rawUrlTree=n.initialUrl;else if(e instanceof No){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else e instanceof Sr?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):e instanceof kt&&(e.code===Ue.GuardRejected||e.code===Ue.NoDataFromResolver)?this.restoreHistory(n):e instanceof Mr?this.restoreHistory(n,!0):e instanceof Ot&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let r=e instanceof Nt?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let s=this.browserPageId,o=y(y({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(r,"",o)}else{let s=y(y({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Kt(i)))(r||i)}})()}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),br=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(br||{});function x0(i,t){i.events.pipe(Je(e=>e instanceof Ot||e instanceof kt||e instanceof Mr||e instanceof On),U(e=>e instanceof Ot||e instanceof On?br.COMPLETE:(e instanceof kt?e.code===Ue.Redirect||e.code===Ue.SupersededByNewNavigation:!1)?br.REDIRECTING:br.FAILED),Je(e=>e!==br.REDIRECTING),wt(1)).subscribe(()=>{t()})}function T0(i){throw i}var I0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ti=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=E(yo),this.stateManager=E(ig),this.options=E(Dc,{optional:!0})||{},this.pendingTasks=E(fi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(E0),this.urlSerializer=E(yc),this.location=E(cr),this.urlHandlingStrategy=E(_c),this._events=new ve,this.errorHandler=this.options.errorHandler||T0,this.navigated=!1,this.routeReuseStrategy=E(M0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(Sc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(Ec,{optional:!0}),this.eventsSubscription=new ce,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof kt&&n.code!==Ue.Redirect&&n.code!==Ue.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Ot)this.navigated=!0;else if(n instanceof Si){let o=n.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l=y({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||D0(r.source)},o);this.scheduleNavigation(a,yr,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}k0(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=y({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Mc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,u=l?this.currentUrlTree.fragment:o,c=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":c=y(y({},this.currentUrlTree.queryParams),s);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=s||null}c!==null&&(c=this.removeEmptyProps(c));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=jm(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Bm(d,e,c,u??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=Nn(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,yr,null,n)}navigate(e,n={skipLocationChange:!1}){return A0(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=y({},I0):n===!1?r=y({},R0):r=n,Nn(e))return Dm(this.currentUrlTree,e,r);let s=this.parseUrl(e);return Dm(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((d,h)=>{a=d,l=h});let c=this.pendingTasks.add();return x0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function A0(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new S(4008,!1)}function k0(i){return!(i instanceof Sr)&&!(i instanceof Si)}var jo=(()=>{class i{constructor(e,n,r,s,o,a){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new ve,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof Ot&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Nn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,n,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||n||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:tp(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let r=this.renderer,s=this.el.nativeElement;n!==null?r.setAttribute(s,e,n):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Nn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(n){return new(n||i)(D(Ti),D(Ft),ou("tabindex"),D(mt),D(ke),D(bi))}}static{this.\u0275dir=ye({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){n&1&&V("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&en("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",In],skipLocationChange:[2,"skipLocationChange","skipLocationChange",In],replaceUrl:[2,"replaceUrl","replaceUrl",In],routerLink:"routerLink"},standalone:!0,features:[Su,Yt]})}}return i})(),rg=(()=>{class i{get isActive(){return this._isActive}constructor(e,n,r,s,o){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ue,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Ot&&this.update()})}ngAfterContentInit(){R(this.links.changes,R(null)).pipe(Gn()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=le(e).pipe(Gn()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){let n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let n=N0(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let s=r.urlTree;return s?e.isActive(s,n):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(n){return new(n||i)(D(Ti),D(ke),D(mt),D(nn),D(jo,8))}}static{this.\u0275dir=ye({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,s){if(n&1&&qp(s,jo,5),n&2){let o;gt(o=bt())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Yt]})}}return i})();function N0(i){return!!i.paths}var O0=new I("");function sg(i,...t){return io([{provide:Sc,multi:!0,useValue:i},[],{provide:Ft,useFactory:F0,deps:[Ti]},{provide:xu,multi:!0,useFactory:L0},t.map(e=>e.\u0275providers)])}function F0(i){return i.routerState.root}function L0(){let i=E(Gt);return t=>{let e=i.get(Tn);if(t!==e.components[0])return;let n=i.get(Ti),r=i.get(P0);i.get(V0)===1&&n.initialNavigation(),i.get(H0,null,j.Optional)?.setUpPreloading(),i.get(O0,null,j.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var P0=new I("",{factory:()=>new ve}),V0=new I("",{providedIn:"root",factory:()=>1});var H0=new I("");var be=class{constructor(t){this.table=t}reloadData(t,e,n){return this.table.dataLoader.load(t,void 0,void 0,void 0,e,n)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(t){return this.table.modules.layout.layout(t)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t){return this.table.options[t]}setOption(t,e){return typeof e<"u"&&(this.table.options[t]=e),this.table.options[t]}deprecationCheck(t,e,n){return this.table.deprecationAdvisor.check(t,e,n)}deprecationCheckMsg(t,e){return this.table.deprecationAdvisor.checkMsg(t,e)}deprecationMsg(t){return this.table.deprecationAdvisor.msg(t)}module(t){return this.table.module(t)}},te=class{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(t,e,n){var r=t?e.split(t):[e],s=r.length,o;for(let a=0;a<s&&(n=n[r[a]],o=n,!!n);a++);return o}static deepClone(t,e,n=[]){var r={}.__proto__,s=[].__proto__;e||(e=Object.assign(Array.isArray(t)?[]:{},t));for(var o in t){let a=t[o],l,u;a!=null&&typeof a=="object"&&(a.__proto__===r||a.__proto__===s)&&(l=n.findIndex(c=>c.subject===a),l>-1?e[o]=n[l].copy:(u=Object.assign(Array.isArray(a)?[]:{},a),n.unshift({subject:a,copy:u}),e[o]=this.deepClone(a,u,n)))}return e}},j0=class lg extends be{constructor(t,e,n){super(t),this.element=e,this.container=this._lookupContainer(),this.parent=n,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var t=this.table.options.popupContainer;return typeof t=="string"?(t=document.querySelector(t),t||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):t===!0&&(t=this.table.element),t&&!this._checkContainerIsParent(t)&&(t=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),t||(t=document.body),t}_checkContainerIsParent(t,e=this.table.element){return t===e?!0:e.parentNode?this._checkContainerIsParent(t,e.parentNode):!1}renderCallback(t){this.renderedCallback=t}containerEventCoords(t){var e=!(t instanceof MouseEvent),n=e?t.touches[0].pageX:t.pageX,r=e?t.touches[0].pageY:t.pageY;if(this.container!==document.body){let s=te.elOffset(this.container);n-=s.left,r-=s.top}return{x:n,y:r}}elementPositionCoords(t,e="right"){var n=te.elOffset(t),r,s,o;switch(this.container!==document.body&&(r=te.elOffset(this.container),n.left-=r.left,n.top-=r.top),e){case"right":s=n.left+t.offsetWidth,o=n.top-1;break;case"bottom":s=n.left,o=n.top+t.offsetHeight;break;case"left":s=n.left,o=n.top-1;break;case"top":s=n.left,o=n.top;break;case"center":s=n.left+t.offsetWidth/2,o=n.top+t.offsetHeight/2;break}return{x:s,y:o,offset:n}}show(t,e){var n,r,s,o,a;return this.destroyed||this.table.destroyed?this:(t instanceof HTMLElement?(s=t,a=this.elementPositionCoords(t,e),o=a.offset,n=a.x,r=a.y):typeof t=="number"?(o={top:0,left:0},n=t,r=e):(a=this.containerEventCoords(t),n=a.x,r=a.y,this.reversedX=!1),this.element.style.top=r+"px",this.element.style.left=n+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(n,r,s,o,e),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",l=>{l.stopPropagation()}),this)}_fitToScreen(t,e,n,r,s){var o=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(t+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",n?this.element.style.right=this.container.offsetWidth-r.left+"px":this.element.style.right=this.container.offsetWidth-t+"px",this.reversedX=!0);let a=Math.max(this.container.offsetHeight,o?this.container.scrollHeight:0);if(e+this.element.offsetHeight>a)if(n)switch(s){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-n.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+n.offsetHeight+1+"px"}else this.element.style.height=a+"px"}isVisible(){return this.visible}hideOnBlur(t){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=t),this}_escapeCheck(t){t.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(t=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!t&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(t){return this.childPopup&&this.childPopup.hide(),this.childPopup=new lg(this.table,t,this),this.childPopup}},N=class extends be{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){typeof this.table[t]>"u"?this.table[t]=(...n)=>(this.table.initGuard(t),e(...n)):console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,n){return this.table.componentFunctionBinder.bind(t,e,n)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}displayRows(t){var e=this.table.rowManager.displayRows.length-1,n;if(this._handler&&(n=this.table.rowManager.displayPipeline.findIndex(r=>r.handler===this._handler),n>-1&&(e=n)),t&&(e=e+t),this._handler)return e>-1?this.table.rowManager.getDisplayRows(e):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}footerAppend(t){return this.table.footerManager.append(t)}footerPrepend(t){return this.table.footerManager.prepend(t)}footerRemove(t){return this.table.footerManager.remove(t)}popup(t,e){return new j0(this.table,t,e)}alert(t,e){return this.table.alertManager.alert(t,e)}clearAlert(){return this.table.alertManager.clear()}},B0={rownum:function(i,t,e,n,r,s){return s.getPosition()}},z0=(()=>{class i extends N{static moduleName="accessor";static accessors=B0;constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var n=!1,r={};this.allowedTypes.forEach(s=>{var o="accessor"+(s.charAt(0).toUpperCase()+s.slice(1)),a;e.definition[o]&&(a=this.lookupAccessor(e.definition[o]),a&&(n=!0,r[o]={accessor:a,params:e.definition[o+"Params"]||{}}))}),n&&(e.modules.accessor=r)}lookupAccessor(e){var n=!1;switch(typeof e){case"string":i.accessors[e]?n=i.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":n=e;break}return n}transformRow(e,n){var r="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),s=e.getComponent(),o=te.deepClone(e.data||{});return this.table.columnManager.traverse(function(a){var l,u,c,d;a.modules.accessor&&(u=a.modules.accessor[r]||a.modules.accessor.accessor||!1,u&&(l=a.getFieldValue(o),l!="undefined"&&(d=a.getComponent(),c=typeof u.params=="function"?u.params(l,o,n,d,s):u.params,a.setFieldValue(o,u.accessor(l,o,n,c,d,s)))))}),o}}return i})(),U0={method:"GET"};function Tc(i,t){var e=[];if(t=t||"",Array.isArray(i))i.forEach((r,s)=>{e=e.concat(Tc(r,t?t+"["+s+"]":s))});else if(typeof i=="object")for(var n in i)e=e.concat(Tc(i[n],t?t+"["+n+"]":n));else e.push({key:t,value:i});return e}function $0(i){var t=Tc(i),e=[];return t.forEach(function(n){e.push(encodeURIComponent(n.key)+"="+encodeURIComponent(n.value))}),e.join("&")}function ug(i,t,e){return i&&e&&Object.keys(e).length&&(!t.method||t.method.toLowerCase()=="get")&&(t.method="get",i+=(i.includes("?")?"&":"?")+$0(e)),i}function W0(i,t,e){var n;return new Promise((r,s)=>{if(i=this.urlGenerator.call(this.table,i,t,e),t.method.toUpperCase()!="GET")if(n=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],n){for(var o in n.headers)t.headers||(t.headers={}),typeof t.headers[o]>"u"&&(t.headers[o]=n.headers[o]);t.body=n.body.call(this,i,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);i?(typeof t.headers>"u"&&(t.headers={}),typeof t.headers.Accept>"u"&&(t.headers.Accept="application/json"),typeof t.headers["X-Requested-With"]>"u"&&(t.headers["X-Requested-With"]="XMLHttpRequest"),typeof t.mode>"u"&&(t.mode="cors"),t.mode=="cors"?(typeof t.headers.Origin>"u"&&(t.headers.Origin=window.location.origin),typeof t.credentials>"u"&&(t.credentials="same-origin")):typeof t.credentials>"u"&&(t.credentials="include"),fetch(i,t).then(a=>{a.ok?a.json().then(l=>{r(l)}).catch(l=>{s(l),console.warn("Ajax Load Error - Invalid JSON returned",l)}):(console.error("Ajax Load Error - Connection Error: "+a.status,a.statusText),s(a))}).catch(a=>{console.error("Ajax Load Error - Connection Error: ",a),s(a)})):(console.warn("Ajax Load Error - No URL Set"),r([]))})}function Ic(i,t){var e=[];if(t=t||"",Array.isArray(i))i.forEach((r,s)=>{e=e.concat(Ic(r,t?t+"["+s+"]":s))});else if(typeof i=="object")for(var n in i)e=e.concat(Ic(i[n],t?t+"["+n+"]":n));else e.push({key:t,value:i});return e}var G0={json:{headers:{"Content-Type":"application/json"},body:function(i,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(i,t,e){var n=Ic(e),r=new FormData;return n.forEach(function(s){r.append(s.key,s.value)}),r}}},q0=(()=>{class i extends N{static moduleName="ajax";static defaultConfig=U0;static defaultURLGenerator=ug;static defaultLoaderPromise=W0;static contentTypeFormatters=G0;constructor(e){super(e),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=i.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||i.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||i.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(e,n,r,s){var o=this.table.options.ajaxParams;return o&&(typeof o=="function"&&(o=o.call(this.table)),s=Object.assign(Object.assign({},o),s)),s}requestDataCheck(e,n,r,s){return!!(!e&&this.url||typeof e=="string")}requestData(e,n,r,s,o){var a;return!o&&this.requestDataCheck(e)?(e&&this.setUrl(e),a=this.generateConfig(r),this.sendRequest(this.url,n,a)):o}setDefaultConfig(e={}){this.config=Object.assign({},i.defaultConfig),typeof e=="string"?this.config.method=e:Object.assign(this.config,e)}generateConfig(e={}){var n=Object.assign({},this.config);return typeof e=="string"?n.method=e:Object.assign(n,e),n}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e,n,r){return this.table.options.ajaxRequesting.call(this.table,e,n)!==!1?this.loaderPromise(e,r,n).then(s=>(this.table.options.ajaxResponse&&(s=this.table.options.ajaxResponse.call(this.table,e,n,s)),s)):Promise.reject()}}return i})(),Z0={replace:function(i){return this.table.setData(i)},update:function(i){return this.table.updateOrAddData(i)},insert:function(i){return this.table.addData(i)}},Y0={table:function(i){var t=[],e=!0,n=this.table.columnManager.columns,r=[],s=[];return i=i.split(`
`),i.forEach(function(o){t.push(o.split("	"))}),t.length&&!(t.length===1&&t[0].length<2)?(t[0].forEach(function(o){var a=n.find(function(l){return o&&l.definition.title&&o.trim()&&l.definition.title.trim()===o.trim()});a?r.push(a):e=!1}),e||(e=!0,r=[],t[0].forEach(function(o){var a=n.find(function(l){return o&&l.field&&o.trim()&&l.field.trim()===o.trim()});a?r.push(a):e=!1}),e||(r=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(o){var a={};o.forEach(function(l,u){r[u]&&(a[r[u].field]=l)}),s.push(a)}),s):!1}},Q0={copyToClipboard:["ctrl + 67","meta + 67"]},K0={copyToClipboard:function(i){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},X0={keybindings:{bindings:Q0,actions:K0}},J0=(()=>{class i extends N{static moduleName="clipboard";static moduleExtensions=X0;static pasteActions=Z0;static pasteParsers=Y0;constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",e=>{var n,r,s;this.blocked||(e.preventDefault(),this.customSelection?(n=this.customSelection,this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n))):(s=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),r=this.table.modules.export.generateHTMLTable(s),n=r?this.generatePlainContent(s):"",this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n),r=this.table.options.clipboardCopyFormatter("html",r))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",n):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",n),r&&e.clipboardData.setData("text/html",r)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",n),r&&e.originalEvent.clipboardData.setData("text/html",r)),this.dispatchExternal("clipboardCopied",n,r),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var n=[];return e.forEach(r=>{var s=[];r.columns.forEach(o=>{var a="";if(o)if(r.type==="group"&&(o.value=o.component.getKey()),o.value===null)a="";else switch(typeof o.value){case"object":a=JSON.stringify(o.value);break;case"undefined":a="";break;default:a=o.value}s.push(a)}),n.push(s.join("	"))}),n.join(`
`)}copy(e,n){var r,s;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(e=document.createRange(),e.selectNodeContents(this.table.element),r=window.getSelection(),r.toString()&&n&&(this.customSelection=r.toString()),r.removeAllRanges(),r.addRange(e)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(s=document.body.createTextRange(),s.moveToElementText(this.table.element),s.select()),document.execCommand("copy"),r&&r.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=i.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;break}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=i.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;break}}paste(e){var n,r,s;this.checkPasteOrigin(e)&&(n=this.getPasteData(e),r=this.pasteParser.call(this,n),r?(e.preventDefault(),this.table.modExists("mutator")&&(r=this.mutateData(r)),s=this.pasteAction.call(this,r),this.dispatchExternal("clipboardPasted",n,r,s)):this.dispatchExternal("clipboardPasteError",n))}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(r=>{n.push(this.table.modules.mutator.transformRow(r,"clipboard"))}):n=e,n}checkPasteOrigin(e){var n=!0,r=this.confirm("clipboard-paste",[e]);return(r||!["DIV","SPAN"].includes(e.target.tagName))&&(n=!1),n}getPasteData(e){var n;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),n}}return i})(),Rc=class{constructor(t){return this._row=t,new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._row.table.componentFunctionBinder.handle("row",e._row,n)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return e?e.getComponent():!1}_getSelf(){return this._row}},Uo=class{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,n)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(t){return this._cell.row.getData(t)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){typeof e>"u"&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}},Fn=class extends be{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var t=this.element,e=this.column.getField(),n={top:"flex-start",bottom:"flex-end",middle:"center"},r={left:"flex-start",right:"flex-end",center:"center"};if(t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems=n[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent=r[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass){var s=this.column.definition.cssClass.split(" ");s.forEach(o=>{t.classList.add(o)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof t){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",t!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e,n){var r=this.setValueProcessData(t,e,n);r&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e,n){var r=!1;return(this.value!==t||n)&&(r=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),r&&this.dispatch("cell-value-changed",this),r}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Uo(this)),this.component}},$o=class{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._column.table.componentFunctionBinder.handle("column",e._column,n)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(t,e){return this._column.table.columnManager.scrollToColumn(this._column,t,e)}getTable(){return this._column.table}move(t,e){var n=this._column.table.columnManager.findColumn(t);n?this._column.table.columnManager.moveColumn(this._column,n,e):console.warn("Move Error - No matching column found:",n)}getNextColumn(){var t=this._column.nextColumn();return t?t.getComponent():!1}getPrevColumn(){var t=this._column.prevColumn();return t?t.getComponent():!1}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return t===!0?e=this._column.reinitializeWidth(!0):e=this._column.setWidth(t),this._column.table.columnManager.rerenderColumns(!0),e}},cg={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0},Nr=(()=>{class i extends be{static defaultOptionList=cg;constructor(e,n,r){super(n.table),this.definition=e,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=r,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((s,o)=>{var a=new i(s,this);this.attachColumn(a)}),this.checkColumnVisibility()):n.registerColumnField(this),this._initialize()}createElement(){var e=document.createElement("div");switch(e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),this.isRowHeader&&e.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":e.style.justifyContent="center";break;case"bottom":e.style.justifyContent="flex-end";break}return e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let n in e)typeof this.definition[n]>"u"&&(this.definition[n]=e[n]);this.definition=this.table.columnManager.optionsList.generate(i.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{i.defaultOptionList.indexOf(e)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),e.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var e=this.definition;if(this.dispatch("column-layout",this),typeof e.visible<"u"&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass){var n=e.cssClass.split(" ");n.forEach(r=>{this.element.classList.add(r)})}e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxInitialWidth&&(this.maxInitialWidth=parseInt(e.maxInitialWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),e.headerWordWrap&&n.classList.add("tabulator-col-title-wrap"),e.editableTitle){var r=document.createElement("input");r.classList.add("tabulator-title-editor"),r.addEventListener("click",s=>{s.stopPropagation(),r.focus()}),r.addEventListener("mousedown",s=>{s.stopPropagation()}),r.addEventListener("change",()=>{e.title=r.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),n.appendChild(r),e.field?this.langBind("columns|"+e.field,s=>{r.value=s||e.title||"&nbsp;"}):r.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,s=>{this._formatColumnHeaderTitle(n,s||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(n,e.title||"&nbsp;");return n}_formatColumnHeaderTitle(e,n){var r=this.chain("column-format",[this,n,e],null,()=>n);switch(typeof r){case"object":r instanceof Node?e.appendChild(r):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",r));break;case"undefined":e.innerHTML="";break;default:e.innerHTML=r}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var e=this.definition.cssClass.split(" ");e.forEach(n=>{this.element.classList.add(n)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var n=e,r=this.fieldStructure,s=r.length,o;for(let a=0;a<s&&(n=n[r[a]],o=n,!!n);a++);return o}_setFlatData(e,n){this.field&&(e[this.field]=n)}_setNestedData(e,n){var r=e,s=this.fieldStructure,o=s.length;for(let a=0;a<o;a++)if(a==o-1)r[s[a]]=n;else{if(!r[s[a]])if(typeof n<"u")r[s[a]]={};else break;r=r[s[a]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement()),e.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,n){var r=this.parent.isGroup?this.parent.getGroupElement().clientHeight:n||this.parent.getHeadersElement().clientHeight;this.element.style.height=r+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=r-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(s){s.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(e){var n=[];return e?this.columns.forEach(r=>{n.push(r),n=n.concat(r.getColumns(!0))}):n=this.columns,n}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var n=[];return this.isGroup&&e&&(this.columns.forEach(function(r){n.push(r.getDefinition(!0))}),this.definition.columns=n),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(n){n.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,n){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(e,n){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.hide()}),this.dispatch("column-hide",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.table.initialized&&(this.element.style.width=e+"px"),this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var n=this.columns.indexOf(e);n>-1&&this.columns.splice(n,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(n){n.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var e=[];this.cells.forEach(function(n){n.row.heightInitialized&&(n.row.getElement().offsetParent!==null?(e.push(n.row),n.row.clearCellHeight()):n.row.heightInitialized=!1)}),e.forEach(function(n){n.calcHeight()}),e.forEach(function(n){n.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}):e=this.width,e}getLeftOffset(){var e=this.element.offsetLeft;return this.parent.isGroup&&(e+=this.parent.getLeftOffset()),e}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(e){this.maxWidth&&e>this.maxWidth&&(e=this.maxWidth,console.warn("the minWidth ("+e+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(n){n.setMinWidth()})}setMaxWidth(e){this.minWidth&&e<this.minWidth&&(e=this.minWidth,console.warn("the maxWidth ("+e+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(n){n.setMaxWidth()})}delete(){return new Promise((e,n)=>{this.isGroup&&this.columns.forEach(function(s){s.delete()}),this.dispatch("column-delete",this);var r=this.cells.length;for(let s=0;s<r;s++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(e){var n=new Fn(this,e);return this.cells.push(n),n}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._nextVisibleColumn(e+1):!1}_nextVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._prevVisibleColumn(e-1):!1}_prevVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,typeof this.definition.width<"u"&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(e),this.dispatch("column-width-fit-after",this)}fitToData(e){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(s=>{s.clearWidth()}));var n=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(s=>{var o=s.getWidth();o>n&&(n=o)}),n)){var r=n+1;this.maxInitialWidth&&!e&&(r=Math.min(r,this.maxInitialWidth)),this.setWidthActual(r)}}}updateDefinition(e){var n;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},this.getDefinition()),n=Object.assign(n,e),this.table.columnManager.addColumn(n,!1,this).then(r=>(n.field==this.field&&(this.field=!1),this.delete().then(()=>r.getComponent()))))}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}getComponent(){return this.component||(this.component=new $o(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof i?this.parent.getComponent():!1}}return i})(),Ri=class{constructor(t){return this._row=t,new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._row.table.componentFunctionBinder.handle("row",e._row,n)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return e?e.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(t){return this._row.watchPosition(t)}delete(){return this._row.delete()}scrollTo(t,e){return this._row.table.rowManager.scrollToRow(this._row,t,e)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}},Ie=class extends be{constructor(t,e,n="row"){super(e.table),this.parent=e,this.data={},this.type=n,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t,e){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,e),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,e)}rendered(){this.cells.forEach(t=>{t.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,n=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(n=this.calcMinHeight(),e=this.calcMaxHeight(),t?this.height=Math.max(e,n):this.height=this.manualHeight?this.height:Math.max(e,n)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var t=0;return this.cells.forEach(function(e){var n=e.getHeight();n>t&&(t=n)}),t}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var e=this.element&&te.elVisible(this.element),n={},r;return new Promise((s,o)=>{typeof t=="string"&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(n=Object.assign(n,this.data),n=Object.assign(n,t)),r=this.chain("row-data-changing",[this,n,t],null,t);for(let a in r)this.data[a]=r[a];this.dispatch("row-data-save-after",this);for(let a in t)this.table.columnManager.getColumnsByFieldRoot(a).forEach(u=>{let c=this.getCell(u.getField());if(c){let d=u.getFieldValue(r);c.getValue()!==d&&(c.setValueProcessData(d),e&&c.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){var e=!1;return t=this.table.columnManager.findColumn(t),!this.initialized&&this.cells.length===0&&this.generateCells(),e=this.cells.find(function(n){return n.column===t}),e}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var t=this.table.rowManager.nextDisplayRow(this,!0);return t||!1}prevRow(){var t=this.table.rowManager.prevDisplayRow(this,!0);return t||!1}moveToRow(t,e){var n=this.table.rowManager.findRow(t);n?(this.table.rowManager.moveRowActual(this,n,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.detachModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(t){t!=this.position&&(this.position=t,this.positionWatchers.forEach(e=>{e(this.position)}))}watchPosition(t){this.positionWatchers.push(t),t(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new Ri(this)),this.component}},eM={avg:function(i,t,e){var n=0,r=typeof e.precision<"u"?e.precision:2;return i.length&&(n=i.reduce(function(s,o){return Number(s)+Number(o)}),n=n/i.length,n=r!==!1?n.toFixed(r):n),parseFloat(n).toString()},max:function(i,t,e){var n=null,r=typeof e.precision<"u"?e.precision:!1;return i.forEach(function(s){s=Number(s),(s>n||n===null)&&(n=s)}),n!==null?r!==!1?n.toFixed(r):n:""},min:function(i,t,e){var n=null,r=typeof e.precision<"u"?e.precision:!1;return i.forEach(function(s){s=Number(s),(s<n||n===null)&&(n=s)}),n!==null?r!==!1?n.toFixed(r):n:""},sum:function(i,t,e){var n=0,r=typeof e.precision<"u"?e.precision:!1;return i.length&&i.forEach(function(s){s=Number(s),n+=isNaN(s)?0:Number(s)}),r!==!1?n.toFixed(r):n},concat:function(i,t,e){var n=0;return i.length&&(n=i.reduce(function(r,s){return String(r)+String(s)})),n},count:function(i,t,e){var n=0;return i.length&&i.forEach(function(r){r&&n++}),n},unique:function(i,t,e){var n=i.filter((r,s)=>(i||r===0)&&i.indexOf(r)===s);return n.length}},tM=(()=>{class i extends N{static moduleName="columnCalcs";static calculations=eM;constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new Nr({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(e,n){return this.topRow&&n.unshift(this.topRow),this.botRow&&n.push(this.botRow),n}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(e):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var n=e.definition,r={topCalcParams:n.topCalcParams||{},botCalcParams:n.bottomCalcParams||{}};if(n.topCalc){switch(typeof n.topCalc){case"string":i.calculations[n.topCalc]?r.topCalc=i.calculations[n.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.topCalc);break;case"function":r.topCalc=n.topCalc;break}r.topCalc&&(e.modules.columnCalcs=r,this.topCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(n.bottomCalc){switch(typeof n.bottomCalc){case"string":i.calculations[n.bottomCalc]?r.botCalc=i.calculations[n.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.bottomCalc);break;case"function":r.botCalc=n.bottomCalc;break}r.botCalc&&(e.modules.columnCalcs=r,this.botCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var e=document.createDocumentFragment();this.topInitialized||(e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=e)}recalc(e){var n,r;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(n=this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),r=this.generateRow("top",n),this.topRow=r;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(r.getElement()),r.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),r=this.generateRow("bottom",n),this.botRow=r;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(r.getElement()),r.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var e=this.table.modules.groupRows.getChildGroups();e.forEach(n=>{this.recalcGroup(n)})}}recalcGroup(e){var n,r;this.blockCheck()||e&&e.calcs&&(e.calcs.bottom&&(n=this.rowsToData(e.rows),r=this.generateRowData("bottom",n),e.calcs.bottom.updateData(r),e.calcs.bottom.reinitialize()),e.calcs.top&&(n=this.rowsToData(e.rows),r=this.generateRowData("top",n),e.calcs.top.updateData(r),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var n=[],r=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,s=this.table.modules.dataTree;return e.forEach(o=>{n.push(o.getData()),r&&o.modules.dataTree?.open&&this.rowsToData(s.getFilteredTreeChildren(o)).forEach(a=>{n.push(o)})}),n}generateRow(e,n){var r=this.generateRowData(e,n),s;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),s=new Ie(r,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),s.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),s.component=!1,s.getComponent=()=>(s.component||(s.component=new Rc(s)),s.component),s.generateCells=()=>{var o=[];this.table.columnManager.columnsByIndex.forEach(a=>{this.genColumn.setField(a.getField()),this.genColumn.hozAlign=a.hozAlign,a.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter(a.definition[e+"CalcFormatter"]),params:a.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=a.definition.cssClass;var l=new Fn(this.genColumn,s);l.getElement(),l.column=a,l.setWidth(),a.cells.push(l),o.push(l),a.visible||l.hide()}),s.cells=o},s}generateRowData(e,n){var r={},s=e=="top"?this.topCalcs:this.botCalcs,o=e=="top"?"topCalc":"botCalc",a,l;return s.forEach(function(u){var c=[];u.modules.columnCalcs&&u.modules.columnCalcs[o]&&(n.forEach(function(d){c.push(u.getFieldValue(d))}),l=o+"Params",a=typeof u.modules.columnCalcs[l]=="function"?u.modules.columnCalcs[l](c,n):u.modules.columnCalcs[l],u.setFieldValue(r,u.modules.columnCalcs[o](c,n,a)))}),r}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={},n;return this.table.options.groupBy&&this.table.modExists("groupRows")?(n=this.table.modules.groupRows.getGroups(!0),n.forEach(r=>{e[r.getKey()]=this.getGroupResults(r)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var n=e._getSelf(),r=e.getSubGroups(),s={},o={};return r.forEach(a=>{s[a.getKey()]=this.getGroupResults(a)}),o={top:n.calcs.top?n.calcs.top.getData():{},bottom:n.calcs.bottom?n.calcs.bottom.getData():{},groups:s},o}adjustForScrollbar(e){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=e+"px":this.botElement.style.paddingRight=e+"px")}}return i})(),nM=(()=>{class i extends N{static moduleName="dataTree";constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,n=this.table.options;switch(this.field=n.dataTreeChildField,this.indent=n.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),n.dataTreeBranchElement?n.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof n.dataTreeBranchElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=n.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),n.dataTreeCollapseElement?typeof n.dataTreeCollapseElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),n.dataTreeExpandElement?typeof n.dataTreeExpandElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof n.dataTreeStartExpanded){case"boolean":this.startOpen=function(r,s){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(r,s){return n.dataTreeStartExpanded[s]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(e){var n;e&&(n=this.table.rowManager.getRows(),n.forEach(r=>{this.reinitializeRowChildren(r)}))}initializeElementField(){var e=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(e?e.field:!1)}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(n=>{e=e.concat(this.getTreeChildren(n,!1,!0))}),e}rowDataChanged(e,n,r){this.redrawNeeded(r)&&(this.initializeRow(e),n&&(this.layoutRow(e),this.refreshData(!0)))}cellValueChanged(e){var n=e.column.getField();n===this.elementField&&this.layoutRow(e.row)}initializeRow(e){var n=e.getData()[this.field],r=Array.isArray(n),s=r||!r&&typeof n=="object"&&n!==null;!s&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!s&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:s?e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0):!1,controlEl:e.modules.dataTree&&s?e.modules.dataTree.controlEl:!1,branchEl:e.modules.dataTree&&s?e.modules.dataTree.branchEl:!1,parent:e.modules.dataTree?e.modules.dataTree.parent:!1,children:s}}reinitializeRowChildren(e){var n=this.getTreeChildren(e,!1,!0);n.forEach(function(r){r.reinitialize(!0)})}layoutRow(e){var n=this.elementField?e.getCell(this.elementField):e.getCells()[0],r=n.getElement(),s=e.modules.dataTree;s.branchEl&&(s.branchEl.parentNode&&s.branchEl.parentNode.removeChild(s.branchEl),s.branchEl=!1),s.controlEl&&(s.controlEl.parentNode&&s.controlEl.parentNode.removeChild(s.controlEl),s.controlEl=!1),this.generateControlElement(e,r),e.getElement().classList.add("tabulator-tree-level-"+s.index),s.index&&(this.branchEl?(s.branchEl=this.branchEl.cloneNode(!0),r.insertBefore(s.branchEl,r.firstChild),this.table.rtl?s.branchEl.style.marginRight=(s.branchEl.offsetWidth+s.branchEl.style.marginLeft)*(s.index-1)+s.index*this.indent+"px":s.branchEl.style.marginLeft=(s.branchEl.offsetWidth+s.branchEl.style.marginRight)*(s.index-1)+s.index*this.indent+"px"):this.table.rtl?r.style.paddingRight=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-right"))+s.index*this.indent+"px":r.style.paddingLeft=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-left"))+s.index*this.indent+"px")}generateControlElement(e,n){var r=e.modules.dataTree,s=r.controlEl;n=n||e.getCells()[0].getElement(),r.children!==!1&&(r.open?(r.controlEl=this.collapseEl.cloneNode(!0),r.controlEl.addEventListener("click",o=>{o.stopPropagation(),this.collapseRow(e)})):(r.controlEl=this.expandEl.cloneNode(!0),r.controlEl.addEventListener("click",o=>{o.stopPropagation(),this.expandRow(e)})),r.controlEl.addEventListener("mousedown",o=>{o.stopPropagation()}),s&&s.parentNode===n?s.parentNode.replaceChild(r.controlEl,s):n.insertBefore(r.controlEl,n.firstChild))}getRows(e){var n=[];return e.forEach((r,s)=>{var o,a;n.push(r),r instanceof Ie&&(r.create(),o=r.modules.dataTree,!o.index&&o.children!==!1&&(a=this.getChildren(r,!1,!0),a.forEach(l=>{l.create(),n.push(l)})))}),n}getChildren(e,n,r){var s=e.modules.dataTree,o=[],a=[];return s.children!==!1&&(s.open||n)&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?o=this.table.modules.filter.filter(s.children):o=s.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(o,r),o.forEach(l=>{a.push(l);var u=this.getChildren(l,!1,!0);u.forEach(c=>{a.push(c)})})),a}generateChildren(e){var n=[],r=e.getData()[this.field];return Array.isArray(r)||(r=[r]),r.forEach(s=>{var o=new Ie(s||{},this.table.rowManager);o.create(),o.modules.dataTree.index=e.modules.dataTree.index+1,o.modules.dataTree.parent=e,o.modules.dataTree.children&&(o.modules.dataTree.open=this.startOpen(o.getComponent(),o.modules.dataTree.index)),n.push(o)}),n}expandRow(e,n){var r=e.modules.dataTree;r.children!==!1&&(r.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var n=e.modules.dataTree;n.children!==!1&&(n.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var n=e.modules.dataTree;n.children!==!1&&(n.open?this.collapseRow(e):this.expandRow(e))}isRowExpanded(e){return e.modules.dataTree.open}getTreeParent(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(e){return e.modules.dataTree&&e.modules.dataTree.parent?this.getTreeParentRoot(e.modules.dataTree.parent):e}getFilteredTreeChildren(e){var n=e.modules.dataTree,r=[],s;return n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?s=this.table.modules.filter.filter(n.children):s=n.children,s.forEach(o=>{o instanceof Ie&&r.push(o)})),r}rowDelete(e){var n=e.modules.dataTree.parent,r;n&&(r=this.findChildIndex(e,n),r!==!1&&n.data[this.field].splice(r,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(e,n,r,s){var o=!1;typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),typeof s<"u"&&(o=this.findChildIndex(s,e),o!==!1&&e.data[this.field].splice(r?o:o+1,0,n)),o===!1&&(r?e.data[this.field].unshift(n):e.data[this.field].push(n)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,n){var r=!1;return typeof e=="object"?e instanceof Ie?r=e.data:e instanceof Ri?r=e._getSelf().data:typeof HTMLElement<"u"&&e instanceof HTMLElement?n.modules.dataTree&&(r=n.modules.dataTree.children.find(s=>s instanceof Ie?s.element===e:!1),r&&(r=r.data)):e===null&&(r=!1):typeof e>"u"?r=!1:r=n.data[this.field].find(s=>s.data[this.table.options.index]==e),r&&(Array.isArray(n.data[this.field])&&(r=n.data[this.field].indexOf(r)),r==-1&&(r=!1)),r}getTreeChildren(e,n,r){var s=e.modules.dataTree,o=[];return s&&s.children&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),s.children.forEach(a=>{a instanceof Ie&&(o.push(n?a.getComponent():a),r&&this.getTreeChildren(a,n,r).forEach(l=>{o.push(l)}))})),o}getChildField(){return this.field}redrawNeeded(e){return(this.field?typeof e[this.field]<"u":!1)||(this.elementField?typeof e[this.elementField]<"u":!1)}}return i})();function iM(i,t={},e){var n=t.delimiter?t.delimiter:",",r=[],s=[];i.forEach(o=>{var a=[];switch(o.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":o.columns.forEach((l,u)=>{l&&l.depth===1&&(s[u]=typeof l.value>"u"||l.value===null?"":'"'+String(l.value).split('"').join('""')+'"')});break;case"row":o.columns.forEach(l=>{if(l){switch(typeof l.value){case"object":l.value=l.value!==null?JSON.stringify(l.value):"";break;case"undefined":l.value="";break}a.push('"'+String(l.value).split('"').join('""')+'"')}}),r.push(a.join(n));break}}),s.length&&r.unshift(s.join(n)),r=r.join(`
`),t.bom&&(r="\uFEFF"+r),e(r,"text/csv")}function rM(i,t,e){var n=[];i.forEach(r=>{var s={};switch(r.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":r.columns.forEach(o=>{o&&(s[o.component.getTitleDownload()||o.component.getField()]=o.value)}),n.push(s);break}}),n=JSON.stringify(n,null,"	"),e(n,"application/json")}function sM(i,t={},e){var n=[],r=[],s={},o=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},a=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=t.jsPDF||{},u=t.title?t.title:"",c,d;l.orientation||(l.orientation=t.orientation||"landscape"),l.unit||(l.unit="pt"),i.forEach(f=>{switch(f.type){case"header":n.push(h(f));break;case"group":r.push(h(f,o));break;case"calc":r.push(h(f,a));break;case"row":r.push(h(f));break}});function h(f,p){var m=[];return f.columns.forEach(b=>{var g;if(b){switch(typeof b.value){case"object":b.value=b.value!==null?JSON.stringify(b.value):"";break;case"undefined":b.value="";break}g={content:b.value,colSpan:b.width,rowSpan:b.height},p&&(g.styles=p),m.push(g)}}),m}c=this.dependencyRegistry.lookup("jspdf","jsPDF"),d=new c(l),t.autoTable&&(typeof t.autoTable=="function"?s=t.autoTable(d)||{}:s=t.autoTable),u&&(s.didDrawPage=function(f){d.text(u,40,30)}),s.head=n,s.body=r,d.autoTable(s),t.documentProcessing&&t.documentProcessing(d),e(d.output("arraybuffer"),"application/pdf")}function oM(i,t,e){var n=this,r=t.sheetName||"Sheet1",s=this.dependencyRegistry.lookup("XLSX"),o=s.utils.book_new(),a=new be(this),l="compress"in t?t.compress:!0,u=t.writeOptions||{bookType:"xlsx",bookSST:!0,compression:l},c;u.type="binary",o.SheetNames=[],o.Sheets={};function d(){var p=[],m=[],b={},g={s:{c:0,r:0},e:{c:i[0]?i[0].columns.reduce((v,M)=>v+(M&&M.width?M.width:1),0):0,r:i.length}};return i.forEach((v,M)=>{var H=[];v.columns.forEach(function(B,Q){B?(H.push(!(B.value instanceof Date)&&typeof B.value=="object"?JSON.stringify(B.value):B.value),(B.width>1||B.height>-1)&&(B.height>1||B.width>1)&&m.push({s:{r:M,c:Q},e:{r:M+B.height-1,c:Q+B.width-1}})):H.push("")}),p.push(H)}),s.utils.sheet_add_aoa(b,p),b["!ref"]=s.utils.encode_range(g),m.length&&(b["!merges"]=m),b}if(t.sheetOnly){e(d());return}if(t.sheets)for(var h in t.sheets)t.sheets[h]===!0?(o.SheetNames.push(h),o.Sheets[h]=d()):(o.SheetNames.push(h),a.commsSend(t.sheets[h],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:n.active,intercept:function(p){o.Sheets[h]=p}}));else o.SheetNames.push(r),o.Sheets[r]=d();t.documentProcessing&&(o=t.documentProcessing(o));function f(p){for(var m=new ArrayBuffer(p.length),b=new Uint8Array(m),g=0;g!=p.length;++g)b[g]=p.charCodeAt(g)&255;return m}c=s.write(o,u),e(f(c),"application/octet-stream")}function aM(i,t,e){this.modExists("export",!0)&&e(this.modules.export.generateHTMLTable(i),"text/html")}function lM(i,t,e){let n=[];i.forEach(r=>{let s={};switch(r.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":r.columns.forEach(o=>{o&&(s[o.component.getTitleDownload()||o.component.getField()]=o.value)}),n.push(JSON.stringify(s));break}}),e(n.join(`
`),"application/x-ndjson")}var uM={csv:iM,json:rM,jsonLines:lM,pdf:sM,xlsx:oM,html:aM},cM=(()=>{class i extends N{static moduleName="download";static downloaders=uM;constructor(e){super(e),this.registerTableOption("downloadEncoder",function(n,r){return new Blob([n],{type:r})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(e,n,r,s){this.download(e,n,r,s,!0)}download(e,n,r,s,o){var a=!1;function l(c,d){o?o===!0?this.triggerDownload(c,d,e,n,!0):o(c):this.triggerDownload(c,d,e,n)}if(typeof e=="function"?a=e:i.downloaders[e]?a=i.downloaders[e]:console.warn("Download Error - No such download type found: ",e),a){var u=this.generateExportList(s);a.call(this.table,u,r||{},l.bind(this))}}generateExportList(e){var n=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),r=this.table.options.groupHeaderDownload;return r&&!Array.isArray(r)&&(r=[r]),n.forEach(s=>{var o;s.type==="group"&&(o=s.columns[0],r&&r[s.indent]&&(o.value=r[s.indent](o.value,s.component._group.getRowCount(),s.component._group.getData(),s.component)))}),n}triggerDownload(e,n,r,s,o){var a=document.createElement("a"),l=this.table.options.downloadEncoder(e,n);l&&(o?window.open(window.URL.createObjectURL(l)):(s=s||"Tabulator."+(typeof r=="function"?"txt":r),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(l,s):(a.setAttribute("href",window.URL.createObjectURL(l)),a.setAttribute("download",s),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a))),this.dispatchExternal("downloadComplete"))}commsReceived(e,n,r){switch(n){case"intercept":this.download(r.type,"",r.options,r.active,r.intercept);break}}}return i})();function Yo(i,t){var e=t.mask,n=typeof t.maskLetterChar<"u"?t.maskLetterChar:"A",r=typeof t.maskNumberChar<"u"?t.maskNumberChar:"9",s=typeof t.maskWildcardChar<"u"?t.maskWildcardChar:"*";function o(a){var l=e[a];typeof l<"u"&&l!==s&&l!==n&&l!==r&&(i.value=i.value+""+l,o(a+1))}i.addEventListener("keydown",a=>{var l=i.value.length,u=a.key;if(a.keyCode>46&&!a.ctrlKey&&!a.metaKey){if(l>=e.length)return a.preventDefault(),a.stopPropagation(),!1;switch(e[l]){case n:if(u.toUpperCase()==u.toLowerCase())return a.preventDefault(),a.stopPropagation(),!1;break;case r:if(isNaN(u))return a.preventDefault(),a.stopPropagation(),!1;break;case s:break;default:if(u!==e[l])return a.preventDefault(),a.stopPropagation(),!1}}}),i.addEventListener("keyup",a=>{a.keyCode>46&&t.maskAutoFill&&o(i.value.length)}),i.placeholder||(i.placeholder=e),t.maskAutoFill&&o(i.value.length)}function dM(i,t,e,n,r){var s=i.getValue(),o=document.createElement("input");if(o.setAttribute("type",r.search?"search":"text"),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let l in r.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+r.elementAttributes["+"+l])):o.setAttribute(l,r.elementAttributes[l]);o.value=typeof s<"u"?s:"",t(function(){i.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%",r.selectContents&&o.select())});function a(l){(s===null||typeof s>"u")&&o.value!==""||o.value!==s?e(o.value)&&(s=o.value):n()}return o.addEventListener("change",a),o.addEventListener("blur",a),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:n();break;case 35:case 36:l.stopPropagation();break}}),r.mask&&Yo(o,r),o}function hM(i,t,e,n,r){var s=i.getValue(),o=r.verticalNavigation||"hybrid",a=String(s!==null&&typeof s<"u"?s:""),l=document.createElement("textarea"),u=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",r.elementAttributes&&typeof r.elementAttributes=="object")for(let d in r.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+r.elementAttributes["+"+d])):l.setAttribute(d,r.elementAttributes[d]);l.value=a,t(function(){i.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",i.getRow().normalizeHeight(),r.selectContents&&l.select())});function c(d){(s===null||typeof s>"u")&&l.value!==""||l.value!==s?(e(l.value)&&(s=l.value),setTimeout(function(){i.getRow().normalizeHeight()},300)):n()}return l.addEventListener("change",c),l.addEventListener("blur",c),l.addEventListener("keyup",function(){l.style.height="";var d=l.scrollHeight;l.style.height=d+"px",d!=u&&(u=d,i.getRow().normalizeHeight())}),l.addEventListener("keydown",function(d){switch(d.keyCode){case 13:d.shiftKey&&r.shiftEnterSubmit&&c();break;case 27:n();break;case 38:(o=="editor"||o=="hybrid"&&l.selectionStart)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 40:(o=="editor"||o=="hybrid"&&l.selectionStart!==l.value.length)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 35:case 36:d.stopPropagation();break}}),r.mask&&Yo(l,r),l}function fM(i,t,e,n,r){var s=i.getValue(),o=r.verticalNavigation||"editor",a=document.createElement("input");if(a.setAttribute("type","number"),typeof r.max<"u"&&a.setAttribute("max",r.max),typeof r.min<"u"&&a.setAttribute("min",r.min),typeof r.step<"u"&&a.setAttribute("step",r.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let c in r.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),a.setAttribute(c,a.getAttribute(c)+r.elementAttributes["+"+c])):a.setAttribute(c,r.elementAttributes[c]);a.value=s;var l=function(c){u()};t(function(){i.getType()==="cell"&&(a.removeEventListener("blur",l),a.focus({preventScroll:!0}),a.style.height="100%",a.addEventListener("blur",l),r.selectContents&&a.select())});function u(){var c=a.value;!isNaN(c)&&c!==""&&(c=Number(c)),c!==s?e(c)&&(s=c):n()}return a.addEventListener("keydown",function(c){switch(c.keyCode){case 13:u();break;case 27:n();break;case 38:case 40:o=="editor"&&(c.stopImmediatePropagation(),c.stopPropagation());break;case 35:case 36:c.stopPropagation();break}}),r.mask&&Yo(a,r),a}function pM(i,t,e,n,r){var s=i.getValue(),o=document.createElement("input");if(o.setAttribute("type","range"),typeof r.max<"u"&&o.setAttribute("max",r.max),typeof r.min<"u"&&o.setAttribute("min",r.min),typeof r.step<"u"&&o.setAttribute("step",r.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let l in r.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+r.elementAttributes["+"+l])):o.setAttribute(l,r.elementAttributes[l]);o.value=s,t(function(){i.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%")});function a(){var l=o.value;!isNaN(l)&&l!==""&&(l=Number(l)),l!=s?e(l)&&(s=l):n()}return o.addEventListener("blur",function(l){a()}),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:n();break}}),o}function mM(i,t,e,n,r){var s=r.format,o=r.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l=i.getValue(),u=document.createElement("input");function c(h){var f;return a.isDateTime(h)?f=h:s==="iso"?f=a.fromISO(String(h)):f=a.fromFormat(String(h),s),f.toFormat("yyyy-MM-dd")}if(u.type="date",u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",r.max&&u.setAttribute("max",s?c(r.max):r.max),r.min&&u.setAttribute("min",s?c(r.min):r.min),r.elementAttributes&&typeof r.elementAttributes=="object")for(let h in r.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),u.setAttribute(h,u.getAttribute(h)+r.elementAttributes["+"+h])):u.setAttribute(h,r.elementAttributes[h]);l=typeof l<"u"?l:"",s&&(a?l=c(l):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),u.value=l,t(function(){i.getType()==="cell"&&(u.focus({preventScroll:!0}),u.style.height="100%",r.selectContents&&u.select())});function d(){var h=u.value,f;if((l===null||typeof l>"u")&&h!==""||h!==l){if(h&&s)switch(f=a.fromFormat(String(h),"yyyy-MM-dd"),s){case!0:h=f;break;case"iso":h=f.toISO();break;default:h=f.toFormat(s)}e(h)&&(l=u.value)}else n()}return u.addEventListener("blur",function(h){(h.relatedTarget||h.rangeParent||h.explicitOriginalTarget!==u)&&d()}),u.addEventListener("keydown",function(h){switch(h.keyCode){case 13:d();break;case 27:n();break;case 35:case 36:h.stopPropagation();break;case 38:case 40:o=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break}}),u}function gM(i,t,e,n,r){var s=r.format,o=r.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l,u=i.getValue(),c=document.createElement("input");if(c.type="time",c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let h in r.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),c.setAttribute(h,c.getAttribute(h)+r.elementAttributes["+"+h])):c.setAttribute(h,r.elementAttributes[h]);u=typeof u<"u"?u:"",s&&(a?(a.isDateTime(u)?l=u:s==="iso"?l=a.fromISO(String(u)):l=a.fromFormat(String(u),s),u=l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),c.value=u,t(function(){i.getType()=="cell"&&(c.focus({preventScroll:!0}),c.style.height="100%",r.selectContents&&c.select())});function d(){var h=c.value,f;if((u===null||typeof u>"u")&&h!==""||h!==u){if(h&&s)switch(f=a.fromFormat(String(h),"hh:mm"),s){case!0:h=f;break;case"iso":h=f.toISO();break;default:h=f.toFormat(s)}e(h)&&(u=c.value)}else n()}return c.addEventListener("blur",function(h){(h.relatedTarget||h.rangeParent||h.explicitOriginalTarget!==c)&&d()}),c.addEventListener("keydown",function(h){switch(h.keyCode){case 13:d();break;case 27:n();break;case 35:case 36:h.stopPropagation();break;case 38:case 40:o=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break}}),c}function bM(i,t,e,n,r){var s=r.format,o=r.verticalNavigation||"editor",a=s?this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"):null,l,u=i.getValue(),c=document.createElement("input");if(c.type="datetime-local",c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let h in r.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),c.setAttribute(h,c.getAttribute(h)+r.elementAttributes["+"+h])):c.setAttribute(h,r.elementAttributes[h]);u=typeof u<"u"?u:"",s&&(a?(a.isDateTime(u)?l=u:s==="iso"?l=a.fromISO(String(u)):l=a.fromFormat(String(u),s),u=l.toFormat("yyyy-MM-dd")+"T"+l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),c.value=u,t(function(){i.getType()==="cell"&&(c.focus({preventScroll:!0}),c.style.height="100%",r.selectContents&&c.select())});function d(){var h=c.value,f;if((u===null||typeof u>"u")&&h!==""||h!==u){if(h&&s)switch(f=a.fromISO(String(h)),s){case!0:h=f;break;case"iso":h=f.toISO();break;default:h=f.toFormat(s)}e(h)&&(u=c.value)}else n()}return c.addEventListener("blur",function(h){(h.relatedTarget||h.rangeParent||h.explicitOriginalTarget!==c)&&d()}),c.addEventListener("keydown",function(h){switch(h.keyCode){case 13:d();break;case 27:n();break;case 35:case 36:h.stopPropagation();break;case 38:case 40:o=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break}}),c}var vM=class{constructor(t,e,n,r,s,o){this.edit=t,this.table=t.table,this.cell=e,this.params=this._initializeParams(o),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=e.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:r,cancel:s},this._deprecatedOptionsCheck(),this._initializeValue(),n(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var t=this.cell.getValue();typeof t>"u"&&typeof this.params.defaultValue<"u"&&(t=this.params.defaultValue),this.initialValues=this.params.multiselect?t:[t],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var t=this.cell.getElement();function e(n){n.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),t.addEventListener("click",e),setTimeout(()=>{t.removeEventListener("click",e)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var t=document.createElement("div");return t.classList.add("tabulator-edit-list"),t.addEventListener("mousedown",this._preventBlur.bind(this)),t.addEventListener("keydown",this._inputKeyDown.bind(this)),t}_setListWidth(){var t=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=t.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=t.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var t=this.params.elementAttributes,e=document.createElement("input");if(e.setAttribute("type",this.params.clearable?"search":"text"),e.style.padding="4px",e.style.width="100%",e.style.boxSizing="border-box",this.params.autocomplete||(e.style.cursor="default",e.style.caretColor="transparent"),t&&typeof t=="object")for(let n in t)n.charAt(0)=="+"?(n=n.slice(1),e.setAttribute(n,e.getAttribute(n)+t["+"+n])):e.setAttribute(n,t[n]);return this.params.mask&&Yo(e,this.params),this._bindInputEvents(e),e}_initializeParams(t){var e=["values","valuesURL","valuesLookup"],n;return t=Object.assign({},t),t.verticalNavigation=t.verticalNavigation||"editor",t.placeholderLoading=typeof t.placeholderLoading>"u"?"Searching ...":t.placeholderLoading,t.placeholderEmpty=typeof t.placeholderEmpty>"u"?"No Results Found":t.placeholderEmpty,t.filterDelay=typeof t.filterDelay>"u"?300:t.filterDelay,t.emptyValue=Object.keys(t).includes("emptyValue")?t.emptyValue:"",n=Object.keys(t).filter(r=>e.includes(r)).length,n?n>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),t.autocomplete?t.multiselect&&(t.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(t.freetext&&(t.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),t.filterFunc&&(t.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),t.filterRemote&&(t.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),t.mask&&(t.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),t.allowEmpty&&(t.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),t.listOnEmpty&&(t.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),t.filterRemote&&!(typeof t.valuesLookup=="function"||t.valuesURL)&&(t.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),t}_bindInputEvents(t){t.addEventListener("focus",this._inputFocus.bind(this)),t.addEventListener("click",this._inputClick.bind(this)),t.addEventListener("blur",this._inputBlur.bind(this)),t.addEventListener("keydown",this._inputKeyDown.bind(this)),t.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&t.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(t){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(t){t.stopPropagation()}_inputBlur(t){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(t){switch(t.keyCode){case 38:this._keyUp(t);break;case 40:this._keyDown(t);break;case 37:case 39:this._keySide(t);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(t);break;case 9:this._keyTab(t);break;default:this._keySelectLetter(t)}}_inputKeyUp(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(t)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(t){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(t){var e=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e>0&&this._focusItem(this.displayItems[e-1]))}_keyDown(t){var e=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&e<this.displayItems.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<this.displayItems.length-1&&(e==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[e+1])))}_keySide(t){this.params.autocomplete||(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())}_keyEnter(t){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(t){this._cancel()}_keyHomeEnd(t){this.params.autocomplete&&t.stopImmediatePropagation()}_keySelectLetter(t){this.params.autocomplete||(t.preventDefault(),t.keyCode>=38&&t.keyCode<=90&&this._scrollToValue(t.keyCode))}_keyAutoCompLetter(t){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(t){clearTimeout(this.filterTimeout);var e=String.fromCharCode(t).toLowerCase();this.filterTerm+=e.toLowerCase();var n=this.displayItems.find(r=>typeof r.label<"u"&&r.label.toLowerCase().startsWith(this.filterTerm));n&&this._focusItem(n),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(t){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=t,t&&t.element&&(t.element.classList.add("focused"),t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(t=>{Number.isInteger(t)||console.error("List generation error",t)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(t){var e=[],n=++this.listIteration;return this.filtered=!1,this.params.values?e=this.params.values:this.params.valuesURL?e=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?e=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(e=this._uniqueColumnValues(this.params.valuesLookupField)),e instanceof Promise?(t||this._addPlaceholder(this.params.placeholderLoading),e.then().then(r=>this.listIteration===n?this._parseList(r):Promise.reject(n))):Promise.resolve(this._parseList(e))}_addPlaceholder(t){var e=document.createElement("div");typeof t=="function"&&(t=t(this.cell.getComponent(),this.listEl)),t&&(this._clearList(),t instanceof HTMLElement?e=t:(e.classList.add("tabulator-edit-list-placeholder"),e.innerHTML=t),this.listEl.appendChild(e),this._showList())}_ajaxRequest(t,e){var n=this.params.filterRemote?{term:e}:{};return t=ug(t,{},n),fetch(t).then(r=>r.ok?r.json().catch(s=>(console.warn("List Ajax Load Error - Invalid JSON returned",s),Promise.reject(s))):(console.error("List Ajax Load Error - Connection Error: "+r.status,r.statusText),Promise.reject(r))).catch(r=>(console.error("List Ajax Load Error - Connection Error: ",r),Promise.reject(r)))}_uniqueColumnValues(t){var e={},n=this.table.getData(this.params.valuesLookup),r;return t?r=this.table.columnManager.getColumnByField(t):r=this.cell.getColumn()._getSelf(),r?n.forEach(s=>{var o=r.getFieldValue(s);this._emptyValueCheck(o)||(this.params.multiselect&&Array.isArray(o)?o.forEach(a=>{this._emptyValueCheck(a)||(e[a]=!0)}):e[o]=!0)}):(console.warn("unable to find matching column to create select lookup list:",t),e=[]),Object.keys(e)}_emptyValueCheck(t){return t===null||typeof t>"u"||t===""}_parseList(t){var e=[];return Array.isArray(t)||(t=Object.entries(t).map(([n,r])=>({label:r,value:n}))),t.forEach(n=>{typeof n!="object"&&(n={label:n,value:n}),this._parseListItem(n,e,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=e,e}_parseListItem(t,e,n){var r={};t.options?r=this._parseListGroup(t,n+1):(r={label:t.label,value:t.value,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1,selected:!1,visible:!0,level:n,original:t},this.initialValues&&this.initialValues.indexOf(t.value)>-1&&this._chooseItem(r,!0)),e.push(r)}_parseListGroup(t,e){var n={label:t.label,group:!0,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1,visible:!0,level:e,options:[],original:t};return t.options.forEach(r=>{this._parseListItem(r,n.options,e)}),n}_sortOptions(t){var e;return this.params.sort&&(e=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(e,t)),t}_sortGroup(t,e){e.sort((n,r)=>t(n.label,r.label,n.value,r.value,n.original,r.original)),e.forEach(n=>{n.group&&this._sortGroup(t,n.options)})}_defaultSortFunction(t,e){var n,r,s,o,a=0,l,u=/(\d+)|(\D+)/g,c=/\d/,d=0;if(this.params.sort==="desc"&&([t,e]=[e,t]),!t&&t!==0)d=!e&&e!==0?0:-1;else if(!e&&e!==0)d=1;else{if(isFinite(t)&&isFinite(e))return t-e;if(n=String(t).toLowerCase(),r=String(e).toLowerCase(),n===r)return 0;if(!(c.test(n)&&c.test(r)))return n>r?1:-1;for(n=n.match(u),r=r.match(u),l=n.length>r.length?r.length:n.length;a<l;)if(s=n[a],o=r[a++],s!==o)return isFinite(s)&&isFinite(o)?(s.charAt(0)==="0"&&(s="."+s),o.charAt(0)==="0"&&(o="."+o),s-o):s>o?1:-1;return n.length>r.length}return d}_filterOptions(){var t=this.params.filterFunc||this._defaultFilterFunc,e=this.input.value;return e?(this.filtered=!0,this.data.forEach(n=>{this._filterItem(t,e,n)})):this.filtered=!1,this.data}_filterItem(t,e,n){var r=!1;return n.group?(n.options.forEach(s=>{this._filterItem(t,e,s)&&(r=!0)}),n.visible=r):n.visible=t(e,n.label,n.value,n.original),n.visible}_defaultFilterFunc(t,e,n,r){return t=String(t).toLowerCase(),e!==null&&typeof e<"u"&&(String(e).toLowerCase().indexOf(t)>-1||String(n).toLowerCase().indexOf(t)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(t){this._clearList(),t.forEach(e=>{this._buildItem(e)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(t){var e=t.element,n;if(!this.filtered||t.visible){if(!e){if(e=document.createElement("div"),e.tabIndex=0,n=this.params.itemFormatter?this.params.itemFormatter(t.label,t.value,t.original,e):t.label,n instanceof HTMLElement?e.appendChild(n):e.innerHTML=n,t.group?e.classList.add("tabulator-edit-list-group"):e.classList.add("tabulator-edit-list-item"),e.classList.add("tabulator-edit-list-group-level-"+t.level),t.elementAttributes&&typeof t.elementAttributes=="object")for(let r in t.elementAttributes)r.charAt(0)=="+"?(r=r.slice(1),e.setAttribute(r,this.input.getAttribute(r)+t.elementAttributes["+"+r])):e.setAttribute(r,t.elementAttributes[r]);t.group?e.addEventListener("click",this._groupClick.bind(this,t)):e.addEventListener("click",this._itemClick.bind(this,t)),e.addEventListener("mousedown",this._preventBlur.bind(this)),t.element=e}this._styleItem(t),this.listEl.appendChild(e),t.group?t.options.forEach(r=>{this._buildItem(r)}):this.displayItems.push(t)}}_showList(){var t=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),t||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(t){t&&t.element&&(t.selected?t.element.classList.add("active"):t.element.classList.remove("active"))}_itemClick(t,e){e.stopPropagation(),this._chooseItem(t)}_groupClick(t,e){e.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(t=>{t.selected=!1,this._styleItem(t)}),this.currentItems=[],this.focusedItem=null}_chooseItem(t,e){var n;this.typing=!1,this.params.multiselect?(n=this.currentItems.indexOf(t),n>-1?(this.currentItems.splice(n,1),t.selected=!1):(this.currentItems.push(t),t.selected=!0),this.input.value=this.currentItems.map(r=>r.label).join(","),this._styleItem(t)):(this.currentItems=[t],t.selected=!0,this.input.value=t.label,this._styleItem(t),e||this._resolveValue()),this._focusItem(t)}_resolveValue(t){var e,n;if(this.popup&&this.popup.hide(!0),this.params.multiselect)e=this.currentItems.map(r=>r.value);else if(t&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")e=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?e=this.currentItems[0].value:(n=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,n===null||typeof n>"u"||n===""?e=n:e=this.params.emptyValue);e===""&&(e=this.params.emptyValue),this.actions.success(e),this.isFilter&&(this.initialValues=e&&!Array.isArray(e)?[e]:e,this.currentItems=[])}};function yM(i,t,e,n,r){var s=new vM(this,i,t,e,n,r);return s.input}function CM(i,t,e,n,r){var s=this,o=i.getElement(),a=i.getValue(),l=o.getElementsByTagName("svg").length||5,u=o.getElementsByTagName("svg")[0]?o.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],d=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(g){c.forEach(function(v,M){M<g?(s.table.browser=="ie"?v.setAttribute("class","tabulator-star-active"):v.classList.replace("tabulator-star-inactive","tabulator-star-active"),v.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(s.table.browser=="ie"?v.setAttribute("class","tabulator-star-inactive"):v.classList.replace("tabulator-star-active","tabulator-star-inactive"),v.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function p(g){var v=document.createElement("span"),M=h.cloneNode(!0);c.push(M),v.addEventListener("mouseenter",function(H){H.stopPropagation(),H.stopImmediatePropagation(),f(g)}),v.addEventListener("mousemove",function(H){H.stopPropagation(),H.stopImmediatePropagation()}),v.addEventListener("click",function(H){H.stopPropagation(),H.stopImmediatePropagation(),e(g),o.blur()}),v.appendChild(M),d.appendChild(v)}function m(g){a=g,f(g)}if(o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",h.setAttribute("width",u),h.setAttribute("height",u),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",r.elementAttributes&&typeof r.elementAttributes=="object")for(let g in r.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),d.setAttribute(g,d.getAttribute(g)+r.elementAttributes["+"+g])):d.setAttribute(g,r.elementAttributes[g]);for(var b=1;b<=l;b++)p(b);return a=Math.min(parseInt(a),l),f(a),d.addEventListener("mousemove",function(g){f(0)}),d.addEventListener("click",function(g){e(0)}),o.addEventListener("blur",function(g){n()}),o.addEventListener("keydown",function(g){switch(g.keyCode){case 39:m(a+1);break;case 37:m(a-1);break;case 13:e(a);break;case 27:n();break}}),d}function wM(i,t,e,n,r){var s=i.getElement(),o=typeof r.max>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("max")||100:r.max,a=typeof r.min>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("min")||0:r.min,l=(o-a)/100,u=i.getValue()||0,c=document.createElement("div"),d=document.createElement("div"),h,f;function p(){var m=window.getComputedStyle(s,null),b=l*Math.round(d.offsetWidth/((s.clientWidth-parseInt(m.getPropertyValue("padding-left"))-parseInt(m.getPropertyValue("padding-right")))/100))+a;e(b),s.setAttribute("aria-valuenow",b),s.setAttribute("aria-label",u)}if(c.style.position="absolute",c.style.right="0",c.style.top="0",c.style.bottom="0",c.style.width="5px",c.classList.add("tabulator-progress-handle"),d.style.display="inline-block",d.style.position="relative",d.style.height="100%",d.style.backgroundColor="#488CE9",d.style.maxWidth="100%",d.style.minWidth="0%",r.elementAttributes&&typeof r.elementAttributes=="object")for(let m in r.elementAttributes)m.charAt(0)=="+"?(m=m.slice(1),d.setAttribute(m,d.getAttribute(m)+r.elementAttributes["+"+m])):d.setAttribute(m,r.elementAttributes[m]);return s.style.padding="4px 4px",u=Math.min(parseFloat(u),o),u=Math.max(parseFloat(u),a),u=Math.round((u-a)/l),d.style.width=u+"%",s.setAttribute("aria-valuemin",a),s.setAttribute("aria-valuemax",o),d.appendChild(c),c.addEventListener("mousedown",function(m){h=m.screenX,f=d.offsetWidth}),c.addEventListener("mouseover",function(){c.style.cursor="ew-resize"}),s.addEventListener("mousemove",function(m){h&&(d.style.width=f+m.screenX-h+"px")}),s.addEventListener("mouseup",function(m){h&&(m.stopPropagation(),m.stopImmediatePropagation(),h=!1,f=!1,p())}),s.addEventListener("keydown",function(m){switch(m.keyCode){case 39:m.preventDefault(),d.style.width=d.clientWidth+s.clientWidth/100+"px";break;case 37:m.preventDefault(),d.style.width=d.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:p();break;case 27:n();break}}),s.addEventListener("blur",function(){n()}),d}function EM(i,t,e,n,r){var s=i.getValue(),o=document.createElement("input"),a=r.tristate,l=typeof r.indeterminateValue>"u"?null:r.indeterminateValue,u=!1,c=Object.keys(r).includes("trueValue"),d=Object.keys(r).includes("falseValue");if(o.setAttribute("type","checkbox"),o.style.marginTop="5px",o.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let f in r.elementAttributes)f.charAt(0)=="+"?(f=f.slice(1),o.setAttribute(f,o.getAttribute(f)+r.elementAttributes["+"+f])):o.setAttribute(f,r.elementAttributes[f]);o.value=s,a&&(typeof s>"u"||s===l||s==="")&&(u=!0,o.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&t(function(){i.getType()==="cell"&&o.focus({preventScroll:!0})}),o.checked=c?s===r.trueValue:s===!0||s==="true"||s==="True"||s===1;function h(f){var p=o.checked;return c&&p?p=r.trueValue:d&&!p&&(p=r.falseValue),a?f?u?l:p:o.checked&&!u?(o.checked=!1,o.indeterminate=!0,u=!0,l):(u=!1,p):p}return o.addEventListener("change",function(f){e(h())}),o.addEventListener("blur",function(f){e(h(!0))}),o.addEventListener("keydown",function(f){f.keyCode==13&&e(h()),f.keyCode==27&&n()}),o}function DM(i,t,e,n,r){var s=i._getSelf().column,o,a,l;function u(c){var d=c.getValue(),h="input";switch(typeof d){case"number":h="number";break;case"boolean":h="tickCross";break;case"string":d.includes(`
`)&&(h="textarea");break}return h}return o=r.editorLookup?r.editorLookup(i):u(i),r.paramsLookup&&(l=typeof r.paramsLookup=="function"?r.paramsLookup(o,i):r.paramsLookup[o]),a=this.table.modules.edit.lookupEditor(o,s),a.call(this,i,t,e,n,l||{})}var MM={input:dM,textarea:hM,number:fM,range:pM,date:mM,time:gM,datetime:bM,list:yM,star:CM,progress:wM,tickCross:EM,adaptable:DM},SM=(()=>{class i extends N{static moduleName="edit";static editors=MM;constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=i.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(e){if(this.currentCell)return!0}keybindingNavigateNext(e){var n=this.currentCell,r=this.options("tabEndNewRow");n&&(this.navigateNext(n,e)||r&&(n.getElement().firstChild.blur(),this.invalidEdit||(r===!0?r=this.table.addRow({}):typeof r=="function"?r=this.table.addRow(r(n.row.getComponent())):r=this.table.addRow(Object.assign({},r)),r.then(()=>{setTimeout(()=>{n.getComponent().navigateNext()})}))))}cellIsEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(e){this.allowEdit(e)?e.getElement().classList.add("tabulator-editable"):e.getElement().classList.remove("tabulator-editable")}clearCellEdited(e){e||(e=this.table.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.table.modules.edit.clearEdited(n._getSelf())})}navigatePrev(e=this.currentCell,n){var r,s;if(e){if(n&&n.preventDefault(),r=this.navigateLeft(),r)return!0;if(s=this.table.rowManager.prevDisplayRow(e.row,!0),s&&(r=this.findPrevEditableCell(s,s.cells.length),r))return r.getComponent().edit(),!0}return!1}navigateNext(e=this.currentCell,n){var r,s;if(e){if(n&&n.preventDefault(),r=this.navigateRight(),r)return!0;if(s=this.table.rowManager.nextDisplayRow(e.row,!0),s&&(r=this.findNextEditableCell(s,-1),r))return r.getComponent().edit(),!0}return!1}navigateLeft(e=this.currentCell,n){var r,s;return e&&(n&&n.preventDefault(),r=e.getIndex(),s=this.findPrevEditableCell(e.row,r),s)?(s.getComponent().edit(),!0):!1}navigateRight(e=this.currentCell,n){var r,s;return e&&(n&&n.preventDefault(),r=e.getIndex(),s=this.findNextEditableCell(e.row,r),s)?(s.getComponent().edit(),!0):!1}navigateUp(e=this.currentCell,n){var r,s;return e&&(n&&n.preventDefault(),r=e.getIndex(),s=this.table.rowManager.prevDisplayRow(e.row,!0),s)?(s.cells[r].getComponent().edit(),!0):!1}navigateDown(e=this.currentCell,n){var r,s;return e&&(n&&n.preventDefault(),r=e.getIndex(),s=this.table.rowManager.nextDisplayRow(e.row,!0),s)?(s.cells[r].getComponent().edit(),!0):!1}findNextEditableCell(e,n){var r=!1;if(n<e.cells.length-1)for(var s=n+1;s<e.cells.length;s++){let o=e.cells[s];if(o.column.modules.edit&&te.elVisible(o.getElement())&&this.allowEdit(o)){r=o;break}}return r}findPrevEditableCell(e,n){var r=!1;if(n>0)for(var s=n-1;s>=0;s--){let o=e.cells[s];if(o.column.modules.edit&&te.elVisible(o.getElement())&&this.allowEdit(o)){r=o;break}}return r}initializeColumnCheck(e){typeof e.definition.editor<"u"&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}rowEditableCheck(e){e.getCells().forEach(n=>{n.column.modules.edit&&typeof n.column.modules.edit.check=="function"&&this.updateCellClass(n)})}initializeColumn(e){var n=Object.keys(e.definition).includes("editorEmptyValue"),r={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{},convertEmptyValues:n,editorEmptyValue:e.definition.editorEmptyValue,editorEmptyValueFunc:e.definition.editorEmptyValueFunc};r.editor=this.lookupEditor(e.definition.editor,e),r.editor&&(e.modules.edit=r)}lookupEditor(e,n){var r;switch(typeof e){case"string":this.editors[e]?r=this.editors[e]:console.warn("Editor Error - No such editor found: ",e);break;case"function":r=e;break;case"boolean":e===!0&&(typeof n.definition.formatter!="function"?this.editors[n.definition.formatter]?r=this.editors[n.definition.formatter]:r=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",n.definition.formatter));break}return r}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(e){var n=this.currentCell,r;if(this.invalidEdit=!1,n){for(this.currentCell=!1,r=n.getElement(),this.dispatch("edit-editor-clear",n,e),r.classList.remove("tabulator-editing");r.firstChild;)r.removeChild(r.firstChild);n.row.getElement().classList.remove("tabulator-editing"),n.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,n=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),(e.column.definition.editor=="textarea"||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,n),this.dispatch("edit-cancelled",e),this.dispatchExternal("cellEditCancelled",n)}}bindEditor(e){if(e.column.modules.edit){var n=this,r=e.getElement(!0);this.updateCellClass(e),r.setAttribute("tabindex",0),r.addEventListener("mousedown",function(s){s.button===2?s.preventDefault():n.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&r.addEventListener("dblclick",function(s){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),n.edit(e,s,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&r.addEventListener("click",function(s){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),n.edit(e,s,!1))}),this.options("editTriggerEvent")==="focus"&&r.addEventListener("focus",function(s){n.recursionBlock||n.edit(e,s,!1)})}}focusCellNoEvent(e,n){this.recursionBlock=!0,n&&this.table.browser==="ie"||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,n){this.focusCellNoEvent(e),this.edit(e,!1,n)}focusScrollAdjust(e){if(this.table.rowManager.getRenderMode()=="virtual"){var n=this.table.rowManager.element.scrollTop,r=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,s=e.row.getElement();s.offsetTop<n?this.table.rowManager.element.scrollTop-=n-s.offsetTop:s.offsetTop+s.offsetHeight>r&&(this.table.rowManager.element.scrollTop+=s.offsetTop+s.offsetHeight-r);var o=this.table.rowManager.element.scrollLeft,a=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,l=e.getElement();this.table.modExists("frozenColumns")&&(o+=parseInt(this.table.modules.frozenColumns.leftMargin||0),a-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(o-=parseInt(this.table.columnManager.renderer.vDomPadLeft),a-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),l.offsetLeft<o?this.table.rowManager.element.scrollLeft-=o-l.offsetLeft:l.offsetLeft+l.offsetWidth>a&&(this.table.rowManager.element.scrollLeft+=l.offsetLeft+l.offsetWidth-a)}}allowEdit(e){var n=!!e.column.modules.edit;if(e.column.modules.edit)switch(typeof e.column.modules.edit.check){case"function":e.row.initialized&&(n=e.column.modules.edit.check(e.getComponent()));break;case"string":n=!!e.row.data[e.column.modules.edit.check];break;case"boolean":n=e.column.modules.edit.check;break}return n}edit(e,n,r){var s=this,o=!0,a=function(){},l=e.getElement(),u=!1,c,d,h;if(this.currentCell){!this.invalidEdit&&this.currentCell!==e&&this.cancelEdit();return}function f(v){if(s.currentCell===e&&!u){var M=s.chain("edit-success",[e,v],!0,!0);return M===!0||s.table.options.validationMode==="highlight"?(u=!0,s.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,s.editedCells.indexOf(e)==-1&&s.editedCells.push(e),v=s.transformEmptyValues(v,e),e.setValue(v,!0),M===!0):(u=!0,s.invalidEdit=!0,s.focusCellNoEvent(e,!0),a(),setTimeout(()=>{u=!1},10),!1)}}function p(){s.currentCell===e&&!u&&s.cancelEdit()}function m(v){a=v}if(e.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(l),!1;if(n&&n.stopPropagation(),o=this.allowEdit(e),o||r){if(s.cancelEdit(),s.currentCell=e,this.focusScrollAdjust(e),d=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,n,d)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,d),this.dispatch("cell-editing",e),this.dispatchExternal("cellEditing",d),h=typeof e.column.modules.edit.params=="function"?e.column.modules.edit.params(d):e.column.modules.edit.params,c=e.column.modules.edit.editor.call(s,d,m,f,p,h),this.currentCell&&c!==!1)if(c instanceof Node){for(l.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-editing"),e.table.element.classList.add("tabulator-editing");l.firstChild;)l.removeChild(l.firstChild);l.appendChild(c),a();for(var b=l.children,g=0;g<b.length;g++)b[g].addEventListener("click",function(v){v.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",c),this.blur(l),!1;else return this.blur(l),!1;return!0}else return this.mouseClick=!1,this.blur(l),!1}emptyValueCheck(e){return e===""||e===null||typeof e>"u"}transformEmptyValues(e,n){var r=n.column.modules.edit,s=r.convertEmptyValues||this.convertEmptyValues,o;return s&&(o=r.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),o&&o(e)&&(e=r.convertEmptyValues?r.editorEmptyValue:this.options("editorEmptyValue"))),e}blur(e){this.confirm("edit-blur",[e])||e.blur()}getEditedCells(){var e=[];return this.editedCells.forEach(n=>{e.push(n.getComponent())}),e}clearEdited(e){var n;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,this.dispatch("edit-edited-clear",e)),n=this.editedCells.indexOf(e),n>-1&&this.editedCells.splice(n,1)}}return i})(),Wo=class{constructor(t,e,n,r){this.type=t,this.columns=e,this.component=n||!1,this.indent=r||0}},Or=class{constructor(t,e,n,r,s){this.value=t,this.component=e||!1,this.width=n,this.height=r,this.depth=s}},_M={},xM={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}},TM=(()=>{class i extends N{static moduleName="export";static columnLookups=_M;static rowLookups=xM;constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,n,r,s){var o,a,l,u;return this.cloneTableStyle=n,this.config=e||{},this.colVisProp=s,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),u=i.columnLookups[r],u&&(l=u.call(this.table),l=l.filter(c=>this.columnVisCheck(c))),o=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(l)):[],l&&(l=l.map(c=>c.getComponent())),a=this.bodyToExportRows(this.rowLookup(r),l),o.concat(a)}generateTable(e,n,r,s){var o=this.generateExportList(e,n,r,s);return this.generateTableElement(o)}rowLookup(e){var n=[],r;return typeof e=="function"?e.call(this.table).forEach(s=>{s=this.table.rowManager.findRow(s),s&&n.push(s)}):(r=i.rowLookups[e]||i.rowLookups.active,n=r.call(this.table)),Object.assign([],n)}generateColumnGroupHeaders(e){var n=[];return e||(e=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),e.forEach(r=>{var s=this.processColumnGroup(r);s&&n.push(s)}),n}processColumnGroup(e){var n=e.columns,r=0,s=e.definition["title"+this.colVisPropAttach]||e.definition.title,o={title:s,column:e,depth:1};if(n.length){if(o.subGroups=[],o.width=0,n.forEach(a=>{var l=this.processColumnGroup(a);l&&(o.width+=l.width,o.subGroups.push(l),l.depth>r&&(r=l.depth))}),o.depth+=r,!o.width)return!1}else if(this.columnVisCheck(e))o.width=1;else return!1;return o}columnVisCheck(e){var n=e.definition[this.colVisProp];return this.config.rowHeaders===!1&&e.isRowHeader?!1:(typeof n=="function"&&(n=n.call(this.table,e.getComponent())),n===!1||n===!0?n:e.visible&&e.field)}headersToExportRows(e){var n=[],r=0,s=[];function o(a,l){var u=r-l;if(typeof n[l]>"u"&&(n[l]=[]),a.height=a.subGroups?1:u-a.depth+1,n[l].push(a),a.height>1)for(let c=1;c<a.height;c++)typeof n[l+c]>"u"&&(n[l+c]=[]),n[l+c].push(!1);if(a.width>1)for(let c=1;c<a.width;c++)n[l].push(!1);a.subGroups&&a.subGroups.forEach(function(c){o(c,l+1)})}return e.forEach(function(a){a.depth>r&&(r=a.depth)}),e.forEach(function(a){o(a,0)}),n.forEach(a=>{var l=[];a.forEach(u=>{if(u){let c=typeof u.title>"u"?"":u.title;l.push(new Or(c,u.column.getComponent(),u.width,u.height,u.depth))}else l.push(null)}),s.push(new Wo("header",l))}),s}bodyToExportRows(e,n=[]){var r=[];return n.length===0&&this.table.columnManager.columnsByIndex.forEach(s=>{this.columnVisCheck(s)&&n.push(s.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),e=e.filter(s=>{switch(s.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&s.modules.dataTree.parent)}return!0}),e.forEach((s,o)=>{var a=s.getData(this.colVisProp),l=[],u=0;switch(s.type){case"group":u=s.level,l.push(new Or(s.key,s.getComponent(),n.length,1));break;case"calc":case"row":n.forEach(c=>{l.push(new Or(c._column.getFieldValue(a),c,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(u=s.modules.dataTree.index);break}r.push(new Wo(s.type,l,s.getComponent(),u))}),r}generateTableElement(e){var n=document.createElement("table"),r=document.createElement("thead"),s=document.createElement("tbody"),o=this.lookupTableStyles(),a=this.table.options["rowFormatter"+this.colVisPropAttach],l={};return l.rowFormatter=a!==null?a:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(l.treeElementField=this.table.modules.dataTree.elementField),l.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],l.groupHeader&&!Array.isArray(l.groupHeader)&&(l.groupHeader=[l.groupHeader]),n.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),r,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((u,c)=>{let d;switch(u.type){case"header":r.appendChild(this.generateHeaderElement(u,l,o));break;case"group":s.appendChild(this.generateGroupElement(u,l,o));break;case"calc":s.appendChild(this.generateCalcElement(u,l,o));break;case"row":d=this.generateRowElement(u,l,o),this.mapElementStyles(c%2&&o.evenRow?o.evenRow:o.oddRow,d,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),s.appendChild(d);break}}),r.innerHTML&&n.appendChild(r),n.appendChild(s),this.mapElementStyles(this.table.element,n,["border-top","border-left","border-right","border-bottom"]),n}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.styleRowHeader=e.firstRow.getElementsByClassName("tabulator-row-header")[0],e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}generateHeaderElement(e,n,r){var s=document.createElement("tr");return e.columns.forEach(o=>{if(o){var a=document.createElement("th"),l=o.component._column.definition.cssClass?o.component._column.definition.cssClass.split(" "):[];a.colSpan=o.width,a.rowSpan=o.height,a.innerHTML=o.value,this.cloneTableStyle&&(a.style.boxSizing="border-box"),l.forEach(function(u){a.classList.add(u)}),this.mapElementStyles(o.component.getElement(),a,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(o.component._column.contentElement,a,["padding-top","padding-left","padding-right","padding-bottom"]),o.component._column.visible?this.mapElementStyles(o.component.getElement(),a,["width"]):o.component._column.definition.width&&(a.style.width=o.component._column.definition.width+"px"),o.component._column.parent&&o.component._column.parent.isGroup?this.mapElementStyles(o.component._column.parent.groupElement,a,["border-top"]):this.mapElementStyles(o.component.getElement(),a,["border-top"]),o.component._column.isGroup?this.mapElementStyles(o.component.getElement(),a,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),a,["border-bottom"]),s.appendChild(a)}}),s}generateGroupElement(e,n,r){var s=document.createElement("tr"),o=document.createElement("td"),a=e.columns[0];return s.classList.add("tabulator-print-table-row"),n.groupHeader&&n.groupHeader[e.indent]?a.value=n.groupHeader[e.indent](a.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):n.groupHeader!==!1&&(a.value=e.component._group.generator(a.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)),o.colSpan=a.width,o.innerHTML=a.value,s.classList.add("tabulator-print-table-group"),s.classList.add("tabulator-group-level-"+e.indent),a.component.isVisible()&&s.classList.add("tabulator-group-visible"),this.mapElementStyles(r.firstGroup,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(r.firstGroup,o,["padding-top","padding-left","padding-right","padding-bottom"]),s.appendChild(o),s}generateCalcElement(e,n,r){var s=this.generateRowElement(e,n,r);return s.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(r.calcRow,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),s}generateRowElement(e,n,r){var s=document.createElement("tr");if(s.classList.add("tabulator-print-table-row"),e.columns.forEach((o,a)=>{if(o){var l=document.createElement("td"),u=o.component._column,c=this.table,d=c.columnManager.findColumnIndex(u),h=o.value,f,p,m={modules:{},getValue:function(){return h},getField:function(){return u.definition.field},getElement:function(){return l},getType:function(){return"cell"},getColumn:function(){return u.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getTable:function(){return c},getComponent:function(){return m},column:u},b=u.definition.cssClass?u.definition.cssClass.split(" "):[];if(b.forEach(function(g){l.classList.add(g)}),this.table.modExists("format")&&this.config.formatCells!==!1)h=this.table.modules.format.formatExportValue(m,this.colVisProp);else switch(typeof h){case"object":h=h!==null?JSON.stringify(h):"";break;case"undefined":h="";break}h instanceof Node?l.appendChild(h):l.innerHTML=h,p=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],u.isRowHeader?(f=r.styleRowHeader,p.push("background-color")):f=r.styleCells&&r.styleCells[d]?r.styleCells[d]:r.firstCell,f&&(this.mapElementStyles(f,l,p),u.definition.align&&(l.style.textAlign=u.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(n.treeElementField&&n.treeElementField==u.field||!n.treeElementField&&a==0)&&(e.component._row.modules.dataTree.controlEl&&l.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),l.firstChild),e.component._row.modules.dataTree.branchEl&&l.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),l.firstChild)),s.appendChild(l),m.modules.format&&m.modules.format.renderedCallback&&m.modules.format.renderedCallback()}}),n.rowFormatter&&e.type==="row"&&this.config.formatCells!==!1){let o=Object.assign(e.component);o.getElement=function(){return s},n.rowFormatter(e.component)}return s}generateHTMLTable(e){var n=document.createElement("div");return n.appendChild(this.generateTableElement(e)),n.innerHTML}getHtml(e,n,r,s){var o=this.generateExportList(r||this.table.options.htmlOutputConfig,n,e,s||"htmlOutput");return this.generateHTMLTable(o)}mapElementStyles(e,n,r){if(this.cloneTableStyle&&e&&n){var s={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var o=window.getComputedStyle(e);r.forEach(function(a){n.style[s[a]]||(n.style[s[a]]=o.getPropertyValue(a))})}}}}return i})(),IM={"=":function(i,t,e,n){return t==i},"<":function(i,t,e,n){return t<i},"<=":function(i,t,e,n){return t<=i},">":function(i,t,e,n){return t>i},">=":function(i,t,e,n){return t>=i},"!=":function(i,t,e,n){return t!=i},regex:function(i,t,e,n){return typeof i=="string"&&(i=new RegExp(i)),i.test(t)},like:function(i,t,e,n){return i===null||typeof i>"u"?t===i:typeof t<"u"&&t!==null?String(t).toLowerCase().indexOf(i.toLowerCase())>-1:!1},keywords:function(i,t,e,n){var r=i.toLowerCase().split(typeof n.separator>"u"?" ":n.separator),s=String(t===null||typeof t>"u"?"":t).toLowerCase(),o=[];return r.forEach(a=>{s.includes(a)&&o.push(!0)}),n.matchAll?o.length===r.length:!!o.length},starts:function(i,t,e,n){return i===null||typeof i>"u"?t===i:typeof t<"u"&&t!==null?String(t).toLowerCase().startsWith(i.toLowerCase()):!1},ends:function(i,t,e,n){return i===null||typeof i>"u"?t===i:typeof t<"u"&&t!==null?String(t).toLowerCase().endsWith(i.toLowerCase()):!1},in:function(i,t,e,n){return Array.isArray(i)?i.length?i.indexOf(t)>-1:!0:(console.warn("Filter Error - filter value is not an array:",i),!1)}},RM=(()=>{class i extends N{static moduleName="filter";static filters=IM;constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var n=this.table.columnManager.findColumn(e.field);if(n)this.setHeaderFilterValue(n,e.value);else return console.warn("Column Filter Error - No matching column found:",e.field),!1}),this.tableInitialized=!0}remoteFilterParams(e,n,r,s){return s.filter=this.getFilters(!0,!0),s}generatePlaceholder(e){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(e,n,r,s){this.setFilter(e,n,r,s),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,n,r,s){this.addFilter(e,n,r,s),this.refreshFilter()}userSetHeaderFilterFocus(e){var n=this.table.columnManager.findColumn(e);if(n)this.setHeaderFilterFocus(n);else return console.warn("Column Filter Focus Error - No matching column found:",e),!1}userGetHeaderFilterValue(e){var n=this.table.columnManager.findColumn(e);if(n)return this.getHeaderFilterValue(n);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,n){var r=this.table.columnManager.findColumn(e);if(r)this.setHeaderFilterValue(r,n);else return console.warn("Column Filter Error - No matching column found:",e),!1}userRemoveFilter(e,n,r){this.removeFilter(e,n,r),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,n,r){return this.search("rows",e,n,r)}searchData(e,n,r){return this.search("data",e,n,r)}initializeColumnHeaderFilter(e){var n=e.definition;n.headerFilter&&this.initializeColumn(e)}initializeColumn(e,n){var r=this,s=e.getField();function o(a){var l=e.modules.filter.tagType=="input"&&e.modules.filter.attrType=="text"||e.modules.filter.tagType=="textarea"?"partial":"match",u="",c="",d;if(typeof e.modules.filter.prevSuccess>"u"||e.modules.filter.prevSuccess!==a){if(e.modules.filter.prevSuccess=a,e.modules.filter.emptyFunc(a))delete r.headerFilters[s];else{switch(e.modules.filter.value=a,typeof e.definition.headerFilterFunc){case"string":i.filters[e.definition.headerFilterFunc]?(u=e.definition.headerFilterFunc,d=function(h){var f=e.definition.headerFilterFuncParams||{},p=e.getFieldValue(h);return f=typeof f=="function"?f(a,p,h):f,i.filters[e.definition.headerFilterFunc](a,p,h,f)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":d=function(h){var f=e.definition.headerFilterFuncParams||{},p=e.getFieldValue(h);return f=typeof f=="function"?f(a,p,h):f,e.definition.headerFilterFunc(a,p,h,f)},u=d;break}if(!d)switch(l){case"partial":d=function(h){var f=e.getFieldValue(h);return typeof f<"u"&&f!==null?String(f).toLowerCase().indexOf(String(a).toLowerCase())>-1:!1},u="like";break;default:d=function(h){return e.getFieldValue(h)==a},u="="}r.headerFilters[s]={value:a,func:d,type:u}}e.modules.filter.value=a,c=JSON.stringify(r.headerFilters),r.prevHeaderFilterChangeCheck!==c&&(r.prevHeaderFilterChangeCheck=c,r.trackChanges(),r.refreshFilter())}return!0}e.modules.filter={success:o,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,n,r){var s=this,o=e.modules.filter.success,a=e.getField(),l,u,c,d,h,f,p,m;e.modules.filter.value=n;function b(){}function g(v){m=v}if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),a){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(v){return!v&&v!==0},l=document.createElement("div"),l.classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":s.table.modules.edit.editors[e.definition.headerFilter]?(u=s.table.modules.edit.editors[e.definition.headerFilter],(e.definition.headerFilter==="tick"||e.definition.headerFilter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(v){return v!==!0&&v!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":u=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?u=e.modules.edit.editor:e.definition.formatter&&s.table.modules.edit.editors[e.definition.formatter]?(u=s.table.modules.edit.editors[e.definition.formatter],(e.definition.formatter==="tick"||e.definition.formatter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(v){return v!==!0&&v!==!1})):u=s.table.modules.edit.editors.input;break}if(u){if(d={getValue:function(){return typeof n<"u"?n:""},getField:function(){return e.definition.field},getElement:function(){return l},getColumn:function(){return e.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},p=e.definition.headerFilterParams||{},p=typeof p=="function"?p.call(s.table,d):p,c=u.call(this.table.modules.edit,d,g,o,b,p),!c){console.warn("Filter Error - Cannot add filter to "+a+" column, editor returned a value of false");return}if(!(c instanceof Node)){console.warn("Filter Error - Cannot add filter to "+a+" column, editor should return an instance of Node, the editor returned:",c);return}s.langBind("headerFilters|columns|"+e.definition.field,function(v){c.setAttribute("placeholder",typeof v<"u"&&v?v:e.definition.headerFilterPlaceholder||s.langText("headerFilters|default"))}),c.addEventListener("click",function(v){v.stopPropagation(),c.focus()}),c.addEventListener("focus",v=>{var M=this.table.columnManager.contentsElement.scrollLeft,H=this.table.rowManager.element.scrollLeft;M!==H&&(this.table.rowManager.scrollHorizontal(M),this.table.columnManager.scrollHorizontal(M))}),h=!1,f=function(v){h&&clearTimeout(h),h=setTimeout(function(){o(c.value)},s.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=c,e.modules.filter.attrType=c.hasAttribute("type")?c.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=c.tagName.toLowerCase(),e.definition.headerFilterLiveFilter!==!1&&(e.definition.headerFilter==="autocomplete"||e.definition.headerFilter==="tickCross"||(e.definition.editor==="autocomplete"||e.definition.editor==="tickCross")&&e.definition.headerFilter===!0||(c.addEventListener("keyup",f),c.addEventListener("search",f),e.modules.filter.attrType=="number"&&c.addEventListener("change",function(v){o(c.value)}),e.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&c.setAttribute("type","search")),(e.modules.filter.tagType=="input"||e.modules.filter.tagType=="select"||e.modules.filter.tagType=="textarea")&&c.addEventListener("mousedown",function(v){v.stopPropagation()})),l.appendChild(c),e.contentElement.appendChild(l),r||s.headerFilterColumns.push(e),m&&m()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,n){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,n,!0),e.modules.filter.success(n)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,n,r,s){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:n,value:r,params:s}]),this.addFilter(e)}addFilter(e,n,r,s){var o=!1;Array.isArray(e)||(e=[{field:e,type:n,value:r,params:s}]),e.forEach(a=>{a=this.findFilter(a),a&&(this.filterList.push(a),o=!0)}),o&&this.trackChanges()}findFilter(e){var n;if(Array.isArray(e))return this.findSubFilters(e);var r=!1;return typeof e.field=="function"?r=function(s){return e.field(s,e.type||{})}:i.filters[e.type]?(n=this.table.columnManager.getColumnByField(e.field),n?r=function(s){return i.filters[e.type](e.value,n.getFieldValue(s),s,e.params||{})}:r=function(s){return i.filters[e.type](e.value,s[e.field],s,e.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=r,e.func?e:!1}findSubFilters(e){var n=[];return e.forEach(r=>{r=this.findFilter(r),r&&n.push(r)}),n.length?n:!1}getFilters(e,n){var r=[];return e&&(r=this.getHeaderFilters()),n&&r.forEach(function(s){typeof s.type=="function"&&(s.type="function")}),r=r.concat(this.filtersToArray(this.filterList,n)),r}filtersToArray(e,n){var r=[];return e.forEach(s=>{var o;Array.isArray(s)?r.push(this.filtersToArray(s,n)):(o={field:s.field,type:s.type,value:s.value},n&&typeof o.type=="function"&&(o.type="function"),r.push(o))}),r}getHeaderFilters(){var e=[];for(var n in this.headerFilters)e.push({field:n,type:this.headerFilters[n].type,value:this.headerFilters[n].value});return e}removeFilter(e,n,r){Array.isArray(e)||(e=[{field:e,type:n,value:r}]),e.forEach(s=>{var o=-1;typeof s.field=="object"?o=this.filterList.findIndex(a=>s===a):o=this.filterList.findIndex(a=>s.field===a.field&&s.type===a.type&&s.value===a.value),o>-1?this.filterList.splice(o,1):console.warn("Filter Error - No matching filter type found, ignoring: ",s.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{typeof e.modules.filter.value<"u"&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,n,r,s){var o=[],a=[];return Array.isArray(n)||(n=[{field:n,type:r,value:s}]),n.forEach(l=>{l=this.findFilter(l),l&&a.push(l)}),this.table.rowManager.rows.forEach(l=>{var u=!0;a.forEach(c=>{this.filterRecurse(c,l.getData())||(u=!1)}),u&&o.push(e==="data"?l.getData("data"):l.getComponent())}),o}filter(e,n){var r=[],s=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(o=>{this.filterRow(o)&&r.push(o)}):r=e.slice(0),this.subscribedExternal("dataFiltered")&&(r.forEach(o=>{s.push(o.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),s)),r}filterRow(e,n){var r=!0,s=e.getData();this.filterList.forEach(a=>{this.filterRecurse(a,s)||(r=!1)});for(var o in this.headerFilters)this.headerFilters[o].func(s)||(r=!1);return r}filterRecurse(e,n){var r=!1;return Array.isArray(e)?e.forEach(s=>{this.filterRecurse(s,n)&&(r=!0)}):r=e.func(n),r}}return i})();function AM(i,t,e){return this.emptyToSpace(this.sanitizeHTML(i.getValue()))}function kM(i,t,e){return i.getValue()}function NM(i,t,e){return i.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(i.getValue()))}function OM(i,t,e){var n=parseFloat(i.getValue()),r="",s,o,a,l,u,c=t.decimal||".",d=t.thousand||",",h=t.negativeSign||"-",f=t.symbol||"",p=!!t.symbolAfter,m=typeof t.precision<"u"?t.precision:2;if(isNaN(n))return this.emptyToSpace(this.sanitizeHTML(i.getValue()));if(n<0&&(n=Math.abs(n),r=h),s=m!==!1?n.toFixed(m):n,s=String(s).split("."),o=s[0],a=s.length>1?c+s[1]:"",t.thousand!==!1)for(l=/(\d+)(\d{3})/;l.test(o);)o=o.replace(l,"$1"+d+"$2");return u=o+a,r===!0?(u="("+u+")",p?u+f:f+u):p?r+u+f:r+f+u}function FM(i,t,e){var n=i.getValue(),r=t.urlPrefix||"",s=t.download,o=n,a=document.createElement("a"),l;function u(c,d){var h=c.shift(),f=d[h];return c.length&&typeof f=="object"?u(c,f):f}if(t.labelField&&(l=i.getData(),o=u(t.labelField.split(this.table.options.nestedFieldSeparator),l)),t.label)switch(typeof t.label){case"string":o=t.label;break;case"function":o=t.label(i);break}if(o){if(t.urlField&&(l=i.getData(),n=te.retrieveNestedData(this.table.options.nestedFieldSeparator,t.urlField,l)),t.url)switch(typeof t.url){case"string":n=t.url;break;case"function":n=t.url(i);break}return a.setAttribute("href",r+n),t.target&&a.setAttribute("target",t.target),t.download&&(typeof s=="function"?s=s(i):s=s===!0?"":s,a.setAttribute("download",s)),a.innerHTML=this.emptyToSpace(this.sanitizeHTML(o)),a}else return"&nbsp;"}function LM(i,t,e){var n=document.createElement("img"),r=i.getValue();switch(t.urlPrefix&&(r=t.urlPrefix+i.getValue()),t.urlSuffix&&(r=r+t.urlSuffix),n.setAttribute("src",r),typeof t.height){case"number":n.style.height=t.height+"px";break;case"string":n.style.height=t.height;break}switch(typeof t.width){case"number":n.style.width=t.width+"px";break;case"string":n.style.width=t.width;break}return n.addEventListener("load",function(){i.getRow().normalizeHeight()}),n}function PM(i,t,e){var n=i.getValue(),r=i.getElement(),s=t.allowEmpty,o=t.allowTruthy,a=Object.keys(t).includes("trueValue"),l=typeof t.tickElement<"u"?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',u=typeof t.crossElement<"u"?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&n===t.trueValue||!a&&(o&&n||n===!0||n==="true"||n==="True"||n===1||n==="1")?(r.setAttribute("aria-checked",!0),l||""):s&&(n==="null"||n===""||n===null||typeof n>"u")?(r.setAttribute("aria-checked","mixed"),""):(r.setAttribute("aria-checked",!1),u||"")}function VM(i,t,e){var n=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),r=t.inputFormat||"yyyy-MM-dd HH:mm:ss",s=t.outputFormat||"dd/MM/yyyy HH:mm:ss",o=typeof t.invalidPlaceholder<"u"?t.invalidPlaceholder:"",a=i.getValue();if(typeof n<"u"){var l;return n.isDateTime(a)?l=a:r==="iso"?l=n.fromISO(String(a)):l=n.fromFormat(String(a),r),l.isValid?(t.timezone&&(l=l.setZone(t.timezone)),l.toFormat(s)):o===!0||!a?a:typeof o=="function"?o(a):o}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function HM(i,t,e){var n=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),r=t.inputFormat||"yyyy-MM-dd HH:mm:ss",s=typeof t.invalidPlaceholder<"u"?t.invalidPlaceholder:"",o=typeof t.suffix<"u"?t.suffix:!1,a=typeof t.unit<"u"?t.unit:"days",l=typeof t.humanize<"u"?t.humanize:!1,u=typeof t.date<"u"?t.date:n.now(),c=i.getValue();if(typeof n<"u"){var d;return n.isDateTime(c)?d=c:r==="iso"?d=n.fromISO(String(c)):d=n.fromFormat(String(c),r),d.isValid?l?d.diff(u,a).toHuman()+(o?" "+o:""):parseInt(d.diff(u,a)[a])+(o?" "+o:""):s===!0?c:typeof s=="function"?s(c):s}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function jM(i,t,e){var n=i.getValue();return typeof t[n]>"u"?(console.warn("Missing display value for "+n),n):t[n]}function BM(i,t,e){var n=i.getValue(),r=i.getElement(),s=t&&t.stars?t.stars:5,o=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),l='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',u='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';o.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",n=n&&!isNaN(n)?parseInt(n):0,n=Math.max(0,Math.min(n,s));for(var c=1;c<=s;c++){var d=a.cloneNode(!0);d.innerHTML=c<=n?l:u,o.appendChild(d)}return r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.setAttribute("aria-label",n),o}function zM(i,t,e){var n=this.sanitizeHTML(i.getValue())||0,r=document.createElement("span"),s=t&&t.max?t.max:100,o=t&&t.min?t.min:0,a=t&&typeof t.color<"u"?t.color:["red","orange","green"],l="#666666",u,c;if(!(isNaN(n)||typeof i.getValue()>"u")){switch(r.classList.add("tabulator-traffic-light"),c=parseFloat(n)<=s?parseFloat(n):s,c=parseFloat(c)>=o?parseFloat(c):o,u=(s-o)/100,c=Math.round((c-o)/u),typeof a){case"string":l=a;break;case"function":l=a(n);break;case"object":if(Array.isArray(a)){var d=100/a.length,h=Math.floor(c/d);h=Math.min(h,a.length-1),h=Math.max(h,0),l=a[h];break}}return r.style.backgroundColor=l,r}}function UM(i,t={},e){var n=this.sanitizeHTML(i.getValue())||0,r=i.getElement(),s=t.max?t.max:100,o=t.min?t.min:0,a=t.legendAlign?t.legendAlign:"center",l,u,c,d,h;switch(u=parseFloat(n)<=s?parseFloat(n):s,u=parseFloat(u)>=o?parseFloat(u):o,l=(s-o)/100,u=Math.round((u-o)/l),typeof t.color){case"string":c=t.color;break;case"function":c=t.color(n);break;case"object":if(Array.isArray(t.color)){let b=100/t.color.length,g=Math.floor(u/b);g=Math.min(g,t.color.length-1),g=Math.max(g,0),c=t.color[g];break}default:c="#2DC214"}switch(typeof t.legend){case"string":d=t.legend;break;case"function":d=t.legend(n);break;case"boolean":d=n;break;default:d=!1}switch(typeof t.legendColor){case"string":h=t.legendColor;break;case"function":h=t.legendColor(n);break;case"object":if(Array.isArray(t.legendColor)){let b=100/t.legendColor.length,g=Math.floor(u/b);g=Math.min(g,t.legendColor.length-1),g=Math.max(g,0),h=t.legendColor[g]}break;default:h="#000"}r.style.minWidth="30px",r.style.position="relative",r.setAttribute("aria-label",u);var f=document.createElement("div");f.style.display="inline-block",f.style.width=u+"%",f.style.backgroundColor=c,f.style.height="100%",f.setAttribute("data-max",s),f.setAttribute("data-min",o);var p=document.createElement("div");if(p.style.position="relative",p.style.width="100%",p.style.height="100%",d){var m=document.createElement("div");m.style.position="absolute",m.style.top=0,m.style.left=0,m.style.textAlign=a,m.style.width="100%",m.style.color=h,m.innerHTML=d}return e(function(){if(!(i instanceof Uo)){var b=document.createElement("div");b.style.position="absolute",b.style.top="4px",b.style.bottom="4px",b.style.left="4px",b.style.right="4px",r.appendChild(b),r=b}r.appendChild(p),p.appendChild(f),d&&p.appendChild(m)}),""}function $M(i,t,e){return i.getElement().style.backgroundColor=this.sanitizeHTML(i.getValue()),""}function WM(i,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function GM(i,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function qM(i,t,e){var n=i.getValue(),r=t.size||15,s=r+"px",o,a,l=t.hasOwnProperty("onValue")?t.onValue:!0,u=t.hasOwnProperty("offValue")?t.offValue:!1,c=t.onTruthy?n:n===l;return o=document.createElement("div"),o.classList.add("tabulator-toggle"),c?(o.classList.add("tabulator-toggle-on"),o.style.flexDirection="row-reverse",t.onColor&&(o.style.background=t.onColor)):t.offColor&&(o.style.background=t.offColor),o.style.width=2.5*r+"px",o.style.borderRadius=s,t.clickable&&o.addEventListener("click",d=>{i.setValue(c?u:l)}),a=document.createElement("div"),a.classList.add("tabulator-toggle-switch"),a.style.height=s,a.style.width=s,a.style.borderRadius=s,o.appendChild(a),o}function ZM(i,t,e){var n=document.createElement("span"),r=i.getRow(),s=i.getTable();return r.watchPosition(o=>{t.relativeToPage&&(o+=s.modules.page.getPageSize()*(s.modules.page.getPage()-1)),n.innerText=o}),n}function YM(i,t,e){return i.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function QM(i,t,e){var n,r,s;function o(a){var l=a.getValue(),u="plaintext";switch(typeof l){case"boolean":u="tickCross";break;case"string":l.includes(`
`)&&(u="textarea");break}return u}return n=t.formatterLookup?t.formatterLookup(i):o(i),t.paramsLookup&&(s=typeof t.paramsLookup=="function"?t.paramsLookup(n,i):t.paramsLookup[n]),r=this.table.modules.format.lookupFormatter(n),r.call(this,i,s||{},e)}function KM(i,t,e){var n=t.delimiter||",",r=i.getValue(),s=this.table,o;return t.valueMap&&(typeof t.valueMap=="string"?o=function(a){return a.map(l=>te.retrieveNestedData(s.options.nestedFieldSeparator,t.valueMap,l))}:o=t.valueMap),Array.isArray(r)?(o&&(r=o(r)),r.join(n)):r}function XM(i,t,e){var n=t.indent||"	",r=typeof t.multiline>"u"?!0:t.multiline,s=t.replacer||null,o=i.getValue();return r&&(i.getElement().style.whiteSpace="pre-wrap"),JSON.stringify(o,s,n)}var JM={plaintext:AM,html:kM,textarea:NM,money:OM,link:FM,image:LM,tickCross:PM,datetime:VM,datetimediff:HM,lookup:jM,star:BM,traffic:zM,progress:UM,color:$M,buttonTick:WM,buttonCross:GM,toggle:qM,rownum:ZM,handle:YM,adaptable:QM,array:KM,json:XM},eS=(()=>{class i extends N{static moduleName="format";static formatters=JM;constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupTypeFormatter(e,""),typeof e.definition.formatterPrint<"u"&&(e.modules.format.print=this.lookupTypeFormatter(e,"Print")),typeof e.definition.formatterClipboard<"u"&&(e.modules.format.clipboard=this.lookupTypeFormatter(e,"Clipboard")),typeof e.definition.formatterHtmlOutput<"u"&&(e.modules.format.htmlOutput=this.lookupTypeFormatter(e,"HtmlOutput"))}lookupTypeFormatter(e,n){var r={params:e.definition["formatter"+n+"Params"]||{}},s=e.definition["formatter"+n];return r.formatter=this.lookupFormatter(s),r}lookupFormatter(e){var n;switch(typeof e){case"string":i.formatters[e]?n=i.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),n=i.formatters.plaintext);break;case"function":n=e;break;default:n=i.formatters.plaintext;break}return n}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,n,r){var s,o,a,l;return e.definition.titleFormatter?(s=this.lookupFormatter(e.definition.titleFormatter),a=u=>{e.titleFormatterRendered=u},l={getValue:function(){return n},getElement:function(){return r},getType:function(){return"header"},getColumn:function(){return e.getComponent()},getTable:()=>this.table},o=e.definition.titleFormatterParams||{},o=typeof o=="function"?o():o,s.call(this,l,o,a)):n}formatValue(e){var n=e.getComponent(),r=typeof e.column.modules.format.params=="function"?e.column.modules.format.params(n):e.column.modules.format.params;function s(o){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=o,e.modules.format.rendered=!1}return e.column.modules.format.formatter.call(this,n,r,s)}formatExportValue(e,n){var r=e.column.modules.format[n],s;if(r){let a=function(l){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=l,e.modules.format.rendered=!1};var o=a;return s=typeof r.params=="function"?r.params(e.getComponent()):r.params,r.formatter.call(this,e.getComponent(),s,a)}else return this.formatValue(e)}sanitizeHTML(e){if(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,function(r){return n[r]})}else return e}emptyToSpace(e){return e===null||typeof e>"u"||e===""?"&nbsp;":e}}return i})(),tS=(()=>{class i extends N{static moduleName="frozenColumns";constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(e){this.layoutElement(e.element,e.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(e=>{this.initializeColumn(e)}),this.layout()}initializeColumn(e){var n={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(n.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=n):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(n=>{n.calcs.top&&this.layoutRow(n.calcs.top),n.calcs.bottom&&this.layoutRow(n.calcs.bottom),n.groupList&&n.groupList.length&&this.layoutGroupCalcs(n.groupList)})}layoutColumnPosition(e){var n=[],r=0,s=0;this.leftColumns.forEach((o,a)=>{if(o.modules.frozen.marginValue=r,o.modules.frozen.margin=o.modules.frozen.marginValue+"px",o.visible&&(r+=o.getWidth()),a==this.leftColumns.length-1?o.modules.frozen.edge=!0:o.modules.frozen.edge=!1,o.parent.isGroup){var l=this.getColGroupParentElement(o);n.includes(l)||(this.layoutElement(l,o),n.push(l)),l.classList.toggle("tabulator-frozen-left",o.modules.frozen.edge&&o.modules.frozen.position==="left"),l.classList.toggle("tabulator-frozen-right",o.modules.frozen.edge&&o.modules.frozen.position==="right")}else this.layoutElement(o.getElement(),o);e&&o.cells.forEach(u=>{this.layoutElement(u.getElement(!0),o)})}),this.rightColumns.forEach((o,a)=>{o.modules.frozen.marginValue=s,o.modules.frozen.margin=o.modules.frozen.marginValue+"px",o.visible&&(s+=o.getWidth()),a==this.rightColumns.length-1?o.modules.frozen.edge=!0:o.modules.frozen.edge=!1,o.parent.isGroup?this.layoutElement(this.getColGroupParentElement(o),o):this.layoutElement(o.getElement(),o),e&&o.cells.forEach(l=>{this.layoutElement(l.getElement(!0),o)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var e=this.table.rowManager.getVisibleRows(!0),n=this.table.rowManager.getRows().filter(r=>!e.includes(r));n.forEach(r=>{r.deinitialize()}),e.forEach(r=>{r.type==="row"&&this.layoutRow(r)})}layoutRow(e){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(n=>{var r=e.getCell(n);r&&this.layoutElement(r.getElement(!0),n)}),this.rightColumns.forEach(n=>{var r=e.getCell(n);r&&this.layoutElement(r.getElement(!0),n)})}layoutElement(e,n){var r;n.modules.frozen&&e&&(e.style.position="sticky",this.table.rtl?r=n.modules.frozen.position==="left"?"right":"left":r=n.modules.frozen.position,e.style[r]=n.modules.frozen.margin,e.classList.add("tabulator-frozen"),e.classList.toggle("tabulator-frozen-left",n.modules.frozen.edge&&n.modules.frozen.position==="left"),e.classList.toggle("tabulator-frozen-right",n.modules.frozen.edge&&n.modules.frozen.position==="right"))}adjustForScrollbar(e){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+e+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(e,n){var r=0;for(let s=0;s<n;s++)e[s].visible&&(r+=e[s].getWidth());return r}}return i})(),nS=(()=>{class i extends N{static moduleName="frozenRows";constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var e=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(e=>{this.initializeRow(e)})}initializeRow(e){var n=this.table.options.frozenRows,r=typeof n;r==="number"?e.getPosition()&&e.getPosition()+this.rows.length<=n&&this.freezeRow(e):r==="function"?n.call(this.table,e.getComponent())&&this.freezeRow(e):Array.isArray(n)&&n.includes(e.data[this.options("frozenRowsField")])&&this.freezeRow(e)}isRowFrozen(e){var n=this.rows.indexOf(e);return n>-1}isFrozen(){return!!this.rows.length}visibleRows(e,n){return this.rows.forEach(r=>{n.push(r)}),n}getRows(e){var n=e.slice(0);return this.rows.forEach(function(r){var s=n.indexOf(r);s>-1&&n.splice(s,1)}),n}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.rows.push(e),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(e){e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var n=this.rows.indexOf(e);if(n>-1){var r=e.getElement();r.parentNode&&r.parentNode.removeChild(r),this.rows.splice(n,1)}}styleRows(e){this.rows.forEach((n,r)=>{this.table.rowManager.styleRow(n,r)})}}return i})(),Ac=class{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._group.groupManager.table.componentFunctionBinder.handle("group",e._group,n)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(t,e){return this._group.groupManager.table.rowManager.scrollToRow(this._group,t,e)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}},Ii=class i{constructor(t,e,n,r,s,o,a){this.groupManager=t,this.parent=e,this.key=r,this.level=n,this.field=s,this.hasSubGroups=n<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:typeof t.startOpen[n]<"u"?t.startOpen[n]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(t){t||(this.groupList.length?this.groupList.forEach(function(e){e.wipe()}):this.rows.forEach(e=>{e.modules&&delete e.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t;this.groupManager.table.options.groupToggleElement&&(t=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,t.addEventListener("click",e=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(e.stopPropagation(),e.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(t,e){var n=e+"_"+t,r=new i(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],this.old?this.old.groups[n]:!1);this.groups[n]=r,this.groupList.push(r)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var n=this.groupManager.groupIDLookups[e].func(t.getData()),r=e+"_"+n;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[r]&&this.groups[r].addRow(t):(this.groups[r]||this._createGroup(n,e),this.groups[r].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,n){var r=this.conformRowData({});t.updateData(r);var s=this.rows.indexOf(e);s>-1?n?this.rows.splice(s+1,0,t):this.rows.splice(s,0,t):n?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement&&(this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)}))}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),n=t.getElement();e>-1&&this.rows.splice(e,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(n.parentNode&&n.parentNode.removeChild(n),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(t){var e=t.level+"_"+t.key,n;this.groups[e]&&(delete this.groups[e],n=this.groupList.indexOf(t),n>-1&&this.groupList.splice(n,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var t=[];return t.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(e){t=t.concat(e.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))),t}getData(t,e){var n=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(r=>{n.push(r.getData(e||"data"))}),n}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{var e=t.getHeadersAndRows();e.forEach(n=>{n.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var t=this.generateElement();this.groupList.length?this.groupList.forEach(e=>{var n=e.getHeadersAndRows();n.forEach(r=>{var s=r.getElement();t.parentNode.insertBefore(s,t.nextSibling),r.initialize(),t=s})}):this.rows.forEach(e=>{var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];typeof this.visible=="function"&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(n){var r=n.getRowGroup(t);r&&(e=r)}):this.rows.find(function(n){return n===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(n){e.push(t?n.getComponent():n)}),e}getRows(t,e){var n=[];return e&&this.groupList.length?this.groupList.forEach(r=>{n=n.concat(r.getRows(t,e))}):this.rows.forEach(function(r){n.push(t?r.getComponent():r)}),n}generateGroupHeaderContents(){var t=[],e=this.getRows(!1,!0);for(e.forEach(function(n){t.push(n.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,te.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new Ac(this)),this.component}},iS=(()=>{class i extends N{static moduleName="groupRows";constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,n=this.table.options.groupStartOpen,r=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(r)&&e.length>r.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(o,a)=>{this.headerGenerator[0]=(l,u,c)=>(typeof l>"u"?"":l)+"<span>("+u+" "+(u===1?o:a.groups.items)+")</span>"}),this.groupIDLookups=[],e)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var s=this.table.columnManager.getRealColumns();s.forEach(o=>{o.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),o.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(e)||(e=[e]),e.forEach((o,a)=>{var l,u;typeof o=="function"?l=o:(u=this.table.columnManager.getColumnByField(o),u?l=function(c){return u.getFieldValue(c)}:l=function(c){return c[o]}),this.groupIDLookups.push({field:typeof o=="function"?!1:o,func:l,values:this.allowedValues?this.allowedValues[a]:!1})}),n&&(Array.isArray(n)||(n=[n]),n.forEach(o=>{}),this.startOpen=n),r&&(this.headerGenerator=Array.isArray(r)?r:[r])}else this.groupList=[],this.groups={}}rowSample(e,n){if(this.table.options.groupBy){var r=this.getGroups(!1)[0];n.push(r.getRows(!1)[0])}return n}virtualRenderFill(){var e=this.table.rowManager.tableElement,n=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)n=n.filter(r=>r.type!=="group"),e.style.minWidth=n.length?"":this.table.columnManager.getWidth()+"px";else return n}rowAddingIndex(e,n,r){if(this.table.options.groupBy){this.assignRowToGroup(e);var s=e.modules.group.rows;return s.length>1&&(!n||n&&s.indexOf(n)==-1?r?s[0]!==e&&(n=s[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!r)):s[s.length-1]!==e&&(n=s[s.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!r)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!r)),n}}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.initialized||this.initialize(),this.configureGroupSetup(),!e&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return e.modules.group?e.modules.group.getComponent():!1}rowMoving(e,n,r){if(this.table.options.groupBy){!r&&n instanceof Ii&&(n=this.table.rowManager.prevDisplayRow(e)||n);var s=n instanceof Ii?n:n.modules.group,o=e instanceof Ii?e:e.modules.group;s===o?this.table.rowManager.moveRowInArray(s.rows,e,n,r):(o&&o.removeRow(e),s.insertRow(e,n,r))}}rowDeleting(e){this.table.options.groupBy&&e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(e){this.table.options.groupBy&&this.reassignRowToGroup(e.row)}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var n=[];return this.groupList.forEach(function(r){n.push(e?r.getComponent():r)}),n}getChildGroups(e){var n=[];return e||(e=this),e.groupList.forEach(r=>{r.groupList.length?n=n.concat(this.getChildGroups(r)):n.push(r)}),n}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(e){e.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(e){var n=[];return e.forEach(r=>{var s={};s.level=0,s.rowCount=0,s.headerContent="";var o=[];r.hasSubGroups?(o=this.pullGroupListData(r.groupList),s.level=r.level,s.rowCount=o.length-r.groupList.length,s.headerContent=r.generator(r.key,s.rowCount,r.rows,r),n.push(s),n=n.concat(o)):(s.level=r.level,s.headerContent=r.generator(r.key,r.rows.length,r.rows,r),s.rowCount=r.getRows().length,n.push(s),r.getRows().forEach(a=>{n.push(a.getData("data"))}))}),n}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var n=!1;return this.options("dataTree")&&(e=this.table.modules.dataTree.getTreeParentRoot(e)),this.groupList.forEach(r=>{var s=r.getRowGroup(e);s&&(n=s)}),n}countGroups(){return this.groupList.length}generateGroups(e){var n=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(r=>{this.createGroup(r,0,n)}),e.forEach(r=>{this.assignRowToExistingGroup(r,n)})):e.forEach(r=>{this.assignRowToGroup(r,n)}),Object.values(n).forEach(r=>{r.wipe(!0)})}createGroup(e,n,r){var s=n+"_"+e,o;r=r||[],o=new Ii(this,!1,n,e,this.groupIDLookups[0].field,this.headerGenerator[0],r[s]),this.groups[s]=o,this.groupList.push(o)}assignRowToExistingGroup(e,n){var r=this.groupIDLookups[0].func(e.getData()),s="0_"+r;this.groups[s]&&this.groups[s].addRow(e)}assignRowToGroup(e,n){var r=this.groupIDLookups[0].func(e.getData()),s=!this.groups["0_"+r];return s&&this.createGroup(r,0,n),this.groups["0_"+r].addRow(e),!s}reassignRowToGroup(e){if(e.type==="row"){var n=e.modules.group,r=n.getPath(),s=this.getExpectedPath(e),o;o=r.length==s.length&&r.every((a,l)=>a===s[l]),o||(n.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var n=[],r=e.getData();return this.groupIDLookups.forEach(s=>{n.push(s.func(r))}),n}updateGroupRows(e){var n=[];return this.blockRedraw||(this.groupList.forEach(r=>{n=n.concat(r.getHeadersAndRows())}),e&&this.refreshData(!0)),n}scrollHeaders(e){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(e-=this.table.columnManager.renderer.vDomPadLeft),e=e+"px",this.groupList.forEach(n=>{n.scrollHeader(e)}))}removeGroup(e){var n=e.level+"_"+e.key,r;this.groups[n]&&(delete this.groups[n],r=this.groupList.indexOf(e),r>-1&&this.groupList.splice(r,1))}checkBasicModeGroupHeaderWidth(){var e=this.table.rowManager.tableElement,n=!0;this.table.rowManager.getDisplayRows().forEach((r,s)=>{this.table.rowManager.styleRow(r,s),e.appendChild(r.getElement()),r.initialize(!0),r.type!=="group"&&(n=!1)}),n?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}}return i})(),rS={cellEdit:function(i){i.component.setValueProcessData(i.data.oldValue),i.component.cellRendered()},rowAdd:function(i){i.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(i){var t=this.table.rowManager.addRowActual(i.data.data,i.data.pos,i.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(i.component,t),this.table.rowManager.checkPlaceholder()},rowMove:function(i){var t=i.data.posFrom-i.data.posTo>0;this.table.rowManager.moveRowActual(i.component,this.table.rowManager.getRowFromPosition(i.data.posFrom),t),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},sS={cellEdit:function(i){i.component.setValueProcessData(i.data.newValue),i.component.cellRendered()},rowAdd:function(i){var t=this.table.rowManager.addRowActual(i.data.data,i.data.pos,i.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(i.component,t),this.table.rowManager.checkPlaceholder()},rowDelete:function(i){i.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(i){this.table.rowManager.moveRowActual(i.component,this.table.rowManager.getRowFromPosition(i.data.posTo),i.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},oS={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},aS={undo:function(i){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(i.preventDefault(),this.table.modules.history.undo()))},redo:function(i){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(i.preventDefault(),this.table.modules.history.redo()))}},lS={keybindings:{bindings:oS,actions:aS}},uS=(()=>{class i extends N{static moduleName="history";static moduleExtensions=lS;static undoers=rS;static redoers=sS;constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,n,r){this.action("rowMove",e,{posFrom:e.getPosition(),posTo:n.getPosition(),to:n,after:r})}rowAdded(e,n,r,s){this.action("rowAdd",e,{data:n,pos:r,index:s})}rowDeleted(e){var n,r;this.table.options.groupBy?(r=e.getComponent().getGroup()._getSelf().rows,n=r.indexOf(e),n&&(n=r[n-1])):(n=e.table.rowManager.getRowIndex(e),n&&(n=e.table.rowManager.rows[n-1])),this.action("rowDelete",e,{data:e.getData(),pos:!n,index:n})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,n,r){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:n,data:r}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var n=this.history.findIndex(function(r){return r.component===e});n>-1&&(this.history.splice(n,1),n<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return i.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return i.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(e,n){this.history.forEach(function(r){if(r.component instanceof Ie)r.component===e&&(r.component=n);else if(r.component instanceof Fn&&r.component.row===e){var s=r.component.column.getField();s&&(r.component=n.getCell(s))}})}}return i})(),cS=(()=>{class i extends N{static moduleName="htmlTableImport";constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var e=this.table.originalElement,n=this.table.options,r=e.getElementsByTagName("th"),s=e.getElementsByTagName("tbody")[0],o=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),s=s?s.getElementsByTagName("tr"):[],this._extractOptions(e,n),r.length?this._extractHeaders(r,s):this._generateBlankHeaders(r,s);for(var a=0;a<s.length;a++){var l=s[a],u=l.getElementsByTagName("td"),c={};this.hasIndex||(c[n.index]=a);for(var d=0;d<u.length;d++){var h=u[d];typeof this.fieldIndex[d]<"u"&&(c[this.fieldIndex[d]]=h.innerHTML)}o.push(c)}n.data=o,this.dispatchExternal("htmlImported")}_extractOptions(e,n,r){var s=e.attributes,o=Object.keys(r||n),a={};o.forEach(d=>{a[d.toLowerCase()]=d});for(var l in s){var u=s[l],c;u&&typeof u=="object"&&u.name&&u.name.indexOf("tabulator-")===0&&(c=u.name.replace("tabulator-",""),typeof a[c]<"u"&&(n[a[c]]=this._attribValue(u.value)))}}_attribValue(e){return e==="true"?!0:e==="false"?!1:e}_findCol(e){var n=this.table.options.columns.find(r=>r.title===e);return n||!1}_extractHeaders(e,n){for(var r=0;r<e.length;r++){var s=e[r],o=!1,a=this._findCol(s.textContent),l;a?o=!0:a={title:s.textContent.trim()},a.field||(a.field=s.textContent.trim().toLowerCase().replaceAll(" ","_")),l=s.getAttribute("width"),l&&!a.width&&(a.width=l),this._extractOptions(s,a,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[r]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),o||this.table.options.columns.push(a)}}_generateBlankHeaders(e,n){for(var r=0;r<e.length;r++){var s=e[r],o={title:"",field:"col"+r};this.fieldIndex[r]=o.field;var a=s.getAttribute("width");a&&(o.width=a),this.table.options.columns.push(o)}}}return i})();function dS(i){var t=[],e=0,n=0,r=!1;for(let s=0;s<i.length;s++){let o=i[s],a=i[s+1];if(t[e]||(t[e]=[]),t[e][n]||(t[e][n]=""),o=='"'&&r&&a=='"'){t[e][n]+=o,s++;continue}if(o=='"'){r=!r;continue}if(o==","&&!r){n++;continue}if(o=="\r"&&a==`
`&&!r){n=0,e++,s++;continue}if((o=="\r"||o==`
`)&&!r){n=0,e++;continue}t[e][n]+=o}return t}function hS(i){try{return JSON.parse(i)}catch(t){return console.warn("JSON Import Error - File contents is invalid JSON",t),Promise.reject()}}function fS(i){return i}function pS(i){var t=this.dependencyRegistry.lookup("XLSX"),e=t.read(i),n=e.Sheets[e.SheetNames[0]];return t.utils.sheet_to_json(n,{header:1})}var mS={csv:dS,json:hS,array:fS,xlsx:pS},gS=(()=>{class i extends N{static moduleName="import";static importers=mS;constructor(e){super(e),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text"),this.registerTableOption("importHeaderTransform"),this.registerTableOption("importValueTransform"),this.registerTableOption("importDataValidator"),this.registerTableOption("importFileValidator")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(e){return this.table.options.importFormat&&(typeof e=="string"||Array.isArray(e)&&e.length&&Array.isArray(e))}loadData(e,n,r,s,o){return this.importData(this.lookupImporter(),e).then(this.structureData.bind(this)).catch(a=>(console.error("Import Error:",a||"Unable to import data"),Promise.reject(a)))}lookupImporter(e){var n;return e||(e=this.table.options.importFormat),typeof e=="string"?n=i.importers[e]:n=e,n||console.error("Import Error - Importer not found:",e),n}importFromFile(e,n,r){var s=this.lookupImporter(e);if(s)return this.pickFile(n,r).then(this.importData.bind(this,s)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(o=>(this.dispatch("import-error",o),this.dispatchExternal("importError",o),console.error("Import Error:",o||"Unable to import file"),this.table.dataLoader.alertError(),setTimeout(()=>{this.table.dataLoader.clearAlert()},3e3),Promise.reject(o)))}pickFile(e,n){return new Promise((r,s)=>{var o=document.createElement("input");o.type="file",o.accept=e,o.addEventListener("change",a=>{var l=o.files[0],u=new FileReader,c=this.validateFile(l);if(c===!0){switch(this.dispatch("import-importing",o.files),this.dispatchExternal("importImporting",o.files),n||this.table.options.importReader){case"buffer":u.readAsArrayBuffer(l);break;case"binary":u.readAsBinaryString(l);break;case"url":u.readAsDataURL(l);break;case"text":default:u.readAsText(l)}u.onload=d=>{r(u.result)},u.onerror=d=>{console.warn("File Load Error - Unable to read file"),s(d)}}else s(c)}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),o.click()})}importData(e,n){var r;return this.table.dataLoader.alertLoader(),new Promise((s,o)=>{setTimeout(()=>{r=e.call(this.table,n),r instanceof Promise||r?s(r):o()},10)})}structureData(e){var n=[];return Array.isArray(e)&&e.length&&Array.isArray(e[0])?(this.table.options.autoColumns?n=this.structureArrayToObject(e):n=this.structureArrayToColumns(e),n):e}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(r=>{n.push(this.table.modules.mutator.transformRow(r,"import"))}):n=e,n}transformHeader(e){var n=[];if(this.table.options.importHeaderTransform)e.forEach(r=>{n.push(this.table.options.importHeaderTransform.call(this.table,r,e))});else return e;return n}transformData(e){var n=[];if(this.table.options.importValueTransform)e.forEach(r=>{n.push(this.table.options.importValueTransform.call(this.table,r,e))});else return e;return n}structureArrayToObject(e){var n=this.transformHeader(e.shift()),r=e.map(s=>{var o={};return s=this.transformData(s),n.forEach((a,l)=>{o[a]=s[l]}),o});return r}structureArrayToColumns(e){var n=[],r=this.transformHeader(e[0]),s=this.table.getColumns();return s[0]&&r[0]&&s[0].getDefinition().title===r[0]&&e.shift(),e.forEach(o=>{var a={};o=this.transformData(o),o.forEach((l,u)=>{var c=s[u];c&&(a[c.getField()]=l)}),n.push(a)}),n}validateFile(e){return this.table.options.importFileValidator?this.table.options.importFileValidator.call(this.table,e):!0}validateData(e){var n;return this.table.options.importDataValidator?(n=this.table.options.importDataValidator.call(this.table,e),n===!0?e:Promise.reject(n)):e}setData(e){return this.dispatch("import-imported",e),this.dispatchExternal("importImported",e),this.table.dataLoader.clearAlert(),this.table.setData(e)}}return i})(),bS=(()=>{class i extends N{static moduleName="interaction";constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var e=Object.values(this.touchWatchers);e.forEach(n=>{for(let r in n)n[r]=null})}cellContentsSelectionFixer(e,n){var r;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===n)){e.preventDefault();try{document.selection?(r=document.body.createTextRange(),r.moveToElementText(n.getElement()),r.select()):window.getSelection&&(r=document.createRange(),r.selectNode(n.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(r))}catch{}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,n){n?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var n=this.eventMap[e];this.touchSubscribers[n+"-touchstart"]||(this.touchSubscribers[n+"-touchstart"]=this.handleTouch.bind(this,n,"start"),this.touchSubscribers[n+"-touchend"]=this.handleTouch.bind(this,n,"end"),this.subscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.subscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var n=!0,r=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let s in this.eventMap)this.eventMap[s]===r&&this.subscribers[s]&&(n=!1);n&&(this.unsubscribe(r+"-touchstart",this.touchSubscribers[r+"-touchstart"]),this.unsubscribe(r+"-touchend",this.touchSubscribers[r+"-touchend"]),delete this.touchSubscribers[r+"-touchstart"],delete this.touchSubscribers[r+"-touchend"])}}initializeColumn(e){var n=e.definition;for(let r in this.eventMap)n[r]&&(this.subscriptionChanged(r,!0),this.columnSubscribers[r]||(this.columnSubscribers[r]=[]),this.columnSubscribers[r].push(e))}handle(e,n,r){this.dispatchEvent(e,n,r)}handleTouch(e,n,r,s){var o=this.touchWatchers[e];switch(e==="column"&&(e="header"),n){case"start":o.tap=!0,clearTimeout(o.tapHold),o.tapHold=setTimeout(()=>{clearTimeout(o.tapHold),o.tapHold=null,o.tap=null,clearTimeout(o.tapDbl),o.tapDbl=null,this.dispatchEvent(e+"TapHold",r,s)},1e3);break;case"end":o.tap&&(o.tap=null,this.dispatchEvent(e+"Tap",r,s)),o.tapDbl?(clearTimeout(o.tapDbl),o.tapDbl=null,this.dispatchEvent(e+"DblTap",r,s)):o.tapDbl=setTimeout(()=>{clearTimeout(o.tapDbl),o.tapDbl=null},300),clearTimeout(o.tapHold),o.tapHold=null;break}}dispatchEvent(e,n,r){var s=r.getComponent(),o;this.columnSubscribers[e]&&(r instanceof Fn?o=r.column.definition[e]:r instanceof Nr&&(o=r.definition[e]),o&&o(n,s)),this.dispatchExternal(e,n,s)}}return i})(),vS={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},yS={keyBlock:function(i){i.stopPropagation(),i.preventDefault()},scrollPageUp:function(i){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;i.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(i){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,n=t.element.scrollHeight;i.preventDefault(),t.displayRowsCount&&(e<=n?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(i){var t=this.table.rowManager;i.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(i){var t=this.table.rowManager;i.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(i){this.dispatch("keybinding-nav-prev",i)},navNext:function(i){this.dispatch("keybinding-nav-next",i)},navLeft:function(i){this.dispatch("keybinding-nav-left",i)},navRight:function(i){this.dispatch("keybinding-nav-right",i)},navUp:function(i){this.dispatch("keybinding-nav-up",i)},navDown:function(i){this.dispatch("keybinding-nav-down",i)}},CS=(()=>{class i extends N{static moduleName="keybindings";static bindings=vS;static actions=yS;constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,n={};this.watchKeys={},this.pressedKeys=[],e!==!1&&(Object.assign(n,i.bindings),Object.assign(n,e),this.mapBindings(n),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let n in e)i.actions[n]?e[n]&&(typeof e[n]!="object"&&(e[n]=[e[n]]),e[n].forEach(r=>{var s=Array.isArray(r)?r:[r];s.forEach(o=>{this.mapBinding(n,o)})})):console.warn("Key Binding Error - no such action:",n)}mapBinding(e,n){var r={action:i.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},s=n.toString().toLowerCase().split(" ").join("").split("+");s.forEach(o=>{switch(o){case"ctrl":r.ctrl=!0;break;case"shift":r.shift=!0;break;case"meta":r.meta=!0;break;default:o=isNaN(o)?o.toUpperCase().charCodeAt(0):parseInt(o),r.keys.push(o),this.watchKeys[o]||(this.watchKeys[o]=[]),this.watchKeys[o].push(r)}})}bindEvents(){var e=this;this.keyupBinding=function(n){var r=n.keyCode,s=e.watchKeys[r];s&&(e.pressedKeys.push(r),s.forEach(function(o){e.checkBinding(n,o)}))},this.keydownBinding=function(n){var r=n.keyCode,s=e.watchKeys[r];if(s){var o=e.pressedKeys.indexOf(r);o>-1&&e.pressedKeys.splice(o,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,n){var r=!0;return e.ctrlKey==n.ctrl&&e.shiftKey==n.shift&&e.metaKey==n.meta?(n.keys.forEach(s=>{var o=this.pressedKeys.indexOf(s);o==-1&&(r=!1)}),r&&n.action.call(this,e),!0):!1}}return i})(),wS=(()=>{class i extends N{static moduleName="menu";constructor(e){super(e),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(e){var n=e.definition;n.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),n.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),n.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),n.headerMenu&&this.initializeColumnHeaderMenu(e),n.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),n.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),n.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(e){var n=e.definition.headerMenuIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),n?(typeof n=="function"&&(n=n(e.getComponent())),n instanceof HTMLElement?r.appendChild(n):r.innerHTML=n):r.innerHTML="&vellip;",r.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.loadMenuEvent(e.definition.headerMenu,s,e)}),e.titleElement.insertBefore(r,e.titleElement.firstChild)}loadMenuTableCellEvent(e,n,r){r._cell&&(r=r._cell),r.column.definition[e]&&this.loadMenuEvent(r.column.definition[e],n,r)}loadMenuTableColumnEvent(e,n,r){r._column&&(r=r._column),r.definition[e]&&this.loadMenuEvent(r.definition[e],n,r)}loadMenuEvent(e,n,r){r._group?r=r._group:r._row&&(r=r._row),e=typeof e=="function"?e.call(this.table,n,r.getComponent()):e,this.loadMenu(n,r,e)}loadMenu(e,n,r,s,o){var a=!(e instanceof MouseEvent),l=document.createElement("div"),u;if(l.classList.add("tabulator-menu"),a||e.preventDefault(),!(!r||!r.length)){if(s)u=o.child(l);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=u=this.popup(l)}r.forEach(c=>{var d=document.createElement("div"),h=c.label,f=c.disabled;c.separator?d.classList.add("tabulator-menu-separator"):(d.classList.add("tabulator-menu-item"),typeof h=="function"&&(h=h.call(this.table,n.getComponent())),h instanceof Node?d.appendChild(h):d.innerHTML=h,typeof f=="function"&&(f=f.call(this.table,n.getComponent())),f?(d.classList.add("tabulator-menu-item-disabled"),d.addEventListener("click",p=>{p.stopPropagation()})):c.menu&&c.menu.length?d.addEventListener("click",p=>{p.stopPropagation(),this.loadMenu(p,n,c.menu,d,u)}):c.action&&d.addEventListener("click",p=>{c.action(p,n.getComponent())}),c.menu&&c.menu.length&&d.classList.add("tabulator-menu-item-submenu")),l.appendChild(d)}),l.addEventListener("click",c=>{this.rootPopup&&this.rootPopup.hide()}),u.show(s||e),u===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",r,u),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=n,this.dispatch("menu-opened",r,u),this.dispatchExternal("menuOpened",n.getComponent()))}}}return i})(),ES=(()=>{class i extends N{static moduleName="moveColumn";constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(e){var n=this,r={},s;!e.modules.frozen&&!e.isGroup&&!e.isRowHeader&&(s=e.getElement(),r.mousemove=function(o){e.parent===n.moving.parent&&((n.touchMove?o.touches[0].pageX:o.pageX)-te.elOffset(s).left+n.table.columnManager.contentsElement.scrollLeft>e.getWidth()/2?(n.toCol!==e||!n.toColAfter)&&(s.parentNode.insertBefore(n.placeholderElement,s.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(s.parentNode.insertBefore(n.placeholderElement,s),n.moveColumn(e,!1)))}.bind(n),s.addEventListener("mousedown",function(o){n.touchMove=!1,o.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(o,e)},n.checkPeriod))}),s.addEventListener("mouseup",function(o){o.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),n.bindTouchEvents(e)),e.modules.moveColumn=r}bindTouchEvents(e){var n=e.getElement(),r=!1,s,o,a,l,u,c;n.addEventListener("touchstart",d=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=e.nextColumn(),a=s?s.getWidth()/2:0,o=e.prevColumn(),l=o?o.getWidth()/2:0,u=0,c=0,r=!1,this.startMove(d,e)},this.checkPeriod)},{passive:!0}),n.addEventListener("touchmove",d=>{var h,f;this.moving&&(this.moveHover(d),r||(r=d.touches[0].pageX),h=d.touches[0].pageX-r,h>0?s&&h-u>a&&(f=s,f!==e&&(r=d.touches[0].pageX,f.getElement().parentNode.insertBefore(this.placeholderElement,f.getElement().nextSibling),this.moveColumn(f,!0))):o&&-h-c>l&&(f=o,f!==e&&(r=d.touches[0].pageX,f.getElement().parentNode.insertBefore(this.placeholderElement,f.getElement()),this.moveColumn(f,!1))),f&&(s=f.nextColumn(),u=a,a=s?s.getWidth()/2:0,o=f.prevColumn(),c=l,l=o?o.getWidth()/2:0))},{passive:!0}),n.addEventListener("touchend",d=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(d)})}startMove(e,n){var r=n.getElement(),s=this.table.columnManager.getContentsElement(),o=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=n,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-te.elOffset(r).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),s.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=s.clientHeight-o.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e),this.dispatch("column-moving",e,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,n){var r=this.moving.getCells();this.toCol=e,this.toColAfter=n,n?e.getCells().forEach(function(s,o){var a=s.getElement(!0);a.parentNode&&r[o]&&a.parentNode.insertBefore(r[o].getElement(),a.nextSibling)}):e.getCells().forEach(function(s,o){var a=s.getElement(!0);a.parentNode&&r[o]&&a.parentNode.insertBefore(r[o].getElement(),a)})}endMove(e){(e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var n=this.table.columnManager.getContentsElement(),r=n.scrollLeft,s=(this.touchMove?e.touches[0].pageX:e.pageX)-te.elOffset(n).left+r,o;this.hoverElement.style.left=s-this.startX+"px",s-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{o=Math.max(0,r-5),this.table.rowManager.getElement().scrollLeft=o,this.autoScrollTimeout=!1},1))),r+n.clientWidth-s<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{o=Math.min(n.clientWidth,r+5),this.table.rowManager.getElement().scrollLeft=o,this.autoScrollTimeout=!1},1)))}}return i})(),DS={delete:function(i,t,e){i.delete()}},MS={insert:function(i,t,e){return this.table.addRow(i.getData(),void 0,t),!0},add:function(i,t,e){return this.table.addRow(i.getData()),!0},update:function(i,t,e){return t?(t.update(i.getData()),!0):!1},replace:function(i,t,e){return t?(this.table.addRow(i.getData(),void 0,t),t.delete(),!0):!1}},SS=(()=>{class i extends N{static moduleName="moveRow";static senders=DS;static receivers=MS;constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var n=this,r={};r.mouseup=function(s){n.tableRowDrop(s,e)}.bind(n),r.mousemove=function(s){var o;s.pageY-te.elOffset(e.element).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?(n.toRow!==e||!n.toRowAfter)&&(o=e.getElement(),o.parentNode.insertBefore(n.placeholderElement,o.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(o=e.getElement(),o.previousSibling&&(o.parentNode.insertBefore(n.placeholderElement,o),n.moveRow(e,!1)))}.bind(n),e.modules.moveRow=r}initializeRow(e){var n=this,r={},s;r.mouseup=function(o){n.tableRowDrop(o,e)}.bind(n),r.mousemove=function(o){var a=e.getElement();o.pageY-te.elOffset(a).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?(n.toRow!==e||!n.toRowAfter)&&(a.parentNode.insertBefore(n.placeholderElement,a.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(a.parentNode.insertBefore(n.placeholderElement,a),n.moveRow(e,!1))}.bind(n),this.hasHandle||(s=e.getElement(),s.addEventListener("mousedown",function(o){o.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(o,e)},n.checkPeriod))}),s.addEventListener("mouseup",function(o){o.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=r}initializeColumn(e){e.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&this.table.options.movableRows!==!1){var n=this,r=e.getElement(!0);r.addEventListener("mousedown",function(s){s.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(s,e.row)},n.checkPeriod))}),r.addEventListener("mouseup",function(s){s.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(e.row,r)}}bindTouchEvents(e,n){var r=!1,s,o,a,l,u,c;n.addEventListener("touchstart",d=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=e.nextRow(),a=s?s.getHeight()/2:0,o=e.prevRow(),l=o?o.getHeight()/2:0,u=0,c=0,r=!1,this.startMove(d,e)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,n.addEventListener("touchmove",d=>{var h,f;this.moving&&(d.preventDefault(),this.moveHover(d),r||(r=d.touches[0].pageY),h=d.touches[0].pageY-r,h>0?s&&h-u>a&&(f=s,f!==e&&(r=d.touches[0].pageY,f.getElement().parentNode.insertBefore(this.placeholderElement,f.getElement().nextSibling),this.moveRow(f,!0))):o&&-h-c>l&&(f=o,f!==e&&(r=d.touches[0].pageY,f.getElement().parentNode.insertBefore(this.placeholderElement,f.getElement()),this.moveRow(f,!1))),f&&(s=f.nextRow(),u=a,a=s?s.getHeight()/2:0,o=f.prevRow(),c=l,l=o?o.getHeight()/2:0))}),n.addEventListener("touchend",d=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(d),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})}startMove(e,n){var r=n.getElement();this.setStartPosition(e,n),this.moving=n,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(n)):(r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r)),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",n.getComponent()),this.moveHover(e)}setStartPosition(e,n){var r=this.touchMove?e.touches[0].pageX:e.pageX,s=this.touchMove?e.touches[0].pageY:e.pageY,o,a;o=n.getElement(),this.connection?(a=o.getBoundingClientRect(),this.startX=a.left-r+window.pageXOffset,this.startY=a.top-s+window.pageYOffset):this.startY=s-o.getBoundingClientRect().top}endMove(e){(!e||e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,n){this.toRow=e,this.toRowAfter=n}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var n=this.table.rowManager.getElement(),r=n.scrollTop,s=(this.touchMove?e.touches[0].pageY:e.pageY)-n.getBoundingClientRect().top+r;this.hoverElement.style.top=Math.min(s-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,n,r){this.dispatchExternal("movableRowsElementDrop",e,n,r?r.getComponent():!1)}connectToTables(e){var n;this.connectionSelectorsTables&&(n=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",n),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(r=>{typeof r=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(r))):this.connectionElements.push(r)}),this.connectionElements.forEach(r=>{var s=o=>{this.elementRowDrop(o,r,this.moving)};r.addEventListener("mouseup",s),r.tabulatorElementDropEvent=s,r.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(n=>{n.classList.remove("tabulator-movingrow-receiving"),n.removeEventListener("mouseup",n.tabulatorElementDropEvent),delete n.tabulatorElementDropEvent})}connect(e,n){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=n,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{r.type==="row"&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().addEventListener("mouseup",r.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",n,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(n=>{n.type==="row"&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().removeEventListener("mouseup",n.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,n,r){var s=!1;if(r){switch(typeof this.table.options.movableRowsSender){case"string":s=i.senders[this.table.options.movableRowsSender];break;case"function":s=this.table.options.movableRowsSender;break}s?s.call(this,this.moving?this.moving.getComponent():void 0,n?n.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),n?n.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),n?n.getComponent():void 0,e);this.endMove()}tableRowDrop(e,n){var r=!1,s=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":r=i.receivers[this.table.options.movableRowsReceiver];break;case"function":r=this.table.options.movableRowsReceiver;break}r?s=r.call(this,this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),s?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:n,success:s})}commsReceived(e,n,r){switch(n){case"connect":return this.connect(e,r.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,r.row,r.success)}}}return i})(),_S={},xS=(()=>{class i extends N{static moduleName="mutator";static mutators=_S;constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard","import"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutatorImport"),this.registerColumnOption("mutatorImportParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,n,r){return this.transformRow(n,"data",r)}initializeColumn(e){var n=!1,r={};this.allowedTypes.forEach(s=>{var o="mutator"+(s.charAt(0).toUpperCase()+s.slice(1)),a;e.definition[o]&&(a=this.lookupMutator(e.definition[o]),a&&(n=!0,r[o]={mutator:a,params:e.definition[o+"Params"]||{}}))}),n&&(e.modules.mutate=r)}lookupMutator(e){var n=!1;switch(typeof e){case"string":i.mutators[e]?n=i.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":n=e;break}return n}transformRow(e,n,r){var s="mutator"+(n.charAt(0).toUpperCase()+n.slice(1)),o;return this.enabled&&this.table.columnManager.traverse(a=>{var l,u,c;a.modules.mutate&&(l=a.modules.mutate[s]||a.modules.mutate.mutator||!1,l&&(o=a.getFieldValue(typeof r<"u"?r:e),(n=="data"&&!r||typeof o<"u")&&(c=a.getComponent(),u=typeof l.params=="function"?l.params(o,e,n,c):l.params,a.setFieldValue(e,l.mutator(o,e,n,u,c)))))}),e}transformCell(e,n){if(e.column.modules.mutate){var r=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,s={};if(r)return s=Object.assign(s,e.row.getData()),e.column.setFieldValue(s,n),r.mutator(n,s,"edit",r.params,e.getComponent())}return n}mutateLink(e){var n=e.column.definition.mutateLink;n&&(Array.isArray(n)||(n=[n]),n.forEach(r=>{var s=e.row.getCell(r);s&&s.setValue(s.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}}return i})();function TS(i,t,e,n,r){var s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span"),c=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{o.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|of",d=>{l.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|rows",d=>{c.innerHTML=d}),n?(a.innerHTML=" "+t+"-"+Math.min(t+i-1,n)+" ",u.innerHTML=" "+n+" ",s.appendChild(o),s.appendChild(a),s.appendChild(l),s.appendChild(u),s.appendChild(c)):(a.innerHTML=" 0 ",s.appendChild(o),s.appendChild(a),s.appendChild(c)),s}function IS(i,t,e,n,r){var s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span"),c=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{o.innerHTML=d}),a.innerHTML=" "+e+" ",this.table.modules.localize.langBind("pagination|counter|of",d=>{l.innerHTML=d}),u.innerHTML=" "+r+" ",this.table.modules.localize.langBind("pagination|counter|pages",d=>{c.innerHTML=d}),s.appendChild(o),s.appendChild(a),s.appendChild(l),s.appendChild(u),s.appendChild(c),s}var RS={rows:TS,pages:IS},AS=(()=>{class i extends N{static moduleName="page";static pageCounters=RS;constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("paginationOutOfRange",!1),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,n){var r=this.table.rowManager,s=r.getDisplayRows(),o;return n?s.length?o=s[0]:r.activeRows.length&&(o=r.activeRows[r.activeRows.length-1],n=!1):s.length&&(o=s[s.length-1],n=!(s.length<this.size)),{index:o,top:n}}calculatePageSizes(){var e,n;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(e=document.createElement("div"),e.classList.add("tabulator-row"),e.style.visibility="hidden",n=document.createElement("div"),n.classList.add("tabulator-cell"),n.innerHTML="Page Row Test",e.appendChild(n),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,n,r,s){return this.initialLoad||(this.progressiveLoad&&!r||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),s.page=this.page,this.size&&(s.size=this.size),s}userSetPageToRow(e){return this.table.options.pagination&&(e=this.table.rowManager.findRow(e),e)?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return this.table.options.pagination?(this.setPageSize(e),this.setPage(1)):!1}scrollVertical(e,n){var r,s,o;!n&&!this.table.dataLoader.loading&&(r=this.table.rowManager.getElement(),s=r.scrollHeight-r.clientHeight-e,o=this.table.options.progressiveLoadScrollMargin||r.clientHeight*2,s<o&&this.nextPage().catch(()=>{}))}restOnRenderBefore(e,n){return n||this.mode==="local"&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,this.pageSizes.indexOf(this.size)==-1&&e.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){e=[];for(let n=1;n<5;n++)e.push(this.size*n);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(n=>{var r=document.createElement("option");r.value=n,n===!0?this.langBind("pagination|all",function(s){r.innerHTML=s}):r.innerHTML=n,this.pageSizeSelect.appendChild(r)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var e=this.table.options.paginationCounter,n=null;e&&(typeof e=="function"?n=e:n=i.pageCounters[e],n?(this.pageCounter=n,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",e))}initializePaginator(e){var n,r;e||(this.langBind("pagination|first",s=>{this.firstBut.innerHTML=s}),this.langBind("pagination|first_title",s=>{this.firstBut.setAttribute("aria-label",s),this.firstBut.setAttribute("title",s)}),this.langBind("pagination|prev",s=>{this.prevBut.innerHTML=s}),this.langBind("pagination|prev_title",s=>{this.prevBut.setAttribute("aria-label",s),this.prevBut.setAttribute("title",s)}),this.langBind("pagination|next",s=>{this.nextBut.innerHTML=s}),this.langBind("pagination|next_title",s=>{this.nextBut.setAttribute("aria-label",s),this.nextBut.setAttribute("title",s)}),this.langBind("pagination|last",s=>{this.lastBut.innerHTML=s}),this.langBind("pagination|last_title",s=>{this.lastBut.setAttribute("aria-label",s),this.lastBut.setAttribute("title",s)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(n=document.createElement("label"),this.langBind("pagination|page_size",s=>{this.pageSizeSelect.setAttribute("aria-label",s),this.pageSizeSelect.setAttribute("title",s),n.innerHTML=s}),this.element.appendChild(n),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",s=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(r=document.querySelector(this.table.options.paginationCounterElement),r?r.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(e){e?this.max=this.size===!0?1:Math.ceil(e/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||(this.mode=="local"||e)&&(this.page=1,this.trackChanges())}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return e=parseInt(e),e>0&&e<=this.max||this.mode!=="local"?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var n=this.displayRows(-1),r=n.indexOf(e);if(r>-1){var s=this.size===!0?1:Math.ceil((r+1)/this.size);return this.setPage(s)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){e!==!0&&(e=parseInt(e)),e>0&&(this.size=e,this.dispatchExternal("pageSizeChanged",e)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(e,n,r){var s;if(this.pageCounter)switch(this.mode==="remote"&&(n=this.size,r=(this.page-1)*this.size+1,e=this.remoteRowCountEstimate),s=this.pageCounter.call(this,n,r,this.page,e,this.max),typeof s){case"object":if(s instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(s)}else this.pageCounterElement.innerHTML="",s!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",s);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=s}}_setPageButtons(){let e=Math.floor((this.count-1)/2),n=Math.ceil((this.count-1)/2),r=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),s=this.page<=n?Math.min(this.count,this.max):Math.min(this.page+n,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let o=r;o<=s;o++)o>0&&o<=this.max&&this.pagesElement.appendChild(this._generatePageButton(o));this.footerRedraw()}_generatePageButton(e){var n=document.createElement("button");return n.classList.add("tabulator-page"),e==this.page&&n.classList.add("active"),n.setAttribute("type","button"),n.setAttribute("role","button"),this.langBind("pagination|page_title",r=>{n.setAttribute("aria-label",r+" "+e),n.setAttribute("title",r+" "+e)}),n.setAttribute("data-page",e),n.textContent=e,n.addEventListener("click",r=>{this.setPage(e)}),n}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var n=0,r,s,o,a,l=e.filter(u=>u.type==="row");if(this.mode=="local"){r=[],this.setMaxRows(e.length),this.size===!0?(s=0,o=e.length):(s=this.size*(this.page-1),o=s+parseInt(this.size)),this._setPageButtons();for(let u=s;u<o;u++){let c=e[u];c&&(r.push(c),c.type==="row"&&(a||(a=c),n++))}return this._setPageCounter(l.length,n,a?l.indexOf(a)+1:0),r}else return this._setPageButtons(),this._setPageCounter(l.length),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var n,r;if(typeof e.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),e.data)if(this.max=parseInt(e.last_page)||1,this.remoteRowCountEstimate=typeof e.last_row<"u"?e.last_row:e.last_page*this.size-(this.page==e.last_page?this.size-e.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(e.data,!1,this.page==1):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.page===1?e.data:this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,this.page!==1,this.page==1),n=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+n&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else{if(this.page>this.max&&(console.warn("Remote Pagination Error - Server returned last page value lower than the current page"),r=this.options("paginationOutOfRange"),r))return this.setPage(typeof r=="function"?r.call(this,this.page,this.max):r);this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.containerElement;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return i})(),kS={local:function(i,t){var e=localStorage.getItem(i+"-"+t);return e?JSON.parse(e):!1},cookie:function(i,t){var e=document.cookie,n=i+"-"+t,r=e.indexOf(n+"="),s,o;return r>-1&&(e=e.slice(r),s=e.indexOf(";"),s>-1&&(e=e.slice(0,s)),o=e.replace(n+"=","")),o?JSON.parse(o):!1}},NS={local:function(i,t,e){localStorage.setItem(i+"-"+t,JSON.stringify(e))},cookie:function(i,t,e){var n=new Date;n.setDate(n.getDate()+1e4),document.cookie=i+"-"+t+"="+JSON.stringify(e)+"; expires="+n.toUTCString()}},OS=(()=>{class i extends N{static moduleName="persistence";static moduleInitOrder=-10;static readers=kS;static writers=NS;constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,n=this.table.options.persistenceID,r;this.mode=e!==!0?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:i.readers[this.table.options.persistenceReaderFunc]?this.readFunc=i.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):i.readers[this.mode]?this.readFunc=i.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:i.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=i.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):i.writers[this.mode]?this.writeFunc=i.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(r=this.retrieveData("page"),r&&(typeof r.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=r.paginationSize),typeof r.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=r.paginationInitialPage))),this.config.group&&(r=this.retrieveData("group"),r&&(typeof r.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=r.groupBy),typeof r.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=r.groupStartOpen),typeof r.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=r.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,n,r;this.config.sort&&(e=this.load("sort"),e&&(this.table.options.initialSort=e)),this.config.filter&&(n=this.load("filter"),n&&(this.table.options.initialFilter=n)),this.config.headerFilter&&(r=this.load("headerFilter"),r&&(this.table.options.initialHeaderFilter=r))}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e,!0)),!0}initializeColumn(e){var n,r;this.config.columns&&(this.defWatcherBlock=!0,n=e.getDefinition(),r=this.config.columns===!0?Object.keys(n):this.config.columns,r.forEach(s=>{var o=Object.getOwnPropertyDescriptor(n,s),a=n[s];o&&Object.defineProperty(n,s,{set:l=>{a=l,this.defWatcherBlock||this.save("columns"),o.set&&o.set(l)},get:()=>(o.get&&o.get(),a)})}),this.defWatcherBlock=!1)}load(e,n){var r=this.retrieveData(e);return n&&(r=r?this.mergeDefinition(n,r):n),r}retrieveData(e){return this.readFunc?this.readFunc(this.id,e):!1}mergeDefinition(e,n,r){var s=[];return n=n||[],n.forEach((o,a)=>{var l=this._findColumn(e,o),u;l&&(r?u=Object.keys(o):this.config.columns===!0||this.config.columns==null?(u=Object.keys(l),u.push("width")):u=this.config.columns,u.forEach(c=>{c!=="columns"&&typeof o[c]<"u"&&(l[c]=o[c])}),l.columns&&(l.columns=this.mergeDefinition(l.columns,o.columns)),s.push(l))}),e.forEach((o,a)=>{var l=this._findColumn(n,o);l||(s.length>a?s.splice(a,0,o):s.push(o))}),s}_findColumn(e,n){var r=n.columns?"group":n.field?"field":"object";return e.find(function(s){switch(r){case"group":return s.title===n.title&&s.columns.length===n.columns.length;case"field":return s.field===n.field;case"object":return s===n}})}save(e){var n={};switch(e){case"columns":n=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":n=this.table.modules.filter.getFilters();break;case"headerFilter":n=this.table.modules.filter.getHeaderFilters();break;case"sort":n=this.validateSorters(this.table.modules.sort.getSort());break;case"group":n=this.getGroupConfig();break;case"page":n=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,e,n)}validateSorters(e){return e.forEach(function(n){n.column=n.field,delete n.field}),e}getGroupConfig(){var e={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var n=[],r=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(s=>{var o={},a=s.getDefinition(),l;s.isGroup?(o.title=a.title,o.columns=this.parseColumns(s.getColumns())):(o.field=s.getField(),this.config.columns===!0||this.config.columns==null?(l=Object.keys(a),l.push("width"),l.push("visible")):l=this.config.columns,l.forEach(u=>{switch(u){case"width":o.width=s.getWidth();break;case"visible":o.visible=s.visible;break;default:typeof a[u]!="function"&&r.indexOf(u)===-1&&(o[u]=a[u])}})),n.push(o)}),n}}return i})(),FS=(()=>{class i extends N{static moduleName="popup";constructor(e){super(e),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(e,n,r){this.loadPopupEvent(n,null,e,r)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(e){var n=e.definition;n.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),n.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),n.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),n.headerPopup&&this.initializeColumnHeaderPopup(e),n.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),n.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),n.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(e){var n=e.definition.headerPopupIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),n?(typeof n=="function"&&(n=n(e.getComponent())),n instanceof HTMLElement?r.appendChild(n):r.innerHTML=n):r.innerHTML="&vellip;",r.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.loadPopupEvent(e.definition.headerPopup,s,e)}),e.titleElement.insertBefore(r,e.titleElement.firstChild)}loadPopupTableCellEvent(e,n,r){r._cell&&(r=r._cell),r.column.definition[e]&&this.loadPopupEvent(r.column.definition[e],n,r)}loadPopupTableColumnEvent(e,n,r){r._column&&(r=r._column),r.definition[e]&&this.loadPopupEvent(r.definition[e],n,r)}loadPopupEvent(e,n,r,s){var o;function a(l){o=l}r._group?r=r._group:r._row&&(r=r._row),e=typeof e=="function"?e.call(this.table,n,r.getComponent(),a):e,this.loadPopup(n,r,e,o,s)}loadPopup(e,n,r,s,o){var a=!(e instanceof MouseEvent),l,u;r instanceof HTMLElement?l=r:(l=document.createElement("div"),l.innerHTML=r),l.classList.add("tabulator-popup"),l.addEventListener("click",c=>{c.stopPropagation()}),a||e.preventDefault(),u=this.popup(l),typeof s=="function"&&u.renderCallback(s),e?u.show(e):u.show(n.getElement(),o||"center"),u.hideOnBlur(()=>{this.dispatchExternal("popupClosed",n.getComponent())}),this.dispatchExternal("popupOpened",n.getComponent())}}return i})(),LS=(()=>{class i extends N{static moduleName="print";constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,n,r){var s=window.scrollX,o=window.scrollY,a=document.createElement("div"),l=document.createElement("div"),u=this.table.modules.export.generateTable(typeof r<"u"?r:this.table.options.printConfig,typeof n<"u"?n:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),c,d;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(a.classList.add("tabulator-print-header"),c=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof c=="string"?a.innerHTML=c:a.appendChild(c),this.element.appendChild(a)),this.element.appendChild(u),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),d=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof d=="string"?l.innerHTML=d:l.appendChild(d),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,u),window.print(),this.cleanup(),window.scrollTo(s,o),this.manualBlock=!1}}return i})(),PS=(()=>{class i extends N{static moduleName="reactiveData";constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var n=this,r;this.currentVersion++,r=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),o;return!n.blocked&&r===n.currentVersion&&(n.block("data-push"),s.forEach(a=>{n.table.rowManager.addRowActual(a,!1)}),o=n.origFuncs.push.apply(e,arguments),n.unblock("data-push")),o}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),o;return!n.blocked&&r===n.currentVersion&&(n.block("data-unshift"),s.forEach(a=>{n.table.rowManager.addRowActual(a,!0)}),o=n.origFuncs.unshift.apply(e,arguments),n.unblock("data-unshift")),o}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var s,o;return!n.blocked&&r===n.currentVersion&&(n.block("data-shift"),n.data.length&&(s=n.table.rowManager.getRowFromDataObject(n.data[0]),s&&s.deleteActual()),o=n.origFuncs.shift.call(e),n.unblock("data-shift")),o}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var s,o;return!n.blocked&&r===n.currentVersion&&(n.block("data-pop"),n.data.length&&(s=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]),s&&s.deleteActual()),o=n.origFuncs.pop.call(e),n.unblock("data-pop")),o}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),o=s[0]<0?e.length+s[0]:s[0],a=s[1],l=s[2]?s.slice(2):!1,u,c;if(!n.blocked&&r===n.currentVersion){if(n.block("data-splice"),l&&(u=e[o]?n.table.rowManager.getRowFromDataObject(e[o]):!1,u?l.forEach(h=>{n.table.rowManager.addRowActual(h,!0,u,!0)}):(l=l.slice().reverse(),l.forEach(h=>{n.table.rowManager.addRowActual(h,!0,!1,!0)}))),a!==0){var d=e.slice(o,typeof s[1]>"u"?s[1]:o+a);d.forEach((h,f)=>{var p=n.table.rowManager.getRowFromDataObject(h);p&&p.deleteActual(f!==d.length-1)})}(l||a!==0)&&n.table.rowManager.reRenderInPosition(),c=n.origFuncs.splice.apply(e,arguments),n.unblock("data-splice")}return c}})}unwatchData(){if(this.data!==!1)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var n=e.getData();for(var r in n)this.watchKey(e,n,r);this.table.options.dataTree&&this.watchTreeChildren(e)}watchTreeChildren(e){var n=this,r=e.getData()[this.table.options.dataTreeChildField],s={};r&&(s.push=r.push,Object.defineProperty(r,"push",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-push");var o=s.push.apply(r,arguments);this.rebuildTree(e),n.unblock("tree-push")}return o}}),s.unshift=r.unshift,Object.defineProperty(r,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-unshift");var o=s.unshift.apply(r,arguments);this.rebuildTree(e),n.unblock("tree-unshift")}return o}}),s.shift=r.shift,Object.defineProperty(r,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-shift");var o=s.shift.call(r);this.rebuildTree(e),n.unblock("tree-shift")}return o}}),s.pop=r.pop,Object.defineProperty(r,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-pop");var o=s.pop.call(r);this.rebuildTree(e),n.unblock("tree-pop")}return o}}),s.splice=r.splice,Object.defineProperty(r,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-splice");var o=s.splice.apply(r,arguments);this.rebuildTree(e),n.unblock("tree-splice")}return o}}))}rebuildTree(e){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(e,n,r){var s=this,o=Object.getOwnPropertyDescriptor(n,r),a=n[r],l=this.currentVersion;Object.defineProperty(n,r,{set:u=>{if(a=u,!s.blocked&&l===s.currentVersion){s.block("key");var c={};c[r]=u,e.updateData(c),s.unblock("key")}o.set&&o.set(u)},get:()=>(o.get&&o.get(),a)})}unwatchRow(e){var n=e.getData();for(var r in n)Object.defineProperty(n,r,{value:n[r]})}block(e){this.blocked||(this.blocked=e)}unblock(e){this.blocked===e&&(this.blocked=!1)}}return i})(),VS=(()=>{class i extends N{static moduleName="resizeColumns";constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(e){e.row.type==="row"&&(this.deInitializeComponent(e),this.initializeColumn("cell",e,e.column,e.element))}layoutColumnHeader(e){e.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(e),this.initializeColumn("header",e,e,e.element))}columnLayoutUpdated(e){var n=e.prevColumn();this.reinitializeColumn(e),n&&this.reinitializeColumn(n)}columnWidthUpdated(e){e.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(e)?this.table.modules.frozenColumns.leftColumns.forEach(n=>{this.reinitializeColumn(n)}):this.table.modules.frozenColumns.rightColumns.includes(e)&&this.table.modules.frozenColumns.rightColumns.forEach(n=>{this.reinitializeColumn(n)}))}frozenColumnOffset(e){var n=!1;return e.modules.frozen&&(n=e.modules.frozen.marginValue,e.modules.frozen.position==="left"?n+=e.getWidth()-3:n&&(n-=3)),n!==!1?n+"px":!1}reinitializeColumn(e){var n=this.frozenColumnOffset(e);e.cells.forEach(r=>{r.modules.resize&&r.modules.resize.handleEl&&(n&&(r.modules.resize.handleEl.style[e.modules.frozen.position]=n,r.modules.resize.handleEl.style["z-index"]=11),r.element.after(r.modules.resize.handleEl))}),e.modules.resize&&e.modules.resize.handleEl&&(n&&(e.modules.resize.handleEl.style[e.modules.frozen.position]=n),e.element.after(e.modules.resize.handleEl))}initializeColumn(e,n,r,s){var o=this,a=!1,l=r.definition.resizable,u={},c=r.getLastColumn();if(e==="header"&&(a=r.definition.formatter=="textarea"||r.definition.variableHeight,u={variableHeight:a}),(l===!0||l==e)&&this._checkResizability(c)){var d=document.createElement("span");d.className="tabulator-col-resize-handle",d.addEventListener("click",function(f){f.stopPropagation()});var h=function(f){o.startColumn=r,o.initialNextColumn=o.nextColumn=c.nextColumn(),o._mouseDown(f,c,d)};d.addEventListener("mousedown",h),d.addEventListener("touchstart",h,{passive:!0}),d.addEventListener("dblclick",f=>{var p=c.getWidth();f.stopPropagation(),c.reinitializeWidth(!0),p!==c.getWidth()&&(o.dispatch("column-resized",c),o.dispatchExternal("columnResized",c.getComponent()))}),r.modules.frozen&&(d.style.position="sticky",d.style[r.modules.frozen.position]=this.frozenColumnOffset(r)),u.handleEl=d,s.parentNode&&r.visible&&s.after(d)}n.modules.resize=u}deInitializeColumn(e){this.deInitializeComponent(e),e.cells.forEach(n=>{this.deInitializeComponent(n)})}deInitializeComponent(e){var n;e.modules.resize&&(n=e.modules.resize.handleEl,n&&n.parentElement&&n.parentElement.removeChild(n))}resizeHandle(e,n){e.modules.resize&&e.modules.resize.handleEl&&(e.modules.resize.handleEl.style.height=n)}resize(e,n){var r=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s=r-this.startX,o=r-this.latestX,a,l;if(this.latestX=r,this.table.rtl&&(s=-s,o=-o),a=n.width==n.minWidth||n.width==n.maxWidth,n.setWidth(this.startWidth+s),l=n.width==n.minWidth||n.width==n.maxWidth,o<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(a&&l)){let u=this.nextColumn.getWidth();o>0&&u<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-o)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights()}calcGuidePosition(e,n,r){var s=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,o=r.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,a=this.table.element.getBoundingClientRect().x,l=n.element.getBoundingClientRect().left-a,u=s-this.startX,c=Math.max(o+u,l+n.minWidth);return n.maxWidth&&(c=Math.min(c,l+n.maxWidth)),c}_checkResizability(e){return e.definition.resizable}_mouseDown(e,n,r){var s=this,o;this.dispatchExternal("columnResizing",n.getComponent()),s.table.options.resizableColumnGuide&&(o=document.createElement("span"),o.classList.add("tabulator-col-resize-guide"),s.table.element.appendChild(o),setTimeout(()=>{o.style.left=s.calcGuidePosition(e,n,r)+"px"})),s.table.element.classList.add("tabulator-block-select");function a(u){s.table.options.resizableColumnGuide?o.style.left=s.calcGuidePosition(u,n,r)+"px":s.resize(u,n)}function l(u){s.table.options.resizableColumnGuide&&(s.resize(u,n),o.remove()),s.startColumn.modules.edit&&(s.startColumn.modules.edit.blocked=!1),s.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights(),document.body.removeEventListener("mouseup",l),document.body.removeEventListener("mousemove",a),r.removeEventListener("touchmove",a),r.removeEventListener("touchend",l),s.table.element.classList.remove("tabulator-block-select"),s.startWidth!==n.getWidth()&&(s.table.columnManager.verticalAlignHeaders(),s.dispatch("column-resized",n),s.dispatchExternal("columnResized",n.getComponent()))}e.stopPropagation(),s.startColumn.modules.edit&&(s.startColumn.modules.edit.blocked=!0),s.startX=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s.latestX=s.startX,s.startWidth=n.getWidth(),document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",l),r.addEventListener("touchmove",a,{passive:!0}),r.addEventListener("touchend",l)}}return i})(),HS=(()=>{class i extends N{static moduleName="resizeRows";constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var n=this,r=e.getElement(),s=document.createElement("div");s.className="tabulator-row-resize-handle";var o=document.createElement("div");o.className="tabulator-row-resize-handle prev",s.addEventListener("click",function(u){u.stopPropagation()});var a=function(u){n.startRow=e,n._mouseDown(u,e,s)};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a,{passive:!0}),o.addEventListener("click",function(u){u.stopPropagation()});var l=function(u){var c=n.table.rowManager.prevDisplayRow(e);c&&(n.startRow=c,n._mouseDown(u,c,o))};o.addEventListener("mousedown",l),o.addEventListener("touchstart",l,{passive:!0}),r.appendChild(s),r.appendChild(o)}resize(e,n){n.setHeight(this.startHeight+((typeof e.screenY>"u"?e.touches[0].screenY:e.screenY)-this.startY))}calcGuidePosition(e,n,r){var s=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,o=r.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,a=this.table.element.getBoundingClientRect().y,l=n.element.getBoundingClientRect().top-a,u=s-this.startY;return Math.max(o+u,l)}_mouseDown(e,n,r){var s=this,o;s.dispatchExternal("rowResizing",n.getComponent()),s.table.options.resizableRowGuide&&(o=document.createElement("span"),o.classList.add("tabulator-row-resize-guide"),s.table.element.appendChild(o),setTimeout(()=>{o.style.top=s.calcGuidePosition(e,n,r)+"px"})),s.table.element.classList.add("tabulator-block-select");function a(u){s.table.options.resizableRowGuide?o.style.top=s.calcGuidePosition(u,n,r)+"px":s.resize(u,n)}function l(u){s.table.options.resizableRowGuide&&(s.resize(u,n),o.remove()),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",a),r.removeEventListener("touchmove",a),r.removeEventListener("touchend",l),s.table.element.classList.remove("tabulator-block-select"),s.dispatchExternal("rowResized",n.getComponent())}e.stopPropagation(),s.startY=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,s.startHeight=n.getHeight(),document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",l),r.addEventListener("touchmove",a,{passive:!0}),r.addEventListener("touchend",l)}}return i})(),jS=(()=>{class i extends N{static moduleName="resizeTable";constructor(e){super(e),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e=this.table,n;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&e.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(r=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var s=Math.floor(r[0].contentRect.height),o=Math.floor(r[0].contentRect.width);(this.tableHeight!=s||this.tableWidth!=o)&&(this.tableHeight=s,this.tableWidth=o,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(e.element),n=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(n.getPropertyValue("max-height")||n.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(r=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var s=Math.floor(r[0].contentRect.height),o=Math.floor(r[0].contentRect.width);(this.containerHeight!=s||this.containerWidth!=o)&&(this.containerHeight=s,this.containerWidth=o,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell))&&(e.columnManager.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{this.visible=e[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(e){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(e))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return i})();function BS(i,t,e){var n=document.createElement("div"),r=i.getRow()._row.modules.responsiveLayout;n.classList.add("tabulator-responsive-collapse-toggle"),n.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,i.getElement().classList.add("tabulator-row-handle");function s(o){var a=r.element;r.open=o,a&&(r.open?(n.classList.add("open"),a.style.display=""):(n.classList.remove("open"),a.style.display="none"))}return n.addEventListener("click",function(o){o.stopImmediatePropagation(),s(!r.open),i.getTable().rowManager.adjustTableSize()}),s(r.open),n}var zS={format:{formatters:{responsiveCollapse:BS}}},US=(()=>{class i extends N{static moduleName="responsiveLayout";static moduleExtensions=zS;constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((n,r)=>{n.modules.responsive&&n.modules.responsive.order&&n.modules.responsive.visible&&(n.modules.responsive.index=r,e.push(n),!n.visible&&this.mode==="collapse"&&this.hiddenColumns.push(n))}),e=e.reverse(),e=e.sort((n,r)=>{var s=r.modules.responsive.order-n.modules.responsive.order;return s||r.modules.responsive.index-n.modules.responsive.index}),this.columns=e,this.mode==="collapse"&&this.generateCollapsedContent();for(let n of this.table.columnManager.columnsByIndex)if(n.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=n;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var n=e.getDefinition();e.modules.responsive={order:typeof n.responsive>"u"?1:n.responsive,visible:n.visible!==!1}}initializeRow(e){var n;e.type!=="calc"&&(n=document.createElement("div"),n.classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:n,open:this.collapseStartOpen},this.collapseStartOpen||(n.style.display="none"))}layoutRow(e){var n=e.getElement();e.modules.responsiveLayout&&(n.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,n){!n&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initializeResponsivity())}hideColumn(e){var n=this.hiddenColumns.length;e.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!n&&this.collapseHandleColumn.show())}showColumn(e){var n;e.show(!1,!0),e.setWidth(e.getWidth()),this.mode==="collapse"&&(n=this.hiddenColumns.indexOf(e),n>-1&&this.hiddenColumns.splice(n,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=!0;e;){let n=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),r=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-n;if(r<0){let s=this.columns[this.index];s?(this.hideColumn(s),this.index++):e=!1}else{let s=this.columns[this.index-1];s&&r>0&&r>=s.getWidth()?(this.showColumn(s),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this.table.rowManager.getDisplayRows();e.forEach(n=>{this.generateCollapsedRowContent(n)})}generateCollapsedRowContent(e){var n,r;if(e.modules.responsiveLayout){for(n=e.modules.responsiveLayout.element;n.firstChild;)n.removeChild(n.firstChild);r=this.collapseFormatter(this.generateCollapsedRowData(e)),r&&n.appendChild(r),e.calcHeight(!0)}}generateCollapsedRowData(e){var n=e.getData(),r=[],s;return this.hiddenColumns.forEach(o=>{var a=o.getFieldValue(n);if(o.definition.title&&o.field)if(o.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let u=function(c){c()};var l=u;s={value:!1,data:{},getValue:function(){return a},getData:function(){return n},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return o.getComponent()},getTable:()=>this.table},r.push({field:o.field,title:o.definition.title,value:o.modules.format.formatter.call(this.table.modules.format,s,o.modules.format.params,u)})}else r.push({field:o.field,title:o.definition.title,value:a})}),r}formatCollapsedData(e){var n=document.createElement("table");return e.forEach(r=>{var s=document.createElement("tr"),o=document.createElement("td"),a=document.createElement("td"),l,u=document.createElement("strong");o.appendChild(u),this.modules.localize.bind("columns|"+r.field,function(c){u.innerHTML=c||r.title}),r.value instanceof Node?(l=document.createElement("div"),l.appendChild(r.value),a.appendChild(l)):a.innerHTML=r.value,s.appendChild(o),s.appendChild(a),n.appendChild(s)}),Object.keys(e).length?n:""}}return i})();function $S(i,t,e){var n=document.createElement("input"),r=!1;if(n.type="checkbox",n.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(n.addEventListener("click",o=>{o.stopPropagation()}),typeof i.getRow=="function"){var s=i.getRow();s instanceof Ri?(n.addEventListener("change",o=>{this.table.options.selectableRowsRangeMode==="click"&&r?r=!1:s.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&n.addEventListener("click",o=>{r=!0,this.table.modules.selectRow.handleComplexRowClick(s._row,o)}),n.checked=s.isSelected&&s.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(s,n)):n=""}else n.addEventListener("change",o=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(n);return n}var WS={format:{formatters:{rowSelection:$S}}},GS=(()=>{class i extends N{static moduleName="selectRow";static moduleExtensions=WS;constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(n,r){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(e,n){return e==="selected"?this.selectedRows:n}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){var n=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],n&&e!==!0&&this._rowSelectionChanged()}initializeRow(e){var n=this,r=n.checkRowSelectability(e),s=e.getElement(),o=function(){setTimeout(function(){n.selecting=!1},50),document.body.removeEventListener("mouseup",o)};e.modules.select={selected:!1},s.classList.toggle("tabulator-selectable",r),s.classList.toggle("tabulator-unselectable",!r),n.checkRowSelectability(e)&&n.table.options.selectableRows&&n.table.options.selectableRows!="highlight"&&(n.table.options.selectableRowsRangeMode==="click"?s.addEventListener("click",this.handleComplexRowClick.bind(this,e)):(s.addEventListener("click",function(a){(!n.table.modExists("edit")||!n.table.modules.edit.getCurrentCell())&&n.table._clearSelection(),n.selecting||n.toggleRow(e)}),s.addEventListener("mousedown",function(a){if(a.shiftKey)return n.table._clearSelection(),n.selecting=!0,n.selectPrev=[],document.body.addEventListener("mouseup",o),document.body.addEventListener("keyup",o),n.toggleRow(e),!1}),s.addEventListener("mouseenter",function(a){n.selecting&&(n.table._clearSelection(),n.toggleRow(e),n.selectPrev[1]==e&&n.toggleRow(n.selectPrev[0]))}),s.addEventListener("mouseout",function(a){n.selecting&&(n.table._clearSelection(),n.selectPrev.unshift(e))})))}handleComplexRowClick(e,n){if(n.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||e;var r=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),s=this.table.rowManager.getDisplayRowIndex(e),o=r<=s?r:s,a=r>=s?r:s,l=this.table.rowManager.getDisplayRows().slice(0),u=l.splice(o,a-o+1);n.ctrlKey||n.metaKey?(u.forEach(c=>{c!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(e)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(c):this.toggleRow(c))}),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&u.length>this.table.options.selectableRows&&(u=u.slice(0,this.table.options.selectableRows)),this.selectRows(u)),this.table._clearSelection()}else n.ctrlKey||n.metaKey?(this.toggleRow(e),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.selectRows(e),this.lastClickedRow=e)}checkRowSelectability(e){return e&&e.type==="row"?this.table.options.selectableRowsCheck.call(this.table,e.getComponent()):!1}toggleRow(e){this.checkRowSelectability(e)&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var n=[],r,s;switch(typeof e){case"undefined":r=this.table.rowManager.rows;break;case"number":r=this.table.rowManager.findRow(e);break;case"string":r=this.table.rowManager.findRow(e),r||(r=this.table.rowManager.getRows(e));break;default:r=e;break}Array.isArray(r)?r.length&&(r.forEach(o=>{s=this._selectRow(o,!0,!0),s&&n.push(s)}),this._rowSelectionChanged(!1,n)):r&&this._selectRow(r,!1,!0)}_selectRow(e,n,r){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!r&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var s=this.table.rowManager.findRow(e);if(s){if(this.selectedRows.indexOf(s)==-1)return s.getElement().classList.add("tabulator-selected"),s.modules.select||(s.modules.select={}),s.modules.select.selected=!0,s.modules.select.checkboxEl&&(s.modules.select.checkboxEl.checked=!0),this.selectedRows.push(s),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(s,!0),this.dispatchExternal("rowSelected",s.getComponent()),this._rowSelectionChanged(n,s),s}else n||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return this.selectedRows.indexOf(e)!==-1}deselectRows(e,n){var r=[],s,o;switch(typeof e){case"undefined":s=Object.assign([],this.selectedRows);break;case"number":s=this.table.rowManager.findRow(e);break;case"string":s=this.table.rowManager.findRow(e),s||(s=this.table.rowManager.getRows(e));break;default:s=e;break}Array.isArray(s)?s.length&&(s.forEach(a=>{o=this._deselectRow(a,!0,!0),o&&r.push(o)}),this._rowSelectionChanged(n,[],r)):s&&this._deselectRow(s,n,!0)}_deselectRow(e,n){var r=this,s=r.table.rowManager.findRow(e),o,a;if(s){if(o=r.selectedRows.findIndex(function(l){return l==s}),o>-1)return a=s.getElement(),a&&a.classList.remove("tabulator-selected"),s.modules.select||(s.modules.select={}),s.modules.select.selected=!1,s.modules.select.checkboxEl&&(s.modules.select.checkboxEl.checked=!1),r.selectedRows.splice(o,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(s,!1),this.dispatchExternal("rowDeselected",s.getComponent()),r._rowSelectionChanged(n,void 0,s),s}else n||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getComponent())}),e}_rowSelectionChanged(e,n=[],r=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||(Array.isArray(n)||(n=[n]),n=n.map(s=>s.getComponent()),Array.isArray(r)||(r=[r]),r=r.map(s=>s.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),n,r))}registerRowSelectCheckbox(e,n){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=n}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,n){var r=this.table.modules.dataTree.getChildren(e,!0,!0);if(n)for(let s of r)this._selectRow(s,!0);else for(let s of r)this._deselectRow(s,!0)}}return i})(),kc=class{constructor(t){return this._range=t,new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._range.table.componentFunctionBinder.handle("range",e._range,n)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(t=>t.getComponent())}getColumns(){return this._range.getColumns().map(t=>t.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(t,e){this._range.destroyedGuard("setBounds")&&this._range.setBounds(t&&t._cell,e&&e._cell)}setStartBound(t){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(t&&t._cell),this._range.rangeManager.layoutElement())}setEndBound(t){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(t&&t._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}},Nc=class extends be{constructor(t,e,n,r){super(t),this.rangeManager=e,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=t,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(n,r)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(t,e){this._updateMinMax(),t&&this.setBounds(t,e||t)}setStart(t,e){(this.start.row!==t||this.start.col!==e)&&(this.start.row=t,this.start.col=e,this.initializing.start=!0,this._updateMinMax())}setEnd(t,e){(this.end.row!==t||this.end.col!==e)&&(this.end.row=t,this.end.col=e,this.initializing.end=!0,this._updateMinMax())}setBounds(t,e,n){t&&this.setStartBound(t),this.setEndBound(e||t),this.rangeManager.layoutElement(n)}setStartBound(t){var e,n;t.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,t.getPosition()-1):(e=t.row.position-1,n=t.column.getPosition()-1,t.column===this.rangeManager.rowHeader?this.setStart(e,1):this.setStart(e,n))}setEndBound(t){var e=this._getTableRows().length,n,r,s;t.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(e-1,t.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,t.getPosition()-1)):(n=t.row.position-1,r=t.column.getPosition()-1,s=t.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(n,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&s?this.setEnd(n,0):this.rangeManager.selecting==="column"?this.setEnd(e-1,r):this.setEnd(n,r))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(t=>t.type==="row")}layout(){var t=this.table.rowManager.renderer.vDomTop,e=this.table.rowManager.renderer.vDomBottom,n=this.table.columnManager.renderer.leftCol,r=this.table.columnManager.renderer.rightCol,s,o,a,l,u,c,d,h,f,p;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(r+=1),t==null&&(t=0),e==null&&(e=1/0),n==null&&(n=0),r==null&&(r=1/0),this.overlaps(n,t,r,e)&&(s=Math.max(this.top,t),o=Math.min(this.bottom,e),a=Math.max(this.left,n),l=Math.min(this.right,r),u=this.rangeManager.getCell(s,a),c=this.rangeManager.getCell(o,l),d=u.getElement(),h=c.getElement(),f=u.row.getElement(),p=c.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=f.offsetWidth-d.offsetLeft-d.offsetWidth+"px",this.element.style.width=d.offsetLeft+d.offsetWidth-h.offsetLeft+"px"):(this.element.style.left=f.offsetLeft+d.offsetLeft+"px",this.element.style.width=h.offsetLeft+h.offsetWidth-d.offsetLeft+"px"),this.element.style.top=f.offsetTop+"px",this.element.style.height=p.offsetTop+p.offsetHeight-f.offsetTop+"px")}atTopLeft(t){return t.row.position-1===this.top&&t.column.getPosition()-1===this.left}atBottomRight(t){return t.row.position-1===this.bottom&&t.column.getPosition()-1===this.right}occupies(t){return this.occupiesRow(t.row)&&this.occupiesColumn(t.column)}occupiesRow(t){return this.top<=t.position-1&&t.position-1<=this.bottom}occupiesColumn(t){return this.left<=t.getPosition()-1&&t.getPosition()-1<=this.right}overlaps(t,e,n,r){return!(this.left>n||t>this.right||this.top>r||e>this.bottom)}getData(){var t=[],e=this.getRows(),n=this.getColumns();return e.forEach(r=>{var s=r.getData(),o={};n.forEach(a=>{o[a.field]=s[a.field]}),t.push(o)}),t}getCells(t,e){var n=[],r=this.getRows(),s=this.getColumns();return t?n=r.map(o=>{var a=[];return o.getCells().forEach(l=>{s.includes(l.column)&&a.push(e?l.getComponent():l)}),a}):r.forEach(o=>{o.getCells().forEach(a=>{s.includes(a.column)&&n.push(e?a.getComponent():a)})}),n}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var t=this.getCells(),e=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),t.forEach(n=>{n.setValue(e)}),this.table.restoreRedraw()}getBounds(t){var e=this.getCells(!1,t),n={start:null,end:null};return e.length?(n.start=e[0],n.end=e[e.length-1]):console.warn("No bounds defined on range"),n}getComponent(){return this.component||(this.component=new kc(this)),this.component}destroy(t){this.destroyed=!0,this.element.remove(),t&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(t){return this.destroyed&&console.warn("You cannot call the "+t+" function on a destroyed range"),!this.destroyed}},qS={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},ZS={rangeJumpLeft:function(i){this.dispatch("keybinding-nav-range",i,"left",!0,!1)},rangeJumpRight:function(i){this.dispatch("keybinding-nav-range",i,"right",!0,!1)},rangeJumpUp:function(i){this.dispatch("keybinding-nav-range",i,"up",!0,!1)},rangeJumpDown:function(i){this.dispatch("keybinding-nav-range",i,"down",!0,!1)},rangeExpandLeft:function(i){this.dispatch("keybinding-nav-range",i,"left",!1,!0)},rangeExpandRight:function(i){this.dispatch("keybinding-nav-range",i,"right",!1,!0)},rangeExpandUp:function(i){this.dispatch("keybinding-nav-range",i,"up",!1,!0)},rangeExpandDown:function(i){this.dispatch("keybinding-nav-range",i,"down",!1,!0)},rangeExpandJumpLeft:function(i){this.dispatch("keybinding-nav-range",i,"left",!0,!0)},rangeExpandJumpRight:function(i){this.dispatch("keybinding-nav-range",i,"right",!0,!0)},rangeExpandJumpUp:function(i){this.dispatch("keybinding-nav-range",i,"up",!0,!0)},rangeExpandJumpDown:function(i){this.dispatch("keybinding-nav-range",i,"down",!0,!0)}},YS={range:function(i){var t=[],e=this.table.modules.selectRange.activeRange,n=!1,r,s,o,a,l;return l=i.length,e&&(r=e.getBounds(),s=r.start,r.start===r.end&&(n=!0),s&&(t=this.table.rowManager.activeRows.slice(),o=t.indexOf(s.row),n?a=i.length:a=t.indexOf(r.end.row)-o+1,o>-1&&(this.table.blockRedraw(),t=t.slice(o,o+a),t.forEach((u,c)=>{u.updateData(i[c%l])}),this.table.restoreRedraw()))),t}},QS={range:function(i){var t=[],e=[],n=this.table.modules.selectRange.activeRange,r=!1,s,o,a,l,u;return n&&(s=n.getBounds(),o=s.start,s.start===s.end&&(r=!0),o&&(i=i.split(`
`),i.forEach(function(c){t.push(c.split("	"))}),t.length&&(l=this.table.columnManager.getVisibleColumnsByIndex(),u=l.indexOf(o.column),u>-1)))?(r?a=t[0].length:a=l.indexOf(s.end.column)-u+1,l=l.slice(u,u+a),t.forEach(c=>{var d={},h=c.length;l.forEach(function(f,p){d[f.field]=c[p%h]}),e.push(d)}),e):!1}},KS={range:function(){var i=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&i.unshift(this.columnManager.rowHeader),i}},XS={range:function(){return this.modules.selectRange.selectedRows()}},JS={keybindings:{bindings:qS,actions:ZS},clipboard:{pasteActions:YS,pasteParsers:QS},export:{columnLookups:KS,rowLookups:XS}},e_=(()=>{class i extends N{static moduleName="selectRange";static moduleInitOrder=1;static moduleExtensions=JS;constructor(e){super(e),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableOption("selectableRangeAutoFocus",!0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(e=>e.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(e=>e.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(e){this.columnSelection&&e.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),e.modules.edit}updateHeaderColumn(){var e;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(e=this.table.modules.frozenColumns.getFrozenColumns(),(e.length>1||e.length===1&&e[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(e=>e.getComponent())}getRangesData(){return this.ranges.map(e=>e.getData())}addRangeFromComponent(e,n){return e=e?e._cell:null,n=n?n._cell:null,this.addRange(e,n)}cellGetRanges(e){var n=[];return e.column===this.rowHeader?n=this.ranges.filter(r=>r.occupiesRow(e.row)):n=this.ranges.filter(r=>r.occupies(e)),n.map(r=>r.getComponent())}rowGetRanges(e){var n=this.ranges.filter(r=>r.occupiesRow(e));return n.map(r=>r.getComponent())}colGetRanges(e){var n=this.ranges.filter(r=>r.occupiesColumn(e));return n.map(r=>r.getComponent())}_handleMouseUp(e){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(e){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(e.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),e.preventDefault()}(e.key==="Backspace"||e.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(e){var n;this.restoreFocus();try{document.selection?(n=document.body.createTextRange(),n.moveToElementText(e.getElement()),n.select()):window.getSelection&&(n=document.createRange(),n.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(n))}catch{}}restoreFocus(e){return this.table.rowManager.element.focus(),!0}handleColumnResized(e){var n;this.selecting!=="column"&&this.selecting!=="all"||(n=this.ranges.some(r=>r.occupiesColumn(e)),n&&this.ranges.forEach(r=>{var s=r.getColumns(!0);s.forEach(o=>{o!==e&&o.setWidth(e.width)})}))}handleColumnMoving(e,n){this.resetRanges().setBounds(n),this.overlay.style.visibility="hidden"}handleColumnMoved(e,n,r){this.activeRange.setBounds(e),this.layoutElement()}handleColumnMouseDown(e,n){e.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(n)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(n)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,n))}handleColumnMouseMove(e,n){n===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,n,!0)}renderCell(e){var n=e.getElement(),r=this.ranges.findIndex(s=>s.occupies(e));n.classList.toggle("tabulator-range-selected",r!==-1),n.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(e)&&this.ranges[0].atBottomRight(e)),n.dataset.range=r}handleCellMouseDown(e,n){e.button===2&&(this.activeRange.occupies(n)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(n.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,n))}handleCellMouseMove(e,n){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,n,!0)}handleCellClick(e,n){this.initializeFocus(n)}handleEditingCell(e){this.activeRange&&this.activeRange.setBounds(e)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(e,n){this.navigate(!1,!1,e),n.preventDefault()}keyNavigateRange(e,n,r,s){this.navigate(r,s,n),e.preventDefault()}navigate(e,n,r){var s=!1,o,a,l,u,c,d,h,f,p,m,b;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(g=>g===this.activeRange?(g.setEnd(g.start.row,g.start.col),!0):(g.destroy(),!1))),o=this.activeRange,l={top:o.top,bottom:o.bottom,left:o.left,right:o.right},a=n?o.end:o.start,u=a.row,c=a.col,e)switch(r){case"left":c=this.findJumpCellLeft(o.start.row,a.col);break;case"right":c=this.findJumpCellRight(o.start.row,a.col);break;case"up":u=this.findJumpCellUp(a.row,o.start.col);break;case"down":u=this.findJumpCellDown(a.row,o.start.col);break}else{if(n&&(this.selecting==="row"&&(r==="left"||r==="right")||this.selecting==="column"&&(r==="up"||r==="down")))return;switch(r){case"left":c=Math.max(c-1,0);break;case"right":c=Math.min(c+1,this.getTableColumns().length-1);break;case"up":u=Math.max(u-1,0);break;case"down":u=Math.min(u+1,this.getTableRows().length-1);break}}if(this.rowHeader&&c===0&&(c=1),n||o.setStart(u,c),o.setEnd(u,c),n||(this.selecting="cell"),s=l.top!==o.top||l.bottom!==o.bottom||l.left!==o.left||l.right!==o.right,s)return d=this.getRowByRangePos(o.end.row),h=this.getColumnByRangePos(o.end.col),f=d.getElement().getBoundingClientRect(),m=h.getElement().getBoundingClientRect(),p=this.table.rowManager.getElement().getBoundingClientRect(),b=this.table.columnManager.getElement().getBoundingClientRect(),f.top>=p.top&&f.bottom<=p.bottom||(d.getElement().parentNode&&h.getElement().parentNode?this.autoScroll(o,d.getElement(),h.getElement()):d.getComponent().scrollTo(void 0,!1)),m.left>=b.left+this.getRowHeaderWidth()&&m.right<=b.right||(d.getElement().parentNode&&h.getElement().parentNode?this.autoScroll(o,d.getElement(),h.getElement()):h.getComponent().scrollTo(void 0,!1)),this.layoutElement(),!0}rangeRemoved(e){this.ranges=this.ranges.filter(n=>n!==e),this.activeRange===e&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(e,n,r,s,o){return r&&(n=n.reverse()),this.findJumpItem(s,o,n,function(a){return a.getData()[e.getField()]})}findJumpCol(e,n,r,s,o){return r&&(n=n.reverse()),this.findJumpItem(s,o,n,function(a){return e.getData()[a.getField()]})}findJumpItem(e,n,r,s){var o;for(let a of r){let l=s(a);if(e){if(o=a,l)break}else if(n){if(o=a,l)break}else if(l)o=a;else break}return o}findJumpCellLeft(e,n){var r=this.getRowByRangePos(e),s=this.getTableColumns(),o=this.isEmpty(r.getData()[s[n].getField()]),a=s[n-1]?this.isEmpty(r.getData()[s[n-1].getField()]):!1,l=this.rowHeader?s.slice(1,n):s.slice(0,n),u=this.findJumpCol(r,l,!0,o,a);return u?u.getPosition()-1:n}findJumpCellRight(e,n){var r=this.getRowByRangePos(e),s=this.getTableColumns(),o=this.isEmpty(r.getData()[s[n].getField()]),a=s[n+1]?this.isEmpty(r.getData()[s[n+1].getField()]):!1,l=this.findJumpCol(r,s.slice(n+1,s.length),!1,o,a);return l?l.getPosition()-1:n}findJumpCellUp(e,n){var r=this.getColumnByRangePos(n),s=this.getTableRows(),o=this.isEmpty(s[e].getData()[r.getField()]),a=s[e-1]?this.isEmpty(s[e-1].getData()[r.getField()]):!1,l=this.findJumpRow(r,s.slice(0,e),!0,o,a);return l?l.position-1:e}findJumpCellDown(e,n){var r=this.getColumnByRangePos(n),s=this.getTableRows(),o=this.isEmpty(s[e].getData()[r.getField()]),a=s[e+1]?this.isEmpty(s[e+1].getData()[r.getField()]):!1,l=this.findJumpRow(r,s.slice(e+1,s.length),!1,o,a);return l?l.position-1:e}newSelection(e,n){var r;if(n.type==="column"){if(!this.columnSelection)return;if(n===this.rowHeader){r=this.resetRanges(),this.selecting="all";var s,o=this.getCell(-1,-1);this.rowHeader?s=this.getCell(0,1):s=this.getCell(0,0),r.setBounds(s,o);return}else this.selecting="column"}else n.column===this.rowHeader?this.selecting="row":this.selecting="cell";e.shiftKey?this.activeRange.setBounds(!1,n):e.ctrlKey?this.addRange().setBounds(n):this.resetRanges().setBounds(n)}autoScroll(e,n,r){var s=this.table.rowManager.element,o,a,l,u;typeof n>"u"&&(n=this.getRowByRangePos(e.end.row).getElement()),typeof r>"u"&&(r=this.getColumnByRangePos(e.end.col).getElement()),o={left:r.offsetLeft,right:r.offsetLeft+r.offsetWidth,top:n.offsetTop,bottom:n.offsetTop+n.offsetHeight},a={left:s.scrollLeft+this.getRowHeaderWidth(),right:Math.ceil(s.scrollLeft+s.clientWidth),top:s.scrollTop,bottom:s.scrollTop+s.offsetHeight-this.table.rowManager.scrollbarWidth},l=a.left<o.left&&o.left<a.right&&a.left<o.right&&o.right<a.right,u=a.top<o.top&&o.top<a.bottom&&a.top<o.bottom&&o.bottom<a.bottom,l||(o.left<a.left?s.scrollLeft=o.left-this.getRowHeaderWidth():o.right>a.right&&(s.scrollLeft=Math.min(o.right-s.clientWidth,o.left-this.getRowHeaderWidth()))),u||(o.top<a.top?s.scrollTop=o.top:o.bottom>a.bottom&&(s.scrollTop=o.bottom-s.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(e){e&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(e){var n;e?n=this.table.rowManager.getVisibleRows(!0):n=this.table.rowManager.getRows(),n.forEach(r=>{r.type==="row"&&(this.layoutRow(r),r.cells.forEach(s=>this.renderCell(s)))}),this.getTableColumns().forEach(r=>{this.layoutColumn(r)}),this.layoutRanges()}layoutRow(e){var n=e.getElement(),r=!1,s=this.ranges.some(o=>o.occupiesRow(e));this.selecting==="row"?r=s:this.selecting==="all"&&(r=!0),n.classList.toggle("tabulator-range-selected",r),n.classList.toggle("tabulator-range-highlight",s)}layoutColumn(e){var n=e.getElement(),r=!1,s=this.ranges.some(o=>o.occupiesColumn(e));this.selecting==="column"?r=s:this.selecting==="all"&&(r=!0),n.classList.toggle("tabulator-range-selected",r),n.classList.toggle("tabulator-range-highlight",s)}layoutRanges(){var e,n,r;this.table.initialized&&(e=this.getActiveCell(),e&&(n=e.getElement(),r=e.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=r.offsetWidth-n.offsetLeft-n.offsetWidth+"px":this.activeRangeCellElement.style.left=r.offsetLeft+n.offsetLeft+"px",this.activeRangeCellElement.style.top=r.offsetTop+"px",this.activeRangeCellElement.style.width=n.offsetWidth+"px",this.activeRangeCellElement.style.height=r.offsetHeight+"px",this.ranges.forEach(s=>s.layout()),this.overlay.style.visibility="visible"))}getCell(e,n){var r;return n<0&&(n=this.getTableColumns().length+n,n<0)?null:(e<0&&(e=this.getTableRows().length+e),r=this.table.rowManager.getRowFromPosition(e+1),r?r.getCells(!1,!0).filter(s=>s.column.visible)[n]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(e){return this.getTableRows()[e]}getColumnByRangePos(e){return this.getTableColumns()[e]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(e,n){var r;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),r=new Nc(this.table,this,e,n),this.activeRange=r,this.ranges.push(r),this.rangeContainer.appendChild(r.element),r}resetRanges(){var e,n,r;return this.ranges.forEach(s=>s.destroy()),this.ranges=[],e=this.addRange(),this.table.rowManager.activeRows.length&&(r=this.table.rowManager.activeRows[0].cells.filter(s=>s.column.visible),n=r[this.rowHeader?1:0],n&&(e.setBounds(n),this.options("selectableRangeAutoFocus")&&this.initializeFocus(n))),e}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(e){return e?this.activeRange.getRows().map(n=>n.getComponent()):this.activeRange.getRows()}selectedColumns(e){return e?this.activeRange.getColumns().map(n=>n.getComponent()):this.activeRange.getColumns()}getRowHeaderWidth(){return this.rowHeader?this.rowHeader.getElement().offsetWidth:0}isEmpty(e){return e==null||e===""}}return i})();function t_(i,t,e,n,r,s,o){var a=o.alignEmptyValues,l=o.decimalSeparator,u=o.thousandSeparator,c=0;if(i=String(i),t=String(t),u&&(i=i.split(u).join(""),t=t.split(u).join("")),l&&(i=i.split(l).join("."),t=t.split(l).join(".")),i=parseFloat(i),t=parseFloat(t),isNaN(i))c=isNaN(t)?0:-1;else if(isNaN(t))c=1;else return i-t;return(a==="top"&&s==="desc"||a==="bottom"&&s==="asc")&&(c*=-1),c}function n_(i,t,e,n,r,s,o){var a=o.alignEmptyValues,l=0,u;if(!i)l=t?-1:0;else if(!t)l=1;else{switch(typeof o.locale){case"boolean":o.locale&&(u=this.langLocale());break;case"string":u=o.locale;break}return String(i).toLowerCase().localeCompare(String(t).toLowerCase(),u)}return(a==="top"&&s==="desc"||a==="bottom"&&s==="asc")&&(l*=-1),l}function Kc(i,t,e,n,r,s,o){var a=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),l=o.format||"dd/MM/yyyy HH:mm:ss",u=o.alignEmptyValues,c=0;if(typeof a<"u"){if(a.isDateTime(i)||(l==="iso"?i=a.fromISO(String(i)):i=a.fromFormat(String(i),l)),a.isDateTime(t)||(l==="iso"?t=a.fromISO(String(t)):t=a.fromFormat(String(t),l)),!i.isValid)c=t.isValid?-1:0;else if(!t.isValid)c=1;else return i-t;return(u==="top"&&s==="desc"||u==="bottom"&&s==="asc")&&(c*=-1),c}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function i_(i,t,e,n,r,s,o){return o.format||(o.format="dd/MM/yyyy"),Kc.call(this,i,t,e,n,r,s,o)}function r_(i,t,e,n,r,s,o){return o.format||(o.format="HH:mm"),Kc.call(this,i,t,e,n,r,s,o)}function s_(i,t,e,n,r,s,o){var a=i===!0||i==="true"||i==="True"||i===1?1:0,l=t===!0||t==="true"||t==="True"||t===1?1:0;return a-l}function o_(i,t,e,n,r,s,o){var a=o.type||"length",l=o.alignEmptyValues,u=0,c=this.table,d;o.valueMap&&(typeof o.valueMap=="string"?d=function(f){return f.map(p=>te.retrieveNestedData(c.options.nestedFieldSeparator,o.valueMap,p))}:d=o.valueMap);function h(f){var p;switch(d&&(f=d(f)),a){case"length":p=f.length;break;case"sum":p=f.reduce(function(m,b){return m+b});break;case"max":p=Math.max.apply(null,f);break;case"min":p=Math.min.apply(null,f);break;case"avg":p=f.reduce(function(m,b){return m+b})/f.length;break;case"string":p=f.join("");break}return p}if(!Array.isArray(i))u=Array.isArray(t)?-1:0;else if(!Array.isArray(t))u=1;else return a==="string"?String(h(i)).toLowerCase().localeCompare(String(h(t)).toLowerCase()):h(t)-h(i);return(l==="top"&&s==="desc"||l==="bottom"&&s==="asc")&&(u*=-1),u}function a_(i,t,e,n,r,s,o){var a=typeof i>"u"?0:1,l=typeof t>"u"?0:1;return a-l}function l_(i,t,e,n,r,s,o){var a,l,u,c,d=0,h,f=/(\d+)|(\D+)/g,p=/\d/,m=o.alignEmptyValues,b=0;if(!i&&i!==0)b=!t&&t!==0?0:-1;else if(!t&&t!==0)b=1;else{if(isFinite(i)&&isFinite(t))return i-t;if(a=String(i).toLowerCase(),l=String(t).toLowerCase(),a===l)return 0;if(!(p.test(a)&&p.test(l)))return a>l?1:-1;for(a=a.match(f),l=l.match(f),h=a.length>l.length?l.length:a.length;d<h;)if(u=a[d],c=l[d++],u!==c)return isFinite(u)&&isFinite(c)?(u.charAt(0)==="0"&&(u="."+u),c.charAt(0)==="0"&&(c="."+c),u-c):u>c?1:-1;return a.length>l.length}return(m==="top"&&s==="desc"||m==="bottom"&&s==="asc")&&(b*=-1),b}var u_={number:t_,string:n_,date:i_,time:r_,datetime:Kc,boolean:s_,array:o_,exists:a_,alphanum:l_},c_=(()=>{class i extends N{static moduleName="sort";static sorters=u_;constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,n,r,s){var o=this.getSort();return o.forEach(a=>{delete a.column}),s.sort=o,s}userSetSort(e,n){this.setSort(e,n),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var n=!1,r,s;switch(typeof e.definition.sorter){case"string":i.sorters[e.definition.sorter]?n=i.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":n=e.definition.sorter;break}if(e.modules.sort={sorter:n,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},e.definition.headerSort!==!1){switch(r=e.getElement(),r.classList.add("tabulator-sortable"),s=document.createElement("div"),s.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":s.classList.add("tabulator-col-sorter-element");break;case"header":r.classList.add("tabulator-col-sorter-element");break;default:r.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":s.appendChild(this.table.options.headerSortElement);break;default:s.innerHTML=this.table.options.headerSortElement}e.titleHolderElement.appendChild(s),e.modules.sort.element=s,this.setColumnHeaderSortIcon(e,"none"),this.table.options.headerSortClickElement==="icon"&&s.addEventListener("mousedown",o=>{o.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?s:r).addEventListener("click",o=>{var a="",l=[],u=!1;if(e.modules.sort){if(e.modules.sort.tristate)e.modules.sort.dir=="none"?a=e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?a=e.modules.sort.dir=="asc"?"desc":"asc":a="none";else switch(e.modules.sort.dir){case"asc":a="desc";break;case"desc":a="asc";break;default:a=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(o.shiftKey||o.ctrlKey)?(l=this.getSort(),u=l.findIndex(c=>c.field===e.getField()),u>-1?(l[u].dir=a,u=l.splice(u,1)[0],a!="none"&&l.push(u)):a!="none"&&l.push({column:e,dir:a}),this.setSort(l)):a=="none"?this.clear():this.setSort(e,a),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=this,n=[];return e.sortList.forEach(function(r){r.column&&n.push({column:r.column.getComponent(),field:r.column.getField(),dir:r.dir})}),n}setSort(e,n){var r=this,s=[];Array.isArray(e)||(e=[{column:e,dir:n}]),e.forEach(function(o){var a;a=r.table.columnManager.findColumn(o.column),a?(o.column=a,s.push(o),r.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",o.column)}),r.sortList=s,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var n=this.table.rowManager.activeRows[0],r="string",s,o;if(n&&(n=n.getData(),s=e.getField(),s))switch(o=e.getFieldValue(n),typeof o){case"undefined":r="string";break;case"boolean":r="boolean";break;default:!isNaN(o)&&o!==""?r="number":o.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(r="alphanum");break}return i.sorters[r]}sort(e,n){var r=this,s=this.table.options.sortOrderReverse?r.sortList.slice().reverse():r.sortList,o=[],a=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",r.getSort()),n||r.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(s.forEach(function(l,u){var c;l.column&&(c=l.column.modules.sort,c&&(c.sorter||(c.sorter=r.findSorter(l.column)),l.params=typeof c.params=="function"?c.params(l.column.getComponent(),l.dir):c.params,o.push(l)),n||r.setColumnHeader(l.column,l.dir))}),o.length&&r._sortItems(e,o)):n||s.forEach(function(l,u){r.setColumnHeader(l.column,l.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(l=>{a.push(l.getComponent())}),this.dispatchExternal("dataSorted",r.getSort(),a)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(e=>{e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(e,"none"))})}setColumnHeader(e,n){e.modules.sort.dir=n,e.getElement().setAttribute("aria-sort",n==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(e,n)}setColumnHeaderSortIcon(e,n){var r=e.modules.sort.element,s;if(e.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;r.firstChild;)r.removeChild(r.firstChild);s=this.table.options.headerSortElement.call(this.table,e.getComponent(),n),typeof s=="object"?r.appendChild(s):r.innerHTML=s}}_sortItems(e,n){var r=n.length-1;e.sort((s,o)=>{for(var a,l=r;l>=0;l--){let u=n[l];if(a=this._sortRow(s,o,u.column,u.dir,u.params),a!==0)break}return a})}_sortRow(e,n,r,s,o){var a,l,u=s=="asc"?e:n,c=s=="asc"?n:e;return e=r.getFieldValue(u.getData()),n=r.getFieldValue(c.getData()),e=typeof e<"u"?e:"",n=typeof n<"u"?n:"",a=u.getComponent(),l=c.getComponent(),r.modules.sort.sorter.call(this,e,n,a,l,r.getComponent(),s,o)}}return i})(),Oc=class{constructor(t,e){this.columnCount=t,this.rowCount=e,this.columnString=[],this.columns=[],this.rows=[]}genColumns(t){var e=Math.max(this.columnCount,Math.max(...t.map(n=>n.length)));this.columnString=[],this.columns=[];for(let n=1;n<=e;n++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(t){var e=Math.max(this.rowCount,t.length);this.rows=[];for(let n=1;n<=e;n++)this.rows.push(n);return this.rows}incrementChar(t){let e=this.columnString[t];e?e!=="Z"?this.columnString[t]=String.fromCharCode(this.columnString[t].charCodeAt(0)+1):(this.columnString[t]="A",t?this.incrementChar(t-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(t){this.rowCount=t}setColumnCount(t){this.columnCount=t}},Go=class{constructor(t){return this._sheet=t,new Proxy(this,{get:function(e,n,r){return typeof e[n]<"u"?e[n]:e._sheet.table.componentFunctionBinder.handle("sheet",e._sheet,n)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(t){return this._sheet.setData(t)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(t){return this._sheet.setTitle(t)}setRows(t){return this._sheet.setRows(t)}setColumns(t){return this._sheet.setColumns(t)}},qo=class extends be{constructor(t,e){super(t.table),this.spreadsheetManager=t,this.definition=e,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new Oc(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(t=>{var e=Object.assign({},this.columnDefinition);e.field=t,e.title=t,this.columnDefs.push(e)})}initializeRows(){var t;this.grid.setRowCount(this.rowCount),t=this.grid.genRows(this.data),this.rowDefs=[],t.forEach((e,n)=>{var r={_id:e},s=this.data[n];s&&s.forEach((o,a)=>{var l=this.columnFields[a];l&&(r[l]=o)}),this.rowDefs.push(r)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var t=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),t&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new Go(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(t){var e=[],n,r,s;return this.rowDefs.forEach(o=>{var a=[];this.columnFields.forEach(l=>{a.push(o[l])}),e.push(a)}),!t&&!this.options("spreadsheetOutputFull")&&(n=e.map(o=>o.findLastIndex(a=>typeof a<"u")+1),r=Math.max(...n),s=n.findLastIndex(o=>o>0)+1,e=e.slice(0,s),e=e.map(o=>o.slice(0,r))),e}setData(t){this.data=t,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(t){this.title=t,this.element.innerText=t,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(t){this.rowCount=t,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(t){this.columnCount=t,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}},Lt=(()=>{class i extends N{static moduleName="spreadsheet";constructor(e){super(e),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var e=this.options("spreadsheetSheetTabsElement");e&&!(e instanceof HTMLElement)&&(e=document.querySelector(e),e||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),e?e.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(e,n,r){return console.log("data",e,n,r),Array.isArray(e)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",e),!e.length||Array.isArray(e[0])?this.loadData(e):this.loadSheets(e)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e),!1}loadData(e){var n={data:e};this.loadSheet(this.newSheet(n))}destroySheets(){this.sheets.forEach(e=>{e.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(e){Array.isArray(e)||(e=[]),this.destroySheets(),e.forEach(n=>{this.newSheet(n)}),this.loadSheet(this.sheets[0])}loadSheet(e){this.activeSheet!==e&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=e,e.load())}newSheet(e={}){var n;return e.rows||(e.rows=this.options("spreadsheetRows")),e.columns||(e.columns=this.options("spreadsheetColumns")),n=new qo(this,e),this.sheets.push(n),this.element&&this.element.appendChild(n.element),n}removeSheet(e){var n=this.sheets.indexOf(e),r;this.sheets.length>1?n>-1&&(this.sheets.splice(n,1),e.destroy(),this.activeSheet===e&&(r=this.sheets[n-1]||this.sheets[0],r?this.loadSheet(r):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(e){return e?e instanceof qo?e:e instanceof Go?e._sheet:this.sheets.find(n=>n.key===e)||!1:this.activeSheet}setSheets(e){return this.loadSheets(e),this.getSheets()}addSheet(e){return this.newSheet(e).getComponent()}getSheetDefinitions(){return this.sheets.map(e=>e.getDefinition())}getSheets(){return this.sheets.map(e=>e.getComponent())}getSheet(e){var n=this.lookupSheet(e);return n?n.getComponent():!1}setSheetData(e,n){e&&!n&&(n=e,e=!1);var r=this.lookupSheet(e);return r?r.setData(n):!1}getSheetData(e){var n=this.lookupSheet(e);return n?n.getData():!1}clearSheet(e){var n=this.lookupSheet(e);return n?n.clear():!1}removeSheetFunc(e){var n=this.lookupSheet(e);n&&this.removeSheet(n)}activeSheetFunc(e){var n=this.lookupSheet(e);return n?this.loadSheet(n):!1}}return i})(),d_=(()=>{class i extends N{static moduleName="tooltip";constructor(e){super(e),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(e){e.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),e.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(e,n,r){var s=e==="tooltip"?r.column.definition.tooltip:r.definition.headerTooltip;s&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,n,r,s),this.table.options.tooltipDelay))}mouseoutCheck(e,n,r){this.popupInstance||this.clearPopup()}clearPopup(e,n,r){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(e,n,r){var s,o,a;function l(u){o=u}typeof r=="function"&&(r=r(e,n.getComponent(),l)),r instanceof HTMLElement?s=r:(s=document.createElement("div"),r===!0&&(n instanceof Fn?r=n.value:n.definition.field?this.langBind("columns|"+n.definition.field,u=>{s.innerHTML=r=u||n.definition.title}):r=n.definition.title),s.innerHTML=r),(r||r===0||r===!1)&&(s.classList.add("tabulator-tooltip"),s.addEventListener("mousemove",u=>u.preventDefault()),this.popupInstance=this.popup(s),typeof o=="function"&&this.popupInstance.renderCallback(o),a=this.popupInstance.containerEventCoords(e),this.popupInstance.show(a.x+15,a.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",n.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",n.getComponent()))}}return i})(),h_={integer:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:(t=Number(t),!isNaN(t)&&isFinite(t)&&Math.floor(t)===t)},float:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:(t=Number(t),!isNaN(t)&&isFinite(t)&&t%1!==0)},numeric:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:!isNaN(t)},string:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:isNaN(t)},alphanumeric:function(i,t,e){if(t===""||t===null||typeof t>"u")return!0;var n=new RegExp(/^[a-z0-9]+$/i);return n.test(t)},max:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:parseFloat(t)<=e},min:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:parseFloat(t)>=e},starts:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).length>=e},maxLength:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:String(t).length<=e},in:function(i,t,e){return t===""||t===null||typeof t>"u"?!0:(typeof e=="string"&&(e=e.split("|")),e.indexOf(t)>-1)},regex:function(i,t,e){if(t===""||t===null||typeof t>"u")return!0;var n=new RegExp(e);return n.test(t)},unique:function(i,t,e){if(t===""||t===null||typeof t>"u")return!0;var n=!0,r=i.getData(),s=i.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(o){var a=o.getData();a!==r&&t==s.getFieldValue(a)&&(n=!1)}),n},required:function(i,t,e){return t!==""&&t!==null&&typeof t<"u"}},f_=(()=>{class i extends N{static moduleName="validate";static validators=h_;constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(e,n,r){var s=this.table.options.validationMode!=="manual"?this.validate(e.column.modules.validate,e,n):!0;return s!==!0&&setTimeout(()=>{e.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",e.getComponent(),n,s)}),s}editorClear(e,n){n&&e.column.modules.validate&&this.cellValidate(e),e.getElement().classList.remove("tabulator-validation-fail")}editedClear(e){e.modules.validate&&(e.modules.validate.invalid=!1)}cellIsValid(e){return e.modules.validate&&e.modules.validate.invalid||!0}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var n=[];return e.cells.forEach(r=>{this.cellValidate(r)!==!0&&n.push(r.getComponent())}),n.length?n:!0}rowValidate(e){var n=[];return e.cells.forEach(r=>{this.cellValidate(r)!==!0&&n.push(r.getComponent())}),n.length?n:!0}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.clearValidation(n._getSelf())})}userValidate(e){var n=[];return this.table.rowManager.rows.forEach(r=>{r=r.getComponent();var s=r.validate();s!==!0&&(n=n.concat(s))}),n.length?n:!0}initializeColumnCheck(e){typeof e.definition.validator<"u"&&this.initializeColumn(e)}initializeColumn(e){var n=this,r=[],s;e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(o=>{s=n._extractValidator(o),s&&r.push(s)}):(s=this._extractValidator(e.definition.validator),s&&r.push(s)),e.modules.validate=r.length?r:!1)}_extractValidator(e){var n,r,s;switch(typeof e){case"string":return s=e.indexOf(":"),s>-1?(n=e.substring(0,s),r=e.substring(s+1)):n=e,this._buildValidator(n,r);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,n){var r=typeof e=="function"?e:i.validators[e];return r?{type:typeof e=="function"?"function":e,func:r,params:n}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,n,r){var s=this,o=[],a=this.invalidCells.indexOf(n);return e&&e.forEach(l=>{l.func.call(s,n.getComponent(),r,l.params)||o.push({type:l.type,parameters:l.params})}),n.modules.validate||(n.modules.validate={}),o.length?(n.modules.validate.invalid=o,this.table.options.validationMode!=="manual"&&n.getElement().classList.add("tabulator-validation-fail"),a==-1&&this.invalidCells.push(n)):(n.modules.validate.invalid=!1,n.getElement().classList.remove("tabulator-validation-fail"),a>-1&&this.invalidCells.splice(a,1)),o.length?o:!0}getInvalidCells(){var e=[];return this.invalidCells.forEach(n=>{e.push(n.getComponent())}),e}clearValidation(e){var n;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,n=this.invalidCells.indexOf(e),n>-1&&this.invalidCells.splice(n,1))}}return i})(),xc=Object.freeze({__proto__:null,AccessorModule:z0,AjaxModule:q0,ClipboardModule:J0,ColumnCalcsModule:tM,DataTreeModule:nM,DownloadModule:cM,EditModule:SM,ExportModule:TM,FilterModule:RM,FormatModule:eS,FrozenColumnsModule:tS,FrozenRowsModule:nS,GroupRowsModule:iS,HistoryModule:uS,HtmlTableImportModule:cS,ImportModule:gS,InteractionModule:bS,KeybindingsModule:CS,MenuModule:wS,MoveColumnsModule:ES,MoveRowsModule:SS,MutatorModule:xS,PageModule:AS,PersistenceModule:OS,PopupModule:FS,PrintModule:LS,ReactiveDataModule:PS,ResizeColumnsModule:VS,ResizeRowsModule:HS,ResizeTableModule:jS,ResponsiveLayoutModule:US,SelectRangeModule:e_,SelectRowModule:GS,SortModule:c_,SpreadsheetModule:Lt,TooltipModule:d_,ValidateModule:f_}),p_={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{},dependencies:{}},Zo=class{constructor(t,e,n={}){this.table=t,this.msgType=e,this.registeredDefaults=Object.assign({},n)}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var n=Object.assign({},this.registeredDefaults),r=this.table.options.debugInvalidOptions||e.debugInvalidOptions===!0;Object.assign(n,t);for(let s in e)n.hasOwnProperty(s)||(r&&console.warn("Invalid "+this.msgType+" option:",s),n[s]=e.key);for(let s in n)s in e?n[s]=e[s]:Array.isArray(n[s])?n[s]=Object.assign([],n[s]):typeof n[s]=="object"&&n[s]!==null?n[s]=Object.assign({},n[s]):typeof n[s]>"u"&&delete n[s];return n}},Ai=class extends be{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,n){var r=this.rows().indexOf(t),s=t.getElement(),o=0;return new Promise((a,l)=>{if(r>-1){if(typeof n>"u"&&(n=this.table.options.scrollToRowIfVisible),!n&&te.elVisible(s)&&(o=te.elOffset(s).top-te.elOffset(this.elementVertical).top,o>0&&o<this.elementVertical.clientHeight-s.offsetHeight))return a(),!1;switch(typeof e>"u"&&(e=this.table.options.scrollToRowPosition),e==="nearest"&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(s.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-s.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-s.offsetTop)+s.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+s.offsetHeight;break;case"top":this.elementVertical.scrollTop=s.offsetTop;break}a()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})}},Fc=class extends Ai{constructor(t){super(t)}renderRowCells(t,e){let n=document.createDocumentFragment();t.cells.forEach(r=>{n.appendChild(r.getElement())}),t.element.appendChild(n),e||t.cells.forEach(r=>{r.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}},Lc=class extends Ai{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var t=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(e=>{if(e.visible){var n=e.getWidth();n>t&&(t=n)}}),this.windowBuffer=t*2}rerenderColumns(t,e){var n={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},r=0;t&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(s=>{var o={},a;s.visible&&(s.modules.frozen||(a=s.getWidth(),o.leftPos=r,o.rightPos=r+a,o.width=a,this.isFitData&&(o.fitDataCheck=s.modules.vdomHoz?s.modules.vdomHoz.fitDataCheck:!0),r+a>this.vDomScrollPosLeft&&r<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=r),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=a),this.columns.push(s),s.modules.vdomHoz=o,r+=a))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(n))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(t){if(this.initialized)this.initializeRow(t);else{let e=document.createDocumentFragment();t.cells.forEach(n=>{e.appendChild(n.getElement())}),t.element.appendChild(e),t.cells.forEach(n=>{n.cellRendered()})}}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var t=!1,e,n;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(r=>{!r.definition.width&&r.visible&&(t=!0)}),t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,e=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],e)){n=e.getElement(),e.generateCells(),this.tableElement.appendChild(n);for(let r=0;r<e.cells.length;r++){let s=e.cells[r];n.appendChild(s.getElement()),s.column.reinitializeWidth()}n.parentNode.removeChild(n),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol?!0:(t.cols.forEach((n,r)=>{n!==this.columns[r]&&(e=!1)}),!e)}reinitializeRows(){var t=this.getVisibleRows(),e=this.table.rowManager.getRows().filter(n=>!t.includes(n));t.forEach(n=>{this.reinitializeRow(n,!0)}),e.forEach(n=>{n.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,Math.abs(t)>this.windowBuffer/2?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,n){for(let r=t;r<e;r++){let s=this.columns[r];s.modules.vdomHoz.leftPos+=n,s.modules.vdomHoz.rightPos+=n}}addColRight(){for(var t=!1,e=!0;e;){let n=this.columns[this.rightCol+1];n&&n.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var s=r.getCell(n);r.getElement().insertBefore(s.getElement(),r.getCell(this.columns[this.rightCol]).getElement().nextSibling),s.cellRendered()}}),this.fitDataColActualWidthCheck(n),this.rightCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=n.getWidth()):e=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var t=!1,e=!0;e;){let n=this.columns[this.leftCol-1];if(n)if(n.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){t=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var o=s.getCell(n);s.getElement().insertBefore(o.getElement(),s.getCell(this.columns[this.leftCol]).getElement()),o.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=n.getWidth();let r=this.fitDataColActualWidthCheck(n);r&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+r,this.vDomPadRight-=r)}else e=!1;else e=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var t=!1,e=!0;e;){let n=this.columns[this.rightCol];n&&n.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var s=r.getCell(n);try{r.getElement().removeChild(s.getElement())}catch(o){console.warn("Could not removeColRight",o.message)}}}),this.vDomPadRight+=n.getWidth(),this.rightCol--,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)})):e=!1}t&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var t=!1,e=!0;e;){let n=this.columns[this.leftCol];n&&n.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(t=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var s=r.getCell(n);try{r.getElement().removeChild(s.getElement())}catch(o){console.warn("Could not removeColLeft",o.message)}}}),this.vDomPadLeft+=n.getWidth(),this.leftCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.leftCol=this.leftCol)})):e=!1}t&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(t){var e,n;return t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),e=t.getWidth(),n=e-t.modules.vdomHoz.width,n&&(t.modules.vdomHoz.rightPos+=n,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.columns.indexOf(t)+1,this.columns.length,n)),t.modules.vdomHoz.fitDataCheck=!1),n}initializeRow(t){if(t.type!=="group"){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(e=>{this.appendCell(t,e)});for(let e=this.leftCol;e<=this.rightCol;e++)this.appendCell(t,this.columns[e]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(e=>{this.appendCell(t,e)})}}appendCell(t,e){if(e&&e.visible){let n=t.getCell(e);t.getElement().appendChild(n.getElement()),n.cellRendered()}}reinitializeRow(t,e){if(t.type!=="group"&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var n=t.getElement();n.firstChild;)n.removeChild(n.firstChild);this.initializeRow(t)}}},Pc=class extends be{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Zo(this.table,"column definition",cg),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(t){this.table.rtl?this.headersElement.style.marginLeft=t+"px":this.headersElement.style.marginRight=t+"px"}initializeRenderer(){var t,e={virtual:Lc,basic:Fc};typeof this.table.options.renderHorizontal=="string"?t=e[this.table.options.renderHorizontal]:t=this.table.options.renderHorizontal,t?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderContentsElement(){var t=document.createElement("div");return t.classList.add("tabulator-header-contents"),t.setAttribute("role","rowgroup"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(t){this.contentsElement.scrollLeft=t,this.scrollLeft=t,this.renderer.scrollColumns(t)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",t=>{var e;t.deltaX&&(e=this.contentsElement.scrollLeft+t.deltaX,this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e))})}generateColumnsFromRowData(t){var e=[],n={},r=this.table.options.autoColumns==="full"?t:[t[0]],s=this.table.options.autoColumnsDefinitions;if(t&&t.length){if(r.forEach(o=>{Object.keys(o).forEach((a,l)=>{let u=o[a],c;n[a]?n[a]!==!0&&typeof u<"u"&&(n[a].sorter=this.calculateSorterFromValue(u),n[a]=!0):(c={field:a,title:a,sorter:this.calculateSorterFromValue(u)},e.splice(l,0,c),n[a]=typeof u>"u"?c:!0)})}),s)switch(typeof s){case"function":this.table.options.columns=s.call(this.table,e);break;case"object":Array.isArray(s)?e.forEach(o=>{var a=s.find(l=>l.field===o.field);a&&Object.assign(o,a)}):e.forEach(o=>{s[o.field]&&Object.assign(o,s[o.field])}),this.table.options.columns=e;break}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(t){var e;switch(typeof t){case"undefined":e="string";break;case"boolean":e="boolean";break;case"number":e="number";break;case"object":Array.isArray(t)?e="array":e="string";break;default:!isNaN(t)&&t!==""?e="number":t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?e="alphanum":e="string";break}return e}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new Nr(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),t.forEach((n,r)=>{this._addColumn(n)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,n){var r=new Nr(t,this),s=r.getElement(),o=n&&this.findColumnIndex(n);if(e&&this.rowHeader&&(!n||n===this.rowHeader)&&(e=!1,n=this.rowHeader,o=0),n&&o>-1){var a=n.getTopColumn(),l=this.columns.indexOf(a),u=a.getElement();e?(this.columns.splice(l,0,r),u.parentNode.insertBefore(s,u)):(this.columns.splice(l+1,0,r),u.parentNode.insertBefore(s,u.nextSibling))}else e?(this.columns.unshift(r),this.headersElement.insertBefore(r.getElement(),this.headersElement.firstChild)):(this.columns.push(r),this.headersElement.appendChild(r.getElement()));return r.columnRendered(),r}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(e=>{e.clearVerticalAlign()}),this.columns.forEach(e=>{var n=e.getHeight();n>t&&(t=n)}),this.headersElement.style.height=t+"px",this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize())}findColumn(t){var e;if(typeof t=="object"){if(t instanceof Nr)return t;if(t instanceof $o)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return e=[],this.columns.forEach(r=>{e.push(r),e=e.concat(r.getColumns(!0))}),e.find(r=>r.element===t)||!1}else return this.columnsByField[t]||!1;return!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(n=>{var r=this.table.options.nestedFieldSeparator?n.split(this.table.options.nestedFieldSeparator)[0]:n;r===t&&e.push(this.columnsByField[n])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibleColumn(){var t=this.columnsByIndex.findIndex(e=>e.visible);return t>-1?this.columnsByIndex[t]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(t=>t.visible)}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,n)=>{t(e,n)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(n=>{(!t||t&&n.visible)&&e.push(n.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[],n=t?this.columns:this.columnsByIndex;return n.forEach(r=>{e.push(r.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,n){e.element.parentNode.insertBefore(t.element,e.element),n&&e.element.parentNode.insertBefore(e.element,t.element),this.moveColumnActual(t,e,n),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,n){t.parent.isGroup?this._moveColumnInArray(t.parent.columns,t,e,n):this._moveColumnInArray(this.columns,t,e,n),this._moveColumnInArray(this.columnsByIndex,t,e,n,!0),this.rerenderColumns(!0),this.dispatch("column-moved",t,e,n),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,n,r,s){var o=t.indexOf(e),a,l=[];o>-1&&(t.splice(o,1),a=t.indexOf(n),a>-1?r&&(a=a+1):a=o,t.splice(a,0,e),s&&(l=this.chain("column-moving-rows",[e,n,r],null,[])||[],l=l.concat(this.table.rowManager.rows),l.forEach(function(u){if(u.cells.length){var c=u.cells.splice(o,1)[0];u.cells.splice(a,0,c)}})))}scrollToColumn(t,e,n){var r=0,s=t.getLeftOffset(),o=0,a=t.getElement();return new Promise((l,u)=>{if(typeof e>"u"&&(e=this.table.options.scrollToColumnPosition),typeof n>"u"&&(n=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":o=-this.element.clientWidth/2;break;case"right":o=a.clientWidth-this.headersElement.clientWidth;break}if(!n&&s>0&&s+a.offsetWidth<this.element.clientWidth)return!1;r=s+o,r=Math.max(Math.min(r,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(r),this.scrollHorizontal(r),l()}else console.warn("Scroll Error - Column not visible"),u("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(n=>{e.push(n.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(n){var r,s,o;n.visible&&(r=n.definition.width||0,s=parseInt(n.minWidth),typeof r=="string"?r.indexOf("%")>-1?o=t/100*parseInt(r):o=parseInt(r):o=r,e+=o>s?o:s)}),e}addColumn(t,e,n){return new Promise((r,s)=>{var o=this._addColumn(t,e,n);this._reIndexColumns(),this.dispatch("column-add",t,e,n),this.layoutMode()!="fitColumns"&&o.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),r(o)})}deregisterColumn(t){var e=t.getField(),n;e&&delete this.columnsByField[e],n=this.columnsByIndex.indexOf(t),n>-1&&this.columnsByIndex.splice(n,1),n=this.columns.indexOf(t),n>-1&&this.columns.splice(n,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(t,e){this.redrawBlock?(t===!1||t===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=t):this.renderer.rerenderColumns(t,e)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(t){te.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(t),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}},Vc=class extends Ai{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0,n=document.createDocumentFragment(),r=this.rows();r.forEach((s,o)=>{this.styleRow(s,o),s.initialize(!1,!0),s.type!=="group"&&(e=!1),n.appendChild(s.getElement())}),t.appendChild(n),r.forEach(s=>{s.rendered(),s.heightInitialized||s.calcHeight(!0)}),r.forEach(s=>{s.heightInitialized||s.setCellHeight()}),e?t.style.minWidth=this.table.columnManager.getWidth()+"px":t.style.minWidth=""}rerenderRows(t){this.clearRows(),t&&t(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(t){var e=te.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=te.elOffset(e).top-te.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}},Hc=class extends Ai{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,n=!1,r=!1,s=this.table.rowManager.scrollLeft,o=this.rows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var l=e-o[a].getElement().offsetTop;if(r===!1||Math.abs(l)<r)r=l,n=a;else break}o.forEach(u=>{u.deinitializeHeight()}),t&&t(),this.rows().length?this._virtualRenderFill(n===!1?this.rows.length-1:n,!0,r||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(s)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var n=t-this.vDomScrollPosTop,r=t-this.vDomScrollPosBottom,s=this.vDomWindowBuffer*2,o=this.rows();if(this.scrollTop=t,-n>s||r>s){var a=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*o.length)),this.scrollColumns(a)}else e?(n<0&&this._addTopRow(o,-n),r<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(o,-r):this.vDomScrollPosBottom=this.scrollTop)):(r>=0&&this._addBottomRow(o,r),n>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(o,n):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,n=this.elementVertical.clientHeight+e,r=!1,s=0,o=0,a=this.rows();if(t)s=this.vDomTop,o=this.vDomBottom;else for(var l=this.vDomTop;l<=this.vDomBottom;l++)if(a[l])if(r)if(n-a[l].getElement().offsetTop>=0)o=l;else break;else if(e-a[l].getElement().offsetTop>=0)s=l;else if(r=!0,n-a[l].getElement().offsetTop>=0)o=l;else break;return a.slice(s,o+1)}_virtualRenderFill(t,e,n){var r=this.tableElement,s=this.elementVertical,o=0,a=0,l=0,u=0,c=0,d=0,h=this.rows(),f=h.length,p=0,m,b,g=[],v=0,M=0,H=this.table.rowManager.fixedHeight,B=this.elementVertical.clientHeight,Q=this.table.options.rowHeight,Pe=!0;if(t=t||0,n=n||0,!t)this.clear();else{for(;r.firstChild;)r.removeChild(r.firstChild);u=(f-t+1)*this.vDomRowHeight,u<B&&(t-=Math.ceil((B-u)/this.vDomRowHeight),t<0&&(t=0)),o=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t),t-=o}if(f&&te.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1,H||this.table.options.maxHeight?(Q&&(M=B/Q+this.vDomWindowBuffer/Q),M=Math.max(this.vDomWindowMinTotalRows,Math.ceil(M))):M=f;(M==f||a<=B+this.vDomWindowBuffer||v<this.vDomWindowMinTotalRows)&&this.vDomBottom<f-1;){for(g=[],b=document.createDocumentFragment(),d=0;d<M&&this.vDomBottom<f-1;)p=this.vDomBottom+1,m=h[p],this.styleRow(m,p),m.initialize(!1,!0),!m.heightInitialized&&!this.table.options.rowHeight&&m.clearCellHeight(),b.appendChild(m.getElement()),g.push(m),this.vDomBottom++,d++;if(!g.length)break;r.appendChild(b),g.forEach(pe=>{pe.rendered(),pe.heightInitialized||pe.calcHeight(!0)}),g.forEach(pe=>{pe.heightInitialized||pe.setCellHeight()}),g.forEach(pe=>{l=pe.getHeight(),v<o?c+=l:a+=l,l>this.vDomWindowBuffer&&(this.vDomWindowBuffer=l*2),v++}),Pe=this.table.rowManager.adjustTableSize(),B=this.elementVertical.clientHeight,Pe&&(H||this.table.options.maxHeight)&&(Q=a/v,M=Math.max(this.vDomWindowMinTotalRows,Math.ceil(B/Q+this.vDomWindowBuffer/Q)))}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+n:this.scrollTop-c,this.vDomBottomPad=this.vDomBottom==f-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-c,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+c)/v),this.vDomBottomPad=this.vDomRowHeight*(f-this.vDomBottom-1),this.vDomScrollHeight=c+a+this.vDomBottomPad-B),r.style.paddingTop=this.vDomTopPad+"px",r.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+c+n-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-B:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-B),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-B),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,s.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var n=this.tableElement,r=[],s=0,o=this.vDomTop-1,a=0,l=!0;l;)if(this.vDomTop){let u=t[o],c,d;u&&a<this.vDomMaxRenderChain?(c=u.getHeight()||this.vDomRowHeight,d=u.initialized,e>=c?(this.styleRow(u,o),n.insertBefore(u.getElement(),n.firstChild),(!u.initialized||!u.heightInitialized)&&r.push(u),u.initialize(),d||(c=u.getElement().offsetHeight,c>this.vDomWindowBuffer&&(this.vDomWindowBuffer=c*2)),e-=c,s+=c,this.vDomTop--,o--,a++):l=!1):l=!1}else l=!1;for(let u of r)u.clearCellHeight();this._quickNormalizeRowHeight(r),s&&(this.vDomTopPad-=s,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o<1&&(this.vDomTopPad=0),n.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=s)}_removeTopRow(t,e){for(var n=[],r=0,s=0,o=!0;o;){let a=t[this.vDomTop],l;a&&s<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,e>=l?(this.vDomTop++,e-=l,r+=l,n.push(a),s++):o=!1):o=!1}for(let a of n){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}r&&(this.vDomTopPad+=r,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?r:r+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var n=this.tableElement,r=[],s=0,o=this.vDomBottom+1,a=0,l=!0;l;){let u=t[o],c,d;u&&a<this.vDomMaxRenderChain?(c=u.getHeight()||this.vDomRowHeight,d=u.initialized,e>=c?(this.styleRow(u,o),n.appendChild(u.getElement()),(!u.initialized||!u.heightInitialized)&&r.push(u),u.initialize(),d||(c=u.getElement().offsetHeight,c>this.vDomWindowBuffer&&(this.vDomWindowBuffer=c*2)),e-=c,s+=c,this.vDomBottom++,o++,a++):l=!1):l=!1}for(let u of r)u.clearCellHeight();this._quickNormalizeRowHeight(r),s&&(this.vDomBottomPad-=s,(this.vDomBottomPad<0||o==t.length-1)&&(this.vDomBottomPad=0),n.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=s)}_removeBottomRow(t,e){for(var n=[],r=0,s=0,o=!0;o;){let a=t[this.vDomBottom],l;a&&s<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,e>=l?(this.vDomBottom--,e-=l,r+=l,n.push(a),s++):o=!1):o=!1}for(let a of n){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}r&&(this.vDomBottomPad+=r,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=r)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}},jc=class extends be{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}initializePlaceholder(){var t=this.table.options.placeholder;if(typeof t=="function"&&(t=t.call(this.table)),t=this.chain("placeholder",[t],t,t)||t,t){let e=document.createElement("div");if(e.classList.add("tabulator-placeholder"),typeof t=="string"){let n=document.createElement("div");n.classList.add("tabulator-placeholder-contents"),n.innerHTML=t,e.appendChild(n),this.placeholderContents=n}else typeof HTMLElement<"u"&&t instanceof HTMLElement?(e.appendChild(t),this.placeholderContents=t):(console.warn("Invalid placeholder provided, must be string or HTML Element",t),this.el=null);this.placeholder=e}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,n=this.element.scrollTop,r=this.scrollTop>n;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e),this._positionPlaceholder()),this.scrollTop!=n&&(this.scrollTop=n,this.renderer.scrollRows(n,r),this.dispatch("scroll-vertical",n,r),this.dispatchExternal("scrollVertical",n,r))})}findRow(t){if(typeof t=="object"){if(t instanceof Ie)return t;if(t instanceof Ri)return t._getSelf()||!1;if(typeof HTMLElement<"u"&&t instanceof HTMLElement)return this.rows.find(n=>n.getElement()===t)||!1;if(t===null)return!1}else return typeof t>"u"?!1:this.rows.find(n=>n.data[this.table.options.index]==t)||!1;return!1}getRowFromDataObject(t){var e=this.rows.find(n=>n.data===t);return e||!1}getRowFromPosition(t){return this.getDisplayRows().find(e=>e.type==="row"&&e.getPosition()===t&&e.isDisplayed())}scrollToRow(t,e,n){return this.renderer.scrollToRowPosition(t,e,n)}setData(t,e,n){return new Promise((r,s)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&n&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),r()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((n,r)=>{if(n&&typeof n=="object"){var s=new Ie(n,this);this.rows.push(s)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",n)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof t,`
Data:     `,t)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(t,e){var n=this.rows.indexOf(t),r=this.activeRows.indexOf(t);r>-1&&this.activeRows.splice(r,1),n>-1&&this.rows.splice(n,1),this.setActiveRows(this.activeRows),this.displayRowIterator(s=>{var o=s.indexOf(t);o>-1&&s.splice(o,1)}),e||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,n,r){var s=this.addRowActual(t,e,n,r);return s}addRows(t,e,n,r){var s=[];return new Promise((o,a)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(typeof n>"u"&&e||typeof n<"u"&&!e)&&t.reverse(),t.forEach((l,u)=>{var c=this.addRow(l,e,n,!0);s.push(c),this.dispatch("row-added",c,l,e,n)}),this.refreshActiveData(r?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),o(s)})}findAddRowPos(t){return typeof t>"u"&&(t=this.table.options.addRowPos),t==="pos"&&(t=!0),t==="bottom"&&(t=!1),t}addRowActual(t,e,n,r){var s=t instanceof Ie?t:new Ie(t||{},this),o=this.findAddRowPos(e),a=-1,l,u;return n||(u=this.chain("row-adding-position",[s,o],null,{index:n,top:o}),n=u.index,o=u.top),typeof n<"u"&&(n=this.findRow(n)),n=this.chain("row-adding-index",[s,n,o],null,n),n&&(a=this.rows.indexOf(n)),n&&a>-1?(l=this.activeRows.indexOf(n),this.displayRowIterator(function(c){var d=c.indexOf(n);d>-1&&c.splice(o?d:d+1,0,s)}),l>-1&&this.activeRows.splice(o?l:l+1,0,s),this.rows.splice(o?a:a+1,0,s)):o?(this.displayRowIterator(function(c){c.unshift(s)}),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator(function(c){c.push(s)}),this.activeRows.push(s),this.rows.push(s)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",s.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),r||this.reRenderInPosition(),s}moveRow(t,e,n){this.dispatch("row-move",t,e,n),this.moveRowActual(t,e,n),this.regenerateRowPositions(),this.dispatch("row-moved",t,e,n),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,n){this.moveRowInArray(this.rows,t,e,n),this.moveRowInArray(this.activeRows,t,e,n),this.displayRowIterator(r=>{this.moveRowInArray(r,t,e,n)}),this.dispatch("row-moving",t,e,n)}moveRowInArray(t,e,n,r){var s,o,a,l;if(e!==n&&(s=t.indexOf(e),s>-1&&(t.splice(s,1),o=t.indexOf(n),o>-1?r?t.splice(o+1,0,e):t.splice(o,0,e):t.splice(s,0,e)),t===this.getDisplayRows())){a=s<o?s:o,l=o>s?o:s+1;for(let u=a;u<=l;u++)t[u]&&this.styleRow(t[u],u)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1?e:!1}nextDisplayRow(t,e){var n=this.getDisplayRowIndex(t),r=!1;return n!==!1&&n<this.displayRowsCount-1&&(r=this.getDisplayRows()[n+1]),r&&(!(r instanceof Ie)||r.type!="row")?this.nextDisplayRow(r,e):r}prevDisplayRow(t,e){var n=this.getDisplayRowIndex(t),r=!1;return n&&(r=this.getDisplayRows()[n-1]),e&&r&&(!(r instanceof Ie)||r.type!="row")?this.prevDisplayRow(r,e):r}findRowIndex(t,e){var n;return t=this.findRow(t),t&&(n=e.indexOf(t),n>-1)?n:!1}getData(t,e){var n=[],r=this.getRows(t);return r.forEach(function(s){s.type=="row"&&n.push(s.getData(e||"data"))}),n}getComponents(t){var e=[],n=this.getRows(t);return n.forEach(function(r){e.push(r.getComponent())}),e}getDataCount(t){var e=this.getRows(t);return e.length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){typeof e<"u"?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((n,r)=>n.priority-r.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){typeof e<"u"?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((n,r)=>n.priority-r.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,n){var r=this.table,s="",o=0,a=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof t=="function")if(o=this.dataPipeline.findIndex(l=>l.handler===t),o>-1)s="dataPipeline",e&&(o==this.dataPipeline.length-1?s="display":o++);else if(o=this.displayPipeline.findIndex(l=>l.handler===t),o>-1)s="displayPipeline",e&&(o==this.displayPipeline.length-1?s="end":o++);else{console.error("Unable to refresh data, invalid handler provided",t);return}else s=t||"all",o=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===s&&o<this.redrawBlockRestoreConfig.index||a.indexOf(s)<a.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:n,stage:s,index:o});return}else te.elVisible(this.element)?n?this.reRenderInPosition(this.refreshPipelines.bind(this,t,s,o,n)):(this.refreshPipelines(t,s,o,n),t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),r.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(t,s,o,n),this.dispatch("data-refreshed")}}refreshPipelines(t,e,n,r){switch(this.dispatch("data-refreshing"),(!t||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),e){case"all":case"dataPipeline":for(let s=n;s<this.dataPipeline.length;s++){let o=this.dataPipeline[s].handler(this.activeRowsPipeline[s].slice(0));this.activeRowsPipeline[s+1]=o||this.activeRowsPipeline[s].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":n=0,this.resetDisplayRows();case"displayPipeline":for(let s=n;s<this.displayPipeline.length;s++){let o=this.displayPipeline[s].handler((s?this.getDisplayRows(s-1):this.activeRows).slice(0),r);this.setDisplayRows(o||this.getDisplayRows(s-1).slice(0),s)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var t=this.getDisplayRows(),e=1;t.forEach(n=>{n.type==="row"&&(n.setPosition(e),e++)})}setActiveRows(t){this.activeRows=this.activeRows=Object.assign([],t),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(t,e){this.displayRows[e]=t,e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(t){return typeof t>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t,e){var n=Object.assign([],this.renderer.visibleRows(!e));return t&&(n=this.chain("rows-visible",[e],n,n)),n}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e=[];switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!1,!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(t),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var t=0;this.element.scrollHeight>this.element.clientHeight&&(t=this.element.offsetWidth-this.element.clientWidth),t!==this.scrollbarWidth&&(this.scrollbarWidth=t,this.dispatch("scrollbar-vertical",t))}initializeRenderer(){var t,e={virtual:Hc,basic:Vc};typeof this.table.options.renderVertical=="string"?t=e[this.table.options.renderVertical]:t=this.table.options.renderVertical,t?(this.renderMode=this.table.options.renderVertical,this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}normalizeHeight(t){this.activeRows.forEach(function(e){e.normalizeHeight(t)})}adjustTableSize(){let t=this.element.clientHeight,e,n=!1;if(this.renderer.verticalFillMode==="fill"){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){e=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";let s="calc(100% - "+r+"px)";this.element.style.minHeight=e||"calc(100% - "+r+"px)",this.element.style.height=s,this.element.style.maxHeight=s}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(n=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),n}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(t){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}},Bc=class extends be{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}createContainerElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer-contents"),this.element.appendChild(t),t}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(t){this.activate(),this.containerElement.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t){this.activate(),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}},zc=class extends be{constructor(t){super(t),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(t=>{this.pseudoTrackers[t].subscriber=this.pseudoMouseEnter.bind(this,t),this.subscribe(t+"-mouseover",this.pseudoTrackers[t].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(t,e,n){this.pseudoTrackers[t].target!==n&&(this.pseudoTrackers[t].target&&this.dispatch(t+"-mouseleave",e,this.pseudoTrackers[t].target),this.pseudoMouseLeave(t,e),this.pseudoTrackers[t].target=n,this.dispatch(t+"-mouseenter",e,n))}pseudoMouseLeave(t,e){var n=Object.keys(this.pseudoTrackers),r={row:["cell"],cell:["row"]};n=n.filter(s=>{var o=r[t];return s!==t&&(!o||o&&!o.includes(s))}),n.forEach(s=>{var o=this.pseudoTrackers[s].target;this.pseudoTrackers[s].target&&(this.dispatch(s+"-mouseleave",e,o),this.pseudoTrackers[s].target=null)})}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let n of e)for(let r of t){let s=n+"-"+r;this.subscriptionChange(s,this.subscriptionChanged.bind(this,n,r))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(t,e,n){var r=this.listeners[e].components,s=r.indexOf(t),o=!1;n?s===-1&&(r.push(t),o=!0):this.subscribed(t+"-"+e)||s>-1&&(r.splice(s,1),o=!0),(e==="mouseenter"||e==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),o&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var n=e.composedPath&&e.composedPath()||e.path,r=this.findTargets(n);r=this.bindComponents(t,r),this.triggerEvents(t,e,r),this.pseudoTracking&&(t=="mouseover"||t=="mouseleave")&&!Object.keys(r).length&&this.pseudoMouseLeave("none",e)}findTargets(t){var e={};let n=Object.keys(this.componentMap);for(let r of t){let s=r.classList?[...r.classList]:[];if(s.filter(l=>this.abortClasses.includes(l)).length)break;let a=s.filter(l=>n.includes(l));for(let l of a)e[this.componentMap[l]]||(e[this.componentMap[l]]=r)}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var n=Object.keys(e).reverse(),r=this.listeners[t],s={},o={};for(let a of n){let l,u=e[a],c=this.previousTargets[a];if(c&&c.target===u)l=c.component;else switch(a){case"row":case"group":(r.components.includes("row")||r.components.includes("cell")||r.components.includes("group"))&&(l=this.table.rowManager.getVisibleRows(!0).find(h=>h.getElement()===u),e.row&&e.row.parentNode&&e.row.parentNode.closest(".tabulator-row")&&(e[a]=!1));break;case"column":r.components.includes("column")&&(l=this.table.columnManager.findColumn(u));break;case"cell":r.components.includes("cell")&&(s.row instanceof Ie?l=s.row.findCell(u):e.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}l&&(s[a]=l,o[a]={target:u,component:l})}return this.previousTargets=o,s}triggerEvents(t,e,n){var r=this.listeners[t];for(let s in n)n[s]&&r.components.includes(s)&&this.dispatch(s+"-"+t,e,n[s])}clearWatchers(){for(let t in this.listeners){let e=this.listeners[t];e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}},Uc=class{constructor(t){this.table=t,this.bindings={}}bind(t,e,n){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,n):this.bindings[t][e]=n}handle(t,e,n){if(this.bindings[t]&&this.bindings[t][n]&&typeof this.bindings[t][n].bind=="function")return this.bindings[t][n].bind(null,e);n!=="then"&&typeof n=="string"&&!n.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+t+" component does not have a "+n+" function, have you checked that you have the correct Tabulator module installed?")}},$c=class extends be{constructor(t){super(t),this.requestOrder=0,this.loading=!1}initialize(){}load(t,e,n,r,s,o){var a=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",t),t&&(t.indexOf("{")==0||t.indexOf("[")==0)&&(t=JSON.parse(t)),this.confirm("data-loading",[t,e,n,s])){this.loading=!0,s||this.alertLoader(),e=this.chain("data-params",[t,n,s],e||{},e||{}),e=this.mapParams(e,this.table.options.dataSendParams);var l=this.chain("data-load",[t,e,n,s],!1,Promise.resolve([]));return l.then(u=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(u)&&typeof u=="object"&&(u=this.mapParams(u,this.objectInvert(this.table.options.dataReceiveParams)));var c=this.chain("data-loaded",[u],null,u);a==this.requestOrder?(this.clearAlert(),c!==!1&&(this.dispatchExternal("dataLoaded",c),this.table.rowManager.setData(c,r,typeof o>"u"?!r:o))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(u=>{console.error("Data Load Error: ",u),this.dispatchExternal("dataLoadError",u),s||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,r,typeof o>"u"?!r:o),Promise.resolve()}mapParams(t,e){var n={};for(let r in t)n[e.hasOwnProperty(r)?e[r]:r]=t[r];return n}objectInvert(t){var e={};for(let n in t)e[t[n]]=n;return e}blockActiveLoad(){this.requestOrder++}alertLoader(){var t=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;t&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}},Wc=class{constructor(t,e,n){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=n?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=n}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t])if(e)if(n=this.events[t].findIndex(r=>r===e),n>-1)this.events[t].splice(n,1);else{console.warn("Cannot remove event, no matching event found:",t,e);return}else delete this.events[t];else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_notifySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach(r=>{r(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift(),n;return this.events[e]&&this.events[e].forEach((r,s)=>{let o=r.apply(this.table,t);s||(n=o)}),n}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}},Gc=class{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifySubscriptionChange(t,!0)}subscribe(t,e,n=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:n}),this.events[t].sort((r,s)=>r.priority-s.priority),this._notifySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e)if(n=this.events[t].findIndex(r=>r.callback===e),n>-1)this.events[t].splice(n,1);else{console.warn("Cannot remove event, no matching event found:",t,e);return}}else{console.warn("Cannot remove event, no events set on:",t);return}this._notifySubscriptionChange(t,!1)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,n,r){var s=n;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((o,a)=>{s=o.callback.apply(this,e.concat([s]))}),s):typeof r=="function"?r():r}_confirm(t,e){var n=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((r,s)=>{r.callback.apply(this,e)&&(n=!0)}),n}_notifySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach(r=>{r(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(n=>{n.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(this.debug===!0||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}},qc=class extends be{constructor(t){super(t)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(t,e,n){var r="";return typeof this.options(t)<"u"?(r="Deprecated Setup Option - Use of the %c"+t+"%c option is now deprecated",e?(r=r+", Please use the %c"+e+"%c option instead",this._warnUser(r,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),n&&(this.table.options[e]=this.table.options[t])):this._warnUser(r,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(t,e){return typeof this.options(t)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+t+" %c option is now deprecated, "+e,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(t){this._warnUser(t)}},Zc=class extends be{constructor(t){super(t),this.deps={},this.props={}}initialize(){this.deps=Object.assign({},this.options("dependencies"))}lookup(t,e,n){if(Array.isArray(t)){for(let s of t){var r=this.lookup(s,e,!0);if(r)break}if(r)return r;this.error(t)}else return e?this.lookupProp(t,e,n):this.lookupKey(t,n)}lookupProp(t,e,n){var r;if(this.props[t]&&this.props[t][e])return this.props[t][e];if(r=this.lookupKey(t,n),r)return this.props[t]||(this.props[t]={}),this.props[t][e]=r[e]||r,this.props[t][e]}lookupKey(t,e){var n;return this.deps[t]?n=this.deps[t]:window[t]?(this.deps[t]=window[t],n=this.deps[t]):e||this.error(t),n}error(t){console.error("Unable to find dependency",t,"Please check documentation and ensure you have imported the required library into your project")}};function m_(i,t){t&&this.table.columnManager.renderer.reinitializeColumnWidths(i),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function ag(i,t){i.forEach(function(e){e.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function g_(i,t){var e=0,n=this.table.rowManager.element.clientWidth,r=0,s=!1;i.forEach((o,a)=>{o.widthFixed||o.reinitializeWidth(),(this.table.options.responsiveLayout?o.modules.responsive.visible:o.visible)&&(s=o),o.visible&&(e+=o.getWidth())}),s?(r=n-e+s.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(s.setWidth(0),this.table.modules.responsiveLayout.update()),r>0?s.setWidth(r):s.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function b_(i,t){var e=this.table.rowManager.element.getBoundingClientRect().width,n=0,r=0,s=0,o=0,a=[],l=[],u=0,c=0,d=0;function h(p){var m;return typeof p=="string"?p.indexOf("%")>-1?m=e/100*parseInt(p):m=parseInt(p):m=p,m}function f(p,m,b,g){var v=[],M=0,H=0,B=0,Q=s,Pe=0,pe=0,ji=[];function rd(J){return b*(J.column.definition.widthGrow||1)}function sd(J){return h(J.width)-b*(J.column.definition.widthShrink||0)}return p.forEach(function(J,xx){var od=g?sd(J):rd(J);J.column.minWidth>=od?v.push(J):J.column.maxWidth&&J.column.maxWidth<od?(J.width=J.column.maxWidth,m-=J.column.maxWidth,Q-=g?J.column.definition.widthShrink||1:J.column.definition.widthGrow||1,Q&&(b=Math.floor(m/Q))):(ji.push(J),pe+=g?J.column.definition.widthShrink||1:J.column.definition.widthGrow||1)}),v.length?(v.forEach(function(J){M+=g?J.width-J.column.minWidth:J.column.minWidth,J.width=J.column.minWidth}),H=m-M,B=pe?Math.floor(H/pe):H,Pe=f(ji,H,B,g)):(Pe=pe?m-Math.floor(m/pe)*pe:m,ji.forEach(function(J){J.width=g?sd(J):rd(J)})),Pe}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),i.forEach(function(p){var m,b,g;p.visible&&(m=p.definition.width,b=parseInt(p.minWidth),m?(g=h(m),n+=g>b?g:b,p.definition.widthShrink&&(l.push({column:p,width:g>b?g:b}),u+=p.definition.widthShrink)):(a.push({column:p,width:0}),s+=p.definition.widthGrow||1))}),r=e-n,o=Math.floor(r/s),d=f(a,r,o,!1),a.length&&d>0&&(a[a.length-1].width+=d),a.forEach(function(p){r-=p.width}),c=Math.abs(d)+r,c>0&&u&&(d=f(l,c,Math.floor(c/u),!0)),d&&l.length&&(l[l.length-1].width-=d),a.forEach(function(p){p.column.setWidth(p.width)}),l.forEach(function(p){p.column.setWidth(p.width)})}var v_={fitData:m_,fitDataFill:ag,fitDataTable:ag,fitDataStretch:g_,fitColumns:b_},y_=(()=>{class i extends N{static moduleName="layout";static modes=v_;constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;i.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){e.definition.widthGrow&&(e.definition.widthGrow=Number(e.definition.widthGrow)),e.definition.widthShrink&&(e.definition.widthShrink=Number(e.definition.widthShrink))}getMode(){return this.mode}layout(e){var n=this.table.columnManager.columnsByIndex.find(r=>r.definition.variableHeight||r.definition.formatter==="textarea");this.dispatch("layout-refreshing"),i.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,e),n&&this.table.rowManager.normalizeHeight(!0),this.dispatch("layout-refreshed")}}return i})(),C_={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}},w_=(()=>{class i extends N{static moduleName="localize";static langs=C_;constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=te.deepClone(i.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}installLang(e,n){this.langList[e]?this._setLangProp(this.langList[e],n):this.langList[e]=n}_setLangProp(e,n){for(let r in n)e[r]&&typeof e[r]=="object"?this._setLangProp(e[r],n[r]):e[r]=n[r]}setLocale(e){e=e||"default";function n(r,s){for(var o in r)typeof r[o]=="object"?(s[o]||(s[o]={}),n(r[o],s[o])):s[o]=r[o]}if(e===!0&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let r=e.split("-")[0];this.langList[r]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,r),e=r):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=te.deepClone(this.langList.default||{}),e!="default"&&n(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,n){var r=n?e+"|"+n:e,s=r.split("|"),o=this._getLangElement(s,this.locale);return o||""}_getLangElement(e,n){var r=this.lang;return e.forEach(function(s){var o;r&&(o=r[s],typeof o<"u"?r=o:r=!1)}),r}bind(e,n){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(n),n(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(n=>{n(this.getText(e),this.lang)})}}return i})(),E_=(()=>{class i extends N{static moduleName="comms";constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var n=[],r;return r=this.table.constructor.registry.lookupTable(e),r.forEach(s=>{this.table!==s&&n.push(s)}),n}send(e,n,r,s){var o=this.getConnections(e);o.forEach(a=>{a.tableComms(this.table.element,n,r,s)}),!o.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,n,r,s){if(this.table.modExists(n))return this.table.modules[n].commsReceived(e,r,s);console.warn("Inter-table Comms Error - no such module:",n)}}return i})(),D_=Object.freeze({__proto__:null,CommsModule:E_,LayoutModule:y_,LocalizeModule:w_}),M_=(()=>{class i{static registry={tables:[],register(e){i.registry.tables.push(e)},deregister(e){var n=i.registry.tables.indexOf(e);n>-1&&i.registry.tables.splice(n,1)},lookupTable(e,n){var r=[],s,o;if(typeof e=="string"){if(s=document.querySelectorAll(e),s.length)for(var a=0;a<s.length;a++)o=i.registry.matchElement(s[a]),o&&r.push(o)}else typeof HTMLElement<"u"&&e instanceof HTMLElement||e instanceof i?(o=i.registry.matchElement(e),o&&r.push(o)):Array.isArray(e)?e.forEach(function(l){r=r.concat(i.registry.lookupTable(l))}):n||console.warn("Table Connection Error - Invalid Selector",e);return r},matchElement(e){return i.registry.tables.find(function(n){return e instanceof i?n===e:n.element===e})}};static findTable(e){var n=i.registry.lookupTable(e,!0);return Array.isArray(n)&&!n.length?!1:n}}return i})(),S_=(()=>{class i extends M_{static moduleBindings={};static moduleExtensions={};static modulesRegistered=!1;static defaultModules=!1;constructor(){super()}static initializeModuleBinder(e){i.modulesRegistered||(i.modulesRegistered=!0,i._registerModules(D_,!0),e&&i._registerModules(e))}static _extendModule(e,n,r){if(i.moduleBindings[e]){var s=i.moduleBindings[e][n];if(s)if(typeof r=="object")for(let o in r)s[o]=r[o];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",e)}static _registerModules(e,n){var r=Object.values(e);n&&r.forEach(s=>{s.prototype.moduleCore=!0}),i._registerModule(r)}static _registerModule(e){Array.isArray(e)||(e=[e]),e.forEach(n=>{i._registerModuleBinding(n),i._registerModuleExtensions(n)})}static _registerModuleBinding(e){e.moduleName?i.moduleBindings[e.moduleName]=e:console.error("Unable to bind module, no moduleName defined",e.moduleName)}static _registerModuleExtensions(e){var n=e.moduleExtensions;if(e.moduleExtensions)for(let r in n){let s=n[r];if(i.moduleBindings[r])for(let o in s)i._extendModule(r,o,s[o]);else{i.moduleExtensions[r]||(i.moduleExtensions[r]={});for(let o in s)i.moduleExtensions[r][o]||(i.moduleExtensions[r][o]={}),Object.assign(i.moduleExtensions[r][o],s[o])}}i._extendModuleFromQueue(e)}static _extendModuleFromQueue(e){var n=i.moduleExtensions[e.moduleName];if(n)for(let r in n)i._extendModule(e.moduleName,r,n[r])}_bindModules(){var e=[],n=[],r=[];this.modules={};for(var s in i.moduleBindings){let o=i.moduleBindings[s],a=new o(this);this.modules[s]=a,o.prototype.moduleCore?this.modulesCore.push(a):o.moduleInitOrder?o.moduleInitOrder<0?e.push(a):n.push(a):r.push(a)}e.sort((o,a)=>o.moduleInitOrder>a.moduleInitOrder?1:-1),n.sort((o,a)=>o.moduleInitOrder>a.moduleInitOrder?1:-1),this.modulesRegular=e.concat(r.concat(n))}}return i})(),Yc=class extends be{constructor(t){super(t),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert"),t}_createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-alert-msg"),t.setAttribute("role","alert"),t}_typeClass(){return"tabulator-alert-state-"+this.type}alert(t,e="msg"){if(t){for(this.clear(),this.dispatch("alert-show",e),this.type=e;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof t=="function"&&(t=t()),t instanceof HTMLElement?this.msgElement.appendChild(t):this.msgElement.innerHTML=t,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}},__=(()=>{class i extends S_{static defaultOptions=p_;static extendModule(){i.initializeModuleBinder(),i._extendModule(...arguments)}static registerModule(){i.initializeModuleBinder(),i._registerModule(...arguments)}constructor(e,n,r){super(),i.initializeModuleBinder(r),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Uc(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new qc(this),this.optionsList=new Zo(this,"table constructor"),this.dependencyRegistry=new Zc(this),this.initialized=!1,this.destroyed=!1,this.initializeElement(e)&&(this.initializeCoreSystems(n),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement?(this.element=e,!0):typeof e=="string"?(this.element=document.querySelector(e),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initializeCoreSystems(e){this.columnManager=new Pc(this),this.rowManager=new jc(this),this.footerManager=new Bc(this),this.dataLoader=new $c(this),this.alertManager=new Yc(this),this._bindModules(),this.options=this.optionsList.generate(i.defaultOptions,e),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new Wc(this,this.options,this.options.debugEventsExternal),this.eventBus=new Gc(this.options.debugEventsInternal),this.interactionMonitor=new zc(this),this.dataLoader.initialize(),this.footerManager.initialize(),this.dependencyRegistry.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(e.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e=this.element,n=this.options,r;if(e.tagName==="TABLE"){this.originalElement=this.element,r=document.createElement("div");var s=e.attributes;for(var o in s)typeof s[o]=="object"&&r.setAttribute(s[o].name,s[o].value);e.parentNode.replaceChild(r,e),this.element=e=r}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),n.minHeight!==!1&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),n.maxHeight!==!1&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight)}_initializeTable(){var e=this.element,n=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(r=>{r.initialize()}),e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.autoColumns&&n.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(r=>{r.initialize()}),this.columnManager.setColumns(n.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var e=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):e.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0,4))}initGuard(e,n){var r,s;return this.options.debugInitialization&&!this.initialized&&(e||(r=new Error().stack.split(`
`),s=r[0]=="Error"?r[2]:r[1],s[0]==" "?e=s.trim().split(" ")[1].split(".")[1]:e=s.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+e+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(n?" "+n:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(e,n,r){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(e,n,r,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,n,r){return this.initGuard(),this.dataLoader.load(e,n,r,!0,!0)}updateData(e){var n=0;return this.initGuard(),new Promise((r,s)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(o=>{var a=this.rowManager.findRow(o[this.options.index]);a?(n++,a.updateData(o).then(()=>{n--,n||r()}).catch(l=>{s("Update Error - Unable to update row",o,l)})):s("Update Error - Unable to find row",o)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}addData(e,n,r){return this.initGuard(),new Promise((s,o)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,n,r).then(a=>{var l=[];a.forEach(function(u){l.push(u.getComponent())}),s(l)}):(console.warn("Update Error - No data provided"),o("Update Error - No data provided"))})}updateOrAddData(e){var n=[],r=0;return this.initGuard(),new Promise((s,o)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(a=>{var l=this.rowManager.findRow(a[this.options.index]);r++,l?l.updateData(a).then(()=>{r--,n.push(l.getComponent()),r||s(n)}):this.rowManager.addRows(a).then(u=>{r--,n.push(u[0].getComponent()),r||s(n)})}):(console.warn("Update Error - No data provided"),o("Update Error - No data provided"))})}getRow(e){var n=this.rowManager.findRow(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e){var n=this.rowManager.getRowFromPosition(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var n=[];this.initGuard(),Array.isArray(e)||(e=[e]);for(let r of e){let s=this.rowManager.findRow(r,!0);if(s)n.push(s);else return console.error("Delete Error - No matching row found:",r),Promise.reject("Delete Error - No matching row found")}return n.sort((r,s)=>this.rowManager.rows.indexOf(r)>this.rowManager.rows.indexOf(s)?1:-1),n.forEach(r=>{r.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,n,r){return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),this.rowManager.addRows(e,n,r,!0).then(s=>s[0].getComponent())}updateOrAddRow(e,n){var r=this.rowManager.findRow(e);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),r?r.updateData(n).then(()=>r.getComponent()):this.rowManager.addRows(n).then(s=>s[0].getComponent())}updateRow(e,n){var r=this.rowManager.findRow(e);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),r?r.updateData(n).then(()=>Promise.resolve(r.getComponent())):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,n,r){var s=this.rowManager.findRow(e);return s?this.rowManager.scrollToRow(s,n,r):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,n,r){var s=this.rowManager.findRow(e);this.initGuard(),s?s.moveToRow(n,r):console.warn("Move Error - No matching row found:",e)}getRows(e){return this.rowManager.getComponents(e)}getRowPosition(e){var n=this.rowManager.findRow(e);return n?n.getPosition():(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(e)}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var n=this.columnManager.findColumn(e);return n?n.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.show();else return console.warn("Column Show Error - No matching column found:",e),!1}hideColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.hide();else return console.warn("Column Hide Error - No matching column found:",e),!1}toggleColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.visible?n.hide():n.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1}addColumn(e,n,r){var s=this.columnManager.findColumn(r);return this.initGuard(),this.columnManager.addColumn(e,n,s).then(o=>o.getComponent())}deleteColumn(e){var n=this.columnManager.findColumn(e);return this.initGuard(),n?n.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,n){var r=this.columnManager.findColumn(e);return this.initGuard(),r?r.updateDefinition(n):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,n,r){var s=this.columnManager.findColumn(e),o=this.columnManager.findColumn(n);this.initGuard(),s?o?this.columnManager.moveColumn(s,o,r):console.warn("Move Error - No matching column found:",o):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,n,r){return new Promise((s,o)=>{var a=this.columnManager.findColumn(e);return a?this.columnManager.scrollToColumn(a,n,r):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initGuard(),this.columnManager.redraw(e),this.rowManager.redraw(e)}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(e,n){this.externalEvents.subscribe(e,n)}off(e,n){this.externalEvents.unsubscribe(e,n)}dispatchEvent(){var e=Array.from(arguments);e.shift(),this.externalEvents.dispatch(...arguments)}alert(e,n){this.initGuard(),this.alertManager.alert(e,n)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(e,n){return this.modules[e]?!0:(n&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var n=this.modules[e];return n||console.error("Tabulator module not installed: "+e),n}}return i})(),ot=__,Qc=class extends ot{static extendModule(){ot.initializeModuleBinder(xc),ot._extendModule(...arguments)}static registerModule(){ot.initializeModuleBinder(xc),ot._registerModule(...arguments)}constructor(t,e,n){super(t,e,xc)}},ki=Qc;var Me=class i{dataSubject=new ae([]);columnsSubject=new ae([]);t_teorico=1.96;comparacionesSeleccionadas=[];data$=this.dataSubject.asObservable();columns$=this.columnsSubject.asObservable();resultadosSubject=new ae([]);resultados$=this.resultadosSubject.asObservable();setDiferenciaSifnificativa(t){this.t_teorico=t===95?1.96:1.645}getComparaciones(){return this.comparacionesSeleccionadas}setComparaciones(t){this.comparacionesSeleccionadas=t.map(e=>{let[n,r]=e.col1>e.col2?[e.col2,e.col1]:[e.col1,e.col2];return{col1:n,col2:r,color:e.color}})}resetComparaciones(){this.comparacionesSeleccionadas=[]}setData(t){let e=[...t];this.dataSubject.next(e)}ejecutarCalculoPorcentaje(t){let e=[...t],n=t.find(o=>o.id==="Base"),s=e.map(o=>o.id==="Base"?y({},o):this.processRow(o,n,this.comparacionesSeleccionadas)).filter(o=>o.id==="Base"?!0:Object.keys(o).filter(a=>a!=="id").some(a=>o[a]&&o[a].toString().trim()!==""));this.dataSubject.next(s)}processRow(t,e,n){let r=y({},t),s=Object.keys(t);return s.forEach((o,a)=>{if(a===0||o==="id")return;let l=t[o];if(l==null||l==="")return;let u=[];n.forEach(c=>{let d=s.indexOf(c.col1),h=s.indexOf(c.col2);if(d===-1||h===-1||d>h)return;let f=s.slice(d,h+1);if(!f.includes(o))return;let p=f.filter(m=>m!==o&&m!=="id").filter(m=>{let b=t[m];if(b==null||b==="")return!1;let g=Number(e[o]),v=Number(e[m]),M=l/100,H=b/100,B=(M*g+H*v)/(g+v);return Math.abs((M-H)/Math.sqrt(B*(1-B)*(1/g+1/v)))>this.t_teorico&&Number(l)>Number(b)}).map(m=>m.toUpperCase()).join(", ");p&&u.push(p)}),r[o]=u.length>0?`${l} (<strong>${u.join(" | ")}</strong>)`:`${l}`}),r}setColumns(t){this.columnsSubject.next(t)}getColorForComparation(t){if(t==="id"||t==="Base")return"transparent";let e=this.comparacionesSeleccionadas.find(n=>t>=n.col1&&t<=n.col2);return e?e.color:"transparent"}ejecutarCalculoMedias(t){let e=t.find(u=>u.id==="Base"),n=t.find(u=>u.id==="Media"),r=t.find(u=>u.id.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().includes("desviacion"));if(!e||!n||!r){console.warn("No se encontraron filas Base, Media o Desviacion");return}let s=Object.keys(n).filter(u=>u!=="id"),o={};s.forEach(u=>{o[u]=""}),this.comparacionesSeleccionadas.forEach(u=>{let c=s.indexOf(u.col1),d=s.indexOf(u.col2);if(c===-1||d===-1)return;let h=Math.min(c,d),f=Math.max(c,d),p=s.slice(h,f+1);if(!this.isRangeComplete(p,e,n,r))return;let b=this.calcularDiferenciasEnRango(p,e,n,r);p.forEach(g=>{o[g]=b[g]})});let a=y({},n);s.forEach(u=>{a[u]=o[u]}),t.map(u=>u.id==="Media"?a:u).forEach((u,c)=>t[c]=u),this.dataSubject.next(t),this.actualizarTablaResultadosMedias(t)}isRangeComplete(t,e,n,r){for(let s of t)if(!this.esValorValido(e[s])||!this.esValorValido(n[s])||!this.esValorValido(r[s]))return!1;return!0}esValorValido(t){return!(t==null||typeof t=="string"&&t.trim()==="")}calcularDiferenciasEnRango(t,e,n,r){let s={};return t.forEach(o=>{let l=(parseFloat(String(n[o]))||0).toFixed(1),u=[];t.filter(c=>c!==o).forEach(c=>{let d=parseFloat(String(e[o]))||0,h=parseFloat(String(e[c]))||0,f=parseFloat(String(r[o]))||0,p=parseFloat(String(r[c]))||0,m=parseFloat(String(n[o]))||0,b=parseFloat(String(n[c]))||0,g=m-b,v=Math.sqrt(f*f/d+p*p/h);v>0&&Math.abs(g/v)>this.t_teorico&&g>0&&u.push(c.toUpperCase())}),u.length>0?s[o]=`${l} (<strong>${u.join(" | ")}</strong>)`:s[o]=l}),s}actualizarTablaResultadosMedias(t){let e=this.generarFilaResultados(t);this.resultadosSubject.next(e)}generarFilaResultados(t){let e=t.find(r=>r.id==="Media");if(!e)return[];let n={id:"Resultado"};return Object.keys(e).forEach(r=>{r!=="id"&&(n[r]=e[r])}),[n]}ejecutarCalculoMediaNorma(t){let e=t.find(l=>l.id==="Base"),n=t.find(l=>l.id==="Media"),r=t.find(l=>l.id.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().includes("desviacion")),s=t.find(l=>l.id.toLowerCase().includes("norma"));if(!e||!n||!r||!s){console.warn("Faltan filas Base, Media, Desviaci\xF3n o Norma");return}let o=Object.keys(e).filter(l=>l!=="id"),a={id:"Resultado"};o.forEach(l=>{let u=Number(e[l]),c=Number(n[l]),d=Number(r[l]),h=Number(s[l]);if(isNaN(u)||isNaN(c)||isNaN(d)||isNaN(h)){a[l]="";return}if(u>1&&d>0){let f=c-h,p=d/Math.sqrt(u),m=f/p,b=Math.abs(m)>this.t_teorico,g=c.toFixed(2);b?g+=' <strong style="color:green;">(\u2713)</strong>':g+=' <strong style="color:red;">(\u2717)</strong>',a[l]=g}else a[l]=c.toFixed(2)}),this.resultadosSubject.next([a])}ejecutarCalculoPorcentajesNormas(t){let e=t.find(a=>a.id==="Base");if(!e){console.warn('No se encontr\xF3 la fila "Base".');return}let n=Object.keys(e).filter(a=>a!=="id"),r=this.encontrarParejas(n);if(r.length===0){console.warn('No se encontraron columnas con "-norma".');return}let s=[];t.forEach(a=>{if(a.id==="Base"){s.push(y({},a));return}let l={id:a.id};r.forEach(u=>{let c=u.col,d=u.norma,h=(a[c]??"").toString().trim(),f=(a[d]??"").toString().trim();if(!h){l[c]="",l[d]=f?f+"%":"";return}let p=parseFloat(h);if(isNaN(p)){l[c]="",l[d]=f?f+"%":"";return}f||(l[d]="");let m=parseFloat(f);isNaN(m)&&(l[d]="");let b=parseFloat(String(e[c]))||0,g=p/100,v=m/100,M=`${m}`;if(b>1&&v>0&&v<1){let H=g-v,B=Math.sqrt(v*(1-v)/b),Q=B>0?H/B:0;Math.abs(Q)>this.t_teorico?M+=' <strong style="color:green;">(\u2713)</strong>':M+=' <strong style="color:red;">(\u2717)</strong>'}l[c]=`${p}`,l[d]=M}),s.push(l)});let o=s.filter(a=>a.id==="Base"?!0:Object.keys(a).filter(l=>l!=="id").some(l=>a[l]&&a[l].toString().trim()!==""));this.resultadosSubject.next(o)}encontrarParejas(t){let e=[];return t.filter(r=>r.endsWith("-norma")).forEach(r=>{let s=r.replace("-norma","");t.includes(s)&&e.push({col:s,norma:r})}),e}static \u0275fac=function(e){return new(e||i)};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ne=class i{constructor(t){this.calculosService=t}table;tableComparacion;tableResultMedias;tablaListaSubject=new ae(!1);tablaLista$=this.tablaListaSubject.asObservable();mode="";setTableInstance(t){this.table=t,this.restablecerColores()}getTableInstance(){return this.table}setTableComparacionInstance(t){this.tableComparacion=t}setTableResultMediaInstance(t){this.tableResultMedias=t}getColumnsData(){return this.table.getColumns()}setTablaLista(t){this.tablaListaSubject.next(t)}setMode(t){this.mode=t,this.calculosService.setColumns([])}getMode(){return this.mode}applyColorsToColumns(t){if(t==1){this.table.getRows().forEach(e=>{e.getCells().forEach(n=>{let r=n.getColumn().getField(),s=this.calculosService.getColorForComparation(r);s&&(n.getElement().style.backgroundColor=s)})});return}if(t==2){this.tableComparacion.getRows().forEach(e=>{e.getCells().forEach(n=>{let r=n.getColumn().getField(),s=this.calculosService.getColorForComparation(r);s&&(n.getElement().style.backgroundColor=s)})});return}this.tableResultMedias.getRows().forEach(e=>{e.getCells().forEach(n=>{let r=n.getColumn().getField(),s=this.calculosService.getColorForComparation(r);s&&(n.getElement().style.backgroundColor=s)})})}updateRowCount(t){let e=this.table.getDataCount();if(t+=1,e<t)for(let r=e;r<t;r++)this.table.addRow({id:r});else e>t&&this.table.getRows().slice(t).forEach(o=>o.delete());let n=this.table.getData();this.calculosService.setData(n)}updateColumnCount(t){let e=this.table.getColumnDefinitions().length;if(this.table.blockRedraw(),t>e){let r=[];for(let a=e;a<t;a++){let l=this.getColumnTitle(a-1),u=l.toLowerCase();r.push({title:l,field:u,headerSort:!1,editor:"number",resizable:!1})}let s=this.table.getColumnDefinitions();this.table.setColumns([...s,...r]),this.table.getRows().forEach(a=>{let l={};for(let u=e;u<t;u++){let d=this.getColumnTitle(u-1).toLowerCase();l[d]=""}a.update(l)})}else t<e&&this.table.getColumns().slice(t).forEach(s=>s.delete());this.table.redraw(!0);let n=this.table.getColumnDefinitions().map(r=>({title:r.title,field:r.field,headerSort:!1,resizable:!1}));this.calculosService.setColumns(n),this.applyColorsToColumns(1)}getColumnTitle(t){let e="";for(;t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e}limpiarDatosTabla(){let t=this.table.getRows();this.table.blockRedraw();let e=t.map(n=>{let r=n.getData(),s={id:r.id};return Object.keys(r).forEach(o=>{o!=="id"&&(s[o]=void 0)}),n.update(s),s});this.table.redraw(!0),this.restablecerColores(),this.calculosService.resetComparaciones(),this.mode==="porcentajes"?this.calculosService.setData(e):this.calculosService.actualizarTablaResultadosMedias(e)}restablecerColores(){this.mode==="porcentajes"?this.table.getRows().forEach(t=>{t.getCells().forEach(e=>{e.getElement().style.backgroundColor=""})}):this.tableResultMedias&&this.tableResultMedias.getRows().forEach(t=>{t.getCells().forEach(e=>{e.getElement().style.backgroundColor=""})})}updateColumnCountPorcentajesNormas(t){let e=this.table.getColumnDefinitions();this.table.blockRedraw();let r=e.slice(1).length/2;if(t>r){let o=t-r,a=[];for(let c=0;c<o;c++){let d=r+c,h=this.buildNormasColumnPair(d);a.push(...h)}let l=[...e,...a];this.table.setColumns(l),this.table.getRows().forEach(c=>{let d={};a.forEach(h=>{d[h.field]=""}),c.update(d)})}else if(t<r){let a=(r-t)*2,l=e.length-a;this.table.getColumns().slice(l).forEach(c=>c.delete())}this.table.redraw(!0);let s=this.table.getColumnDefinitions().map(o=>({title:o.title,field:o.field,headerSort:!1,resizable:!1,editor:o.editor}));this.calculosService.setColumns(s)}buildNormasColumnPair(t){let e=this.getColumnTitle(t),n=e.toLowerCase(),r=n+"-norma";return[{title:e,field:n,headerSort:!1,editor:"number",resizable:!1},{title:e+" Norma",field:r,headerSort:!1,editor:"number",editable:s=>s.getRow().getData().id==="Base"?!1:"number",resizable:!1}]}static \u0275fac=function(e){return new(e||i)($(Me))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var x_=["table"],an=class i{constructor(t,e,n){this.calculosService=t;this.tablaService=e;this.activatedRoute=n}tableElement;table;mode="";ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.mode=t.mode||"",this.tablaService.setMode(this.mode),this.table&&this.updateTable()})}ngAfterViewInit(){this.tableElement&&(ki.registerModule([Lt]),this.createTable())}createTable(){let t=this.getInitialData(),e=this.getColumns();this.table=new ki(this.tableElement.nativeElement,{data:t,columns:e,layout:"fitDataFill",editTriggerEvent:"dblclick",editorEmptyValue:void 0,selectableRange:!0,selectableRangeColumns:!0,selectableRangeRows:!0,selectableRangeClearCells:!0,clipboard:!0,clipboardCopyStyled:!1,clipboardCopyConfig:{rowHeaders:!1,columnHeaders:!1},clipboardCopyRowRange:"range",clipboardPasteParser:"range",clipboardPasteAction:"range",history:!0}),this.registerTableEvents()}updateTable(){let t=this.getInitialData(),e=this.getColumns();this.table.replaceData(t),this.table.setColumns(e),this.table.redraw(!0)}getInitialData(){let t=[];switch(this.mode){case"porcentajes":for(let e=0;e<11;e++)t.push({id:e===0?"Base":e});break;case"medias":for(let e=0;e<3;e++)t.push({id:e===0?"Base":e===1?"Media":"Desviaci\xF3n est\xE1ndar"});break;case"medias-normas":for(let e=0;e<4;e++)t.push({id:e===0?"Base":e===1?"Media":e===2?"Desviaci\xF3n est\xE1ndar":"Norma"});break;case"porcentajes-normas":for(let e=0;e<11;e++)t.push({id:e===0?"Base":e});break;default:for(let e=0;e<11;e++)t.push({id:e===0?"Base":e})}return t}getColumns(){let t=[{title:"Letras",field:"id",headerSort:!1,resizable:!1}];return this.mode==="medias-normas"?[...t,{title:"A",field:"a",headerSort:!1,editor:"number",resizable:!1}]:this.mode==="porcentajes-normas"?this.buildPorcentajesNormasColumns():[...t,{title:"A",field:"a",headerSort:!1,editor:"number",resizable:!1},{title:"B",field:"b",headerSort:!1,editor:"number",resizable:!1}]}registerTableEvents(){this.table.on("tableBuilt",()=>{this.calculosService.setData(this.table.getData()),this.tablaService.setTableInstance(this.table),this.tablaService.setTablaLista(!0)}),this.table.on("dataChanged",()=>{document.body.contains(this.tableElement.nativeElement)&&this.table.redraw(!0),this.calculosService.setData(this.table.getData()),this.tablaService.setTableInstance(this.table),(this.mode=="porcentajes"||this.mode=="medias")&&this.tablaService.applyColorsToColumns(1)}),this.table.on("cellEdited",()=>{this.table.redraw(!0),this.calculosService.setData(this.table.getData()),this.tablaService.setTableInstance(this.table),(this.mode=="porcentajes"||this.mode=="medias")&&this.tablaService.applyColorsToColumns(1)})}buildPorcentajesNormasColumns(){let t=[{title:"Letras",field:"id",headerSort:!1,resizable:!1}],e=this.getLetterTitle(0);return[...t,{title:e,field:e.toLowerCase(),headerSort:!1,editor:"number",resizable:!1},{title:e+" Norma",field:e.toLowerCase()+"-norma",headerSort:!1,editor:"number",editable:n=>n.getRow().getData().id==="Base"?!1:"number",resizable:!1}]}getLetterTitle(t){let e="";for(;t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e}static \u0275fac=function(e){return new(e||i)(D(Me),D(Ne),D(Ft))};static \u0275cmp=ie({type:i,selectors:[["app-tabla"]],viewQuery:function(e,n){if(e&1&&tn(x_,5),e&2){let r;gt(r=bt())&&(n.tableElement=r.first)}},standalone:!0,features:[re],decls:3,vars:0,consts:[["table",""],[1,"centrar"],[1,""]],template:function(e,n){e&1&&(w(0,"div",1),P(1,"div",2,0),C())}})};var T_=["table"],Qo=class i{constructor(t,e){this.calculosService=t;this.tablaService=e}tableElement;table;ngAfterViewInit(){ki.registerModule([Lt]),this.table=new ki(this.tableElement.nativeElement,{data:[],columns:[{title:"Letras",field:"id",headerSort:!1,resizable:!1,formatter:"html"},{title:"A",field:"a",headerSort:!1,resizable:!1,formatter:"html"},{title:"B",field:"b",headerSort:!1,resizable:!1,formatter:"html"}],rowContextMenu:[{label:"Copiar selecci\xF3n",action:(s,o)=>{this.table.copyToClipboard()}}],layout:"fitDataFill",selectableRange:!0,selectableRangeColumns:!0,selectableRangeRows:!0,selectableRangeClearCells:!0,clipboard:!0,clipboardCopyStyled:!0,clipboardCopyRowRange:"range",clipboardCopyConfig:{rowHeaders:!1,columnHeaders:!1},clipboardPasteParser:"range",clipboardPasteAction:void 0});let t=!1,e=null,n=20;this.table.on("cellMouseDown",(s,o)=>{t=!0}),this.table.on("cellMouseUp",(s,o)=>{t=!1,e&&(clearInterval(e),e=null)}),this.table.on("cellMouseMove",(s,o)=>{if(!t)return;let a=s,l=this.tableElement.nativeElement.querySelector(".tabulator-tableholder");if(!l)return;let u=l.getBoundingClientRect(),c=a.clientX,d=a.clientY;e&&(clearInterval(e),e=null),e=setInterval(()=>{let h=!1;c<u.left+50?(l.scrollLeft-=n,h=!0):c>u.right-50&&(l.scrollLeft+=n,h=!0),d<u.top+50?(l.scrollTop-=n,h=!0):d>u.bottom-50&&(l.scrollTop+=n,h=!0),h||(clearInterval(e),e=null)},50)});let r=this.tableElement.nativeElement.querySelector(".tabulator-tableholder");r&&r.addEventListener("mouseleave",()=>{e&&(clearInterval(e),e=null)}),this.table.on("tableBuilt",()=>{this.calculosService.columns$.subscribe(s=>{if(s.length>0){let o=s.map(a=>F(y({},a),{editor:!1,formatter:"html"}));this.table.setColumns(o)}}),this.calculosService.data$.subscribe(s=>{s.length>0&&(this.table.setData(s),this.tablaService.setTableComparacionInstance(this.table),this.table.redraw(!0),this.tablaService.applyColorsToColumns(2))})})}copiarTabla(){let t=s=>{let o=document.createElement("div");return o.innerHTML=s,o.textContent||o.innerText||""},e=this.table.getData();if(!e||e.length===0){console.warn("\u26A0\uFE0F No hay datos para copiar.");return}let r=e.map(s=>{let o=y({},s);return delete o.id,Object.values(o)}).map(s=>s.map(o=>{let a=String(o??"");return a=t(a),a=a.replace(/\r?\n/g," "),a}).join("	")).join(`
`);navigator.clipboard.writeText(r).catch(s=>{console.error("\u274C Error al copiar:",s)})}static \u0275fac=function(e){return new(e||i)(D(Me),D(Ne))};static \u0275cmp=ie({type:i,selectors:[["app-tabla-comparacion"]],viewQuery:function(e,n){if(e&1&&tn(T_,5),e&2){let r;gt(r=bt())&&(n.tableElement=r.first)}},standalone:!0,features:[re],decls:7,vars:0,consts:[["table",""],[1,"centrar"],[1,""],[1,"d-flex","justify-content-end"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Copiar todo",1,"btn","btn-success",3,"click"],[1,"fas","fa-copy"]],template:function(e,n){if(e&1){let r=Ye();w(0,"div",1),P(1,"div",2,0),C(),w(3,"div",3)(4,"button",4),V("click",function(){return se(r),oe(n.copiarTabla())}),P(5,"i",5),k(6," Copiar Datos "),C()()}}})};var yg=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(D(mt),D(ke))}}static{this.\u0275dir=ye({type:i})}}return i})(),ta=(()=>{class i extends yg{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Kt(i)))(r||i)}})()}static{this.\u0275dir=ye({type:i,features:[Tt]})}}return i})(),jr=new I("");var I_={provide:jr,useExisting:Zt(()=>ln),multi:!0};function R_(){let i=Rt()?Rt().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var A_=new I(""),ln=(()=>{class i extends yg{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!R_())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(D(mt),D(ke),D(A_,8))}}static{this.\u0275dir=ye({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&V("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[gi([I_]),Tt]})}}return i})();var k_=new I(""),N_=new I("");function Cg(i){return i!=null}function wg(i){return xn(i)?le(i):i}function Eg(i){let t={};return i.forEach(e=>{t=e!=null?y(y({},t),e):t}),Object.keys(t).length===0?null:t}function Dg(i,t){return t.map(e=>e(i))}function O_(i){return!i.validate}function Mg(i){return i.map(t=>O_(t)?t:e=>t.validate(e))}function F_(i){if(!i)return null;let t=i.filter(Cg);return t.length==0?null:function(e){return Eg(Dg(e,t))}}function Sg(i){return i!=null?F_(Mg(i)):null}function L_(i){if(!i)return null;let t=i.filter(Cg);return t.length==0?null:function(e){let n=Dg(e,t).map(wg);return Ra(n).pipe(U(Eg))}}function _g(i){return i!=null?L_(Mg(i)):null}function dg(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function P_(i){return i._rawValidators}function V_(i){return i._rawAsyncValidators}function Xc(i){return i?Array.isArray(i)?i:[i]:[]}function Xo(i,t){return Array.isArray(i)?i.includes(t):i===t}function hg(i,t){let e=Xc(t);return Xc(i).forEach(r=>{Xo(e,r)||e.push(r)}),e}function fg(i,t){return Xc(t).filter(e=>!Xo(i,e))}var Jo=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Sg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_g(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Jc=class extends Jo{get formDirective(){return null}get path(){return null}},Hr=class extends Jo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ed=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},H_={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pO=F(y({},H_),{"[class.ng-submitted]":"isSubmitted"}),Li=(()=>{class i extends ed{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(D(Hr,2))}}static{this.\u0275dir=ye({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&lr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Tt]})}}return i})();var Fr="VALID",Ko="INVALID",Ni="PENDING",Lr="DISABLED",Fi=class{},ea=class extends Fi{constructor(t,e){super(),this.value=t,this.source=e}},Pr=class extends Fi{constructor(t,e){super(),this.pristine=t,this.source=e}},Vr=class extends Fi{constructor(t,e){super(),this.touched=t,this.source=e}},Oi=class extends Fi{constructor(t,e){super(),this.status=t,this.source=e}};function j_(i){return(na(i)?i.validators:i)||null}function B_(i){return Array.isArray(i)?Sg(i):i||null}function z_(i,t){return(na(t)?t.asyncValidators:i)||null}function U_(i){return Array.isArray(i)?_g(i):i||null}function na(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var td=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Co(()=>this.statusReactive()),this.statusReactive=vo(void 0),this._pristine=Co(()=>this.pristineReactive()),this.pristineReactive=vo(!0),this._touched=Co(()=>this.touchedReactive()),this.touchedReactive=vo(!1),this._events=new ve,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return rn(this.statusReactive)}set status(t){rn(()=>this.statusReactive.set(t))}get valid(){return this.status===Fr}get invalid(){return this.status===Ko}get pending(){return this.status==Ni}get disabled(){return this.status===Lr}get enabled(){return this.status!==Lr}get pristine(){return rn(this.pristineReactive)}set pristine(t){rn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return rn(this.touchedReactive)}set touched(t){rn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(hg(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(hg(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(fg(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(fg(t,this._rawAsyncValidators))}hasValidator(t){return Xo(this._rawValidators,t)}hasAsyncValidator(t){return Xo(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(F(y({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Vr(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new Vr(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(F(y({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Pr(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Pr(!0,n))}markAsPending(t={}){this.status=Ni;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Oi(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(F(y({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Lr,this.errors=null,this._forEachChild(r=>{r.disable(F(y({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ea(this.value,n)),this._events.next(new Oi(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(F(y({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Fr,this._forEachChild(n=>{n.enable(F(y({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(F(y({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fr||this.status===Ni)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ea(this.value,e)),this._events.next(new Oi(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(F(y({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lr:Fr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Ni,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=wg(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new Oi(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Lr:this.errors?Ko:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ni)?Ni:this._anyControlsHaveStatus(Ko)?Ko:Fr}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Pr(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Vr(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){na(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=B_(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=U_(this._rawAsyncValidators)}};var xg=new I("CallSetDisabledState",{providedIn:"root",factory:()=>nd}),nd="always";function $_(i,t){return[...t.path,i]}function W_(i,t,e=nd){q_(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),Z_(i,t),Q_(i,t),Y_(i,t),G_(i,t)}function pg(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function G_(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function q_(i,t){let e=P_(i);t.validator!==null?i.setValidators(dg(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=V_(i);t.asyncValidator!==null?i.setAsyncValidators(dg(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();pg(t._rawValidators,r),pg(t._rawAsyncValidators,r)}function Z_(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Tg(i,t)})}function Y_(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Tg(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function Tg(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Q_(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function K_(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function X_(i){return Object.getPrototypeOf(i.constructor)===ta}function J_(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(s=>{s.constructor===ln?e=s:X_(s)?n=s:r=s}),r||n||e||null}function mg(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function gg(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var ex=class extends td{constructor(t=null,e,n){super(j_(e),z_(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),na(e)&&(e.nonNullable||e.initialValueIsDefault)&&(gg(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){mg(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){mg(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){gg(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var tx={provide:Hr,useExisting:Zt(()=>Pn)},bg=Promise.resolve(),Pn=(()=>{class i extends Hr{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new ex,this._registered=!1,this.name="",this.update=new ue,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=J_(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),K_(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){W_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){bg.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&In(n);bg.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?$_(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(D(Jc,9),D(k_,10),D(N_,10),D(jr,10),D(nn,8),D(xg,8))}}static{this.\u0275dir=ye({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gi([tx]),Tt,Yt]})}}return i})();var nx={provide:jr,useExisting:Zt(()=>Br),multi:!0},Br=(()=>{class i extends ta{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Kt(i)))(r||i)}})()}static{this.\u0275dir=ye({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&V("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[gi([nx]),Tt]})}}return i})();var ix={provide:jr,useExisting:Zt(()=>un),multi:!0};function Ig(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function rx(i){return i.split(":")[0]}var un=(()=>{class i extends ta{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n=this._getOptionId(e),r=Ig(n,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=rx(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Kt(i)))(r||i)}})()}static{this.\u0275dir=ye({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&V("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[gi([ix]),Tt]})}}return i})(),Pi=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Ig(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(D(ke),D(mt),D(un,9))}}static{this.\u0275dir=ye({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),sx={provide:jr,useExisting:Zt(()=>Rg),multi:!0};function vg(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function ox(i){return i.split(":")[0]}var Rg=(()=>{class i extends ta{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));n=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let r=[],s=n.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],u=this._getOptionValue(l.value);r.push(u)}}else{let o=n.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=ox(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Kt(i)))(r||i)}})()}static{this.\u0275dir=ye({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&V("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[gi([sx]),Tt]})}}return i})(),Vi=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(vg(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(vg(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(D(ke),D(mt),D(Rg,9))}}static{this.\u0275dir=ye({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();var ax=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=_n({type:i})}static{this.\u0275inj=Sn({})}}return i})();var Hi=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:xg,useValue:e.callSetDisabledState??nd}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=_n({type:i})}static{this.\u0275inj=Sn({imports:[ax]})}}return i})();function lx(i,t){if(i&1&&(w(0,"option",22),k(1),C()),i&2){let e=t.$implicit;G("value",e),x(),Le(" ",e," ")}}function ux(i,t){if(i&1&&(w(0,"option",22),k(1),C()),i&2){let e=t.$implicit;G("value",e),x(),Le(" ",e," ")}}function cx(i,t){if(i&1&&(w(0,"option",29),k(1),C()),i&2){let e=t.$implicit,n=ee().index,r=ee();G("value",e.field)("disabled",r.isOptionDisabled(e.field,n)),x(),Le(" ",e.title," ")}}function dx(i,t){if(i&1&&(w(0,"option",29),k(1),C()),i&2){let e=t.$implicit,n=ee().index,r=ee();G("value",e.field)("disabled",r.isOptionDisabled(e.field,n)),x(),Le(" ",e.title," ")}}function hx(i,t){if(i&1){let e=Ye();w(0,"div",1)(1,"label",23),k(2),C(),w(3,"input",24),Ee("ngModelChange",function(r){let s=se(e).index,o=ee();return xe(o.comparaciones[s].colorSeleccionado,r)||(o.comparaciones[s].colorSeleccionado=r),oe(r)}),V("ngModelChange",function(){se(e);let r=ee();return oe(r.onComparacionesDifSig())}),C(),w(4,"select",25),Ee("ngModelChange",function(r){let s=se(e).index,o=ee();return xe(o.comparaciones[s].firstColumnSelected,r)||(o.comparaciones[s].firstColumnSelected=r),oe(r)}),V("change",function(){se(e);let r=ee();return oe(r.onComparacionesDifSig())}),Ce(5,cx,2,3,"option",26),C(),P(6,"span",27),w(7,"select",28),Ee("ngModelChange",function(r){let s=se(e).index,o=ee();return xe(o.comparaciones[s].secondColumnSelected,r)||(o.comparaciones[s].secondColumnSelected=r),oe(r)}),V("change",function(){se(e);let r=ee();return oe(r.onComparacionesDifSig())}),Ce(8,dx,2,3,"option",26),C()()}if(i&2){let e=t.index,n=ee();x(),G("for","comparacion"+e),x(),Le("Comparaci\xF3n ",e+1,":"),x(),ur("id","colorSeleccionado",e,""),we("ngModel",n.comparaciones[e].colorSeleccionado),x(),G("id","comparacion"+e),we("ngModel",n.comparaciones[e].firstColumnSelected),x(),G("ngForOf",n.currentColumns),x(2),we("ngModel",n.comparaciones[e].secondColumnSelected),en("aria-labelledby","comparacion"+e),x(),G("ngForOf",n.currentColumns)}}var ia=class i{constructor(t,e){this.tablaService=t;this.calculosService=e}numeroDeFilas=10;columnaOptions=Array.from({length:29},(t,e)=>e+2);numeroDeColumnas=2;diferenciaSeleccionada=95;comparacionesOptions=Array.from({length:8},(t,e)=>e+1);numeroDeComparaciones=1;comparaciones=Array.from({length:this.numeroDeComparaciones},()=>({firstColumnSelected:"",secondColumnSelected:"",colorSeleccionado:"#9FA1F4"}));currentColumns=[];coloresPredefinidos=["#9FA1F4","#EFB2B2","#B2D8F0","#E3B2F0","#B2ECF0","#EFF0B2","#B2F0C5","#FFE9D6"];ngAfterViewInit(){this.tablaService.tablaLista$.subscribe(t=>{t&&setTimeout(()=>{this.cargarColumnasActuales()})})}cargarColumnasActuales(){this.currentColumns=this.tablaService.getColumnsData().slice(1).map(t=>({field:t.getField(),title:t.getDefinition().title}))}evitarCeroInicial(t){(t.key==="0"&&(!this.numeroDeFilas||this.numeroDeFilas.toString().length===0)||t.key==="-")&&t.preventDefault()}actualizarFilas(t){t>0&&this.tablaService.updateRowCount(t)}actualizarColumnas(t){if(t>=2){let e=this.currentColumns.length;this.tablaService.updateColumnCount(Number(t)+1),this.cargarColumnasActuales(),this.currentColumns.length<e?(this.verificarComparacionesInvalidas(),this.ejecutarCalculo()):this.onComparacionesDifSig()}}onComparacionesChange(){this.comparaciones=Array.from({length:this.numeroDeComparaciones},(n,r)=>({firstColumnSelected:this.comparaciones[r]?.firstColumnSelected||"",secondColumnSelected:this.comparaciones[r]?.secondColumnSelected||"",colorSeleccionado:this.coloresPredefinidos[r]}));let t=this.comparaciones.length,e=this.calculosService.getComparaciones().length;if(t<e){let n=this.filtrarComparacionesValidas();this.calculosService.setComparaciones(n),this.tablaService.applyColorsToColumns(1),this.ejecutarCalculo()}}onDiferenciaChange(){this.calculosService.setDiferenciaSifnificativa(this.diferenciaSeleccionada)}limpiarDatos(){this.tablaService.limpiarDatosTabla(),this.comparaciones=Array.from({length:this.numeroDeComparaciones},(t,e)=>({firstColumnSelected:"",secondColumnSelected:"",colorSeleccionado:this.coloresPredefinidos[e]}))}onComparacionesDifSig(){let t=this.filtrarComparacionesValidas();this.calculosService.setComparaciones(t),this.tablaService.applyColorsToColumns(1)}ejecutarCalculo(){let t=this.tablaService.getTableInstance();this.calculosService.ejecutarCalculoPorcentaje(t.getData()),this.tablaService.applyColorsToColumns(2)}filtrarComparacionesValidas(){return this.comparaciones.filter(t=>t.firstColumnSelected&&t.secondColumnSelected).map(t=>({col1:t.firstColumnSelected,col2:t.secondColumnSelected,color:t.colorSeleccionado}))}isOptionDisabled(t,e){let n=this.currentColumns.findIndex(s=>s.field===t);if(n===-1)return!1;let r=this.comparaciones[e];if(r&&(r.firstColumnSelected===t||r.secondColumnSelected===t))return!0;for(let s=0;s<this.comparaciones.length;s++){if(s===e)continue;let o=this.comparaciones[s];if(o.firstColumnSelected&&o.secondColumnSelected){let a=this.currentColumns.findIndex(u=>u.field===o.firstColumnSelected),l=this.currentColumns.findIndex(u=>u.field===o.secondColumnSelected);if(a!==-1&&l!==-1){let u=Math.min(a,l),c=Math.max(a,l);if(n>=u&&n<=c)return!0}}}return!1}verificarComparacionesInvalidas(){let t=this.calculosService.getComparaciones(),e=!1;for(let n of t){let r=this.currentColumns.some(o=>o.field===n.col1),s=this.currentColumns.some(o=>o.field===n.col2);if(!r||!s){e=!0;break}}if(e){let n=t.filter(r=>{let s=this.currentColumns.some(a=>a.field===r.col1),o=this.currentColumns.some(a=>a.field===r.col2);return s&&o});this.calculosService.setComparaciones(n)}}static \u0275fac=function(e){return new(e||i)(D(Ne),D(Me))};static \u0275cmp=ie({type:i,selectors:[["app-button"]],standalone:!0,features:[re],decls:38,vars:7,consts:[[1,"row","mt-5"],[1,"col-12","col-sm-6","col-md-3","d-flex","align-items-center"],["for","rowCount",1,"me-4","mb-0"],["type","number","id","rowCount",1,"form-control","form-control-md","input-botones",3,"ngModelChange","keydown.enter","keydown","ngModel"],["for","columnCount",1,"me-4","mb-0"],[1,"contenedor-icono"],["id","columnCount",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"icon","fas","fa-caret-down",2,"color","black"],["for","comparaciones",1,"me-4","mb-0"],["id","comparaciones",1,"form-control",3,"ngModelChange","change","ngModel"],["for","diferenciaSignificativa",1,"me-4","mb-0"],["id","diferenciaSignificativa",1,"form-control","form-control-md","input-botones","custom-select",3,"ngModelChange","change","ngModel"],["value","90"],["value","95"],[1,"icon","fas","fa-caret-down"],[1,"row","mt-3"],["class","col-12 col-sm-6 col-md-3 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"col-6","d-flex","justify-content-start"],[1,"btn","btn-primary",3,"click"],[1,"col-6","d-flex","justify-content-end"],[1,"btn","btn-danger",3,"click"],[3,"value"],[1,"me-4","mb-0",3,"for"],["type","color","aria-labelledby","'comparacion' + index",1,"form-control","form-control-md","input-botones","me-2",3,"ngModelChange","id","ngModel"],[1,"form-control",3,"ngModelChange","change","id","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"fas","fa-minus","mx-2"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value","disabled"]],template:function(e,n){e&1&&(w(0,"div",0)(1,"div",1)(2,"label",2),k(3,"Cantidad Filas:"),C(),w(4,"input",3),Ee("ngModelChange",function(s){return xe(n.numeroDeFilas,s)||(n.numeroDeFilas=s),s}),V("keydown.enter",function(){return n.actualizarFilas(n.numeroDeFilas)})("keydown",function(s){return n.evitarCeroInicial(s)}),C()(),w(5,"div",1)(6,"label",4),k(7,"Cantidad Columnas:"),C(),w(8,"div",5)(9,"select",6),Ee("ngModelChange",function(s){return xe(n.numeroDeColumnas,s)||(n.numeroDeColumnas=s),s}),V("change",function(){return n.actualizarColumnas(n.numeroDeColumnas)}),Ce(10,lx,2,2,"option",7),C(),P(11,"span",8),C()(),w(12,"div",1)(13,"label",9),k(14,"Cantidad Comparaciones:"),C(),w(15,"div",5)(16,"select",10),Ee("ngModelChange",function(s){return xe(n.numeroDeComparaciones,s)||(n.numeroDeComparaciones=s),s}),V("change",function(){return n.onComparacionesChange()}),Ce(17,ux,2,2,"option",7),C(),P(18,"span",8),C()(),w(19,"div",1)(20,"label",11),k(21,"Diferencia Significativa:"),C(),w(22,"div",5)(23,"select",12),Ee("ngModelChange",function(s){return xe(n.diferenciaSeleccionada,s)||(n.diferenciaSeleccionada=s),s}),V("change",function(){return n.onDiferenciaChange()}),w(24,"option",13),k(25,"90%"),C(),w(26,"option",14),k(27,"95%"),C()(),P(28,"span",15),C()(),w(29,"div",16),Ce(30,hx,9,11,"div",17),C(),w(31,"div",16)(32,"div",18)(33,"button",19),V("click",function(){return n.ejecutarCalculo()}),k(34," Ejecutar calculo "),C()(),w(35,"div",20)(36,"button",21),V("click",function(){return n.limpiarDatos()}),k(37," Limpiar Datos "),C()()()()),e&2&&(x(4),we("ngModel",n.numeroDeFilas),x(5),we("ngModel",n.numeroDeColumnas),x(),G("ngForOf",n.columnaOptions),x(6),we("ngModel",n.numeroDeComparaciones),x(),G("ngForOf",n.comparacionesOptions),x(6),we("ngModel",n.diferenciaSeleccionada),x(7),G("ngForOf",n.comparaciones))},dependencies:[Hi,Pi,Vi,ln,Br,un,Li,Pn,At,vi],styles:["body[_ngcontent-%COMP%]{text-align:center;padding:20px}.comparacion-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:10px}.btn-dark[_ngcontent-%COMP%], .btn-light[_ngcontent-%COMP%]{width:40px;height:40px;padding:0}.input-botones[_ngcontent-%COMP%]{width:30%}.form-control[_ngcontent-%COMP%]:focus{border-color:green!important;box-shadow:0 0 0 .2rem #00800040}.form-control[_ngcontent-%COMP%]{border-color:#b3e6b3}.custom-select[_ngcontent-%COMP%]{background-color:#32cd32;color:#fff;cursor:pointer}select[_ngcontent-%COMP%]{cursor:pointer}.contenedor-icono[_ngcontent-%COMP%]{position:relative}.contenedor-icono[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding-right:30px;appearance:none;-webkit-appearance:none;-moz-appearance:none}.icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);pointer-events:none;color:#fff}"]})};var ra=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ie({type:i,selectors:[["app-porcentajes"]],standalone:!0,features:[re],decls:6,vars:0,consts:[[1,"tables","mt-2"],[1,"col-6"]],template:function(e,n){e&1&&(P(0,"app-button"),w(1,"div",0)(2,"div",1),P(3,"app-tabla"),C(),w(4,"div",1),P(5,"app-tabla-comparacion"),C()())},dependencies:[an,Qo,ia],styles:[".tables[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:50px}"]})};function fx(i,t){if(i&1&&(w(0,"option",15),k(1),C()),i&2){let e=t.$implicit;G("value",e),x(),Le(" ",e," ")}}function px(i,t){if(i&1&&(w(0,"option",15),k(1),C()),i&2){let e=t.$implicit;G("value",e),x(),Le(" ",e," ")}}function mx(i,t){if(i&1&&(w(0,"option",22),k(1),C()),i&2){let e=t.$implicit,n=ee().index,r=ee();G("value",e.field)("disabled",r.isOptionDisabled(e.field,n)),x(),Le(" ",e.title," ")}}function gx(i,t){if(i&1&&(w(0,"option",22),k(1),C()),i&2){let e=t.$implicit,n=ee().index,r=ee();G("value",e.field)("disabled",r.isOptionDisabled(e.field,n)),x(),Le(" ",e.title," ")}}function bx(i,t){if(i&1){let e=Ye();w(0,"div",1)(1,"label",16),k(2),C(),w(3,"input",17),Ee("ngModelChange",function(r){let s=se(e).index,o=ee();return xe(o.comparaciones[s].colorSeleccionado,r)||(o.comparaciones[s].colorSeleccionado=r),oe(r)}),V("ngModelChange",function(){se(e);let r=ee();return oe(r.onComparacionesDifSig())}),C(),w(4,"select",18),Ee("ngModelChange",function(r){let s=se(e).index,o=ee();return xe(o.comparaciones[s].firstColumnSelected,r)||(o.comparaciones[s].firstColumnSelected=r),oe(r)}),V("change",function(){se(e);let r=ee();return oe(r.onComparacionesDifSig())}),Ce(5,mx,2,3,"option",19),C(),P(6,"span",20),w(7,"select",21),Ee("ngModelChange",function(r){let s=se(e).index,o=ee();return xe(o.comparaciones[s].secondColumnSelected,r)||(o.comparaciones[s].secondColumnSelected=r),oe(r)}),V("change",function(){se(e);let r=ee();return oe(r.onComparacionesDifSig())}),Ce(8,gx,2,3,"option",19),C()()}if(i&2){let e=t.index,n=ee();x(),G("for","comparacion"+e),x(),Le("Comparaci\xF3n ",e+1,":"),x(),ur("id","colorSeleccionado",e,""),we("ngModel",n.comparaciones[e].colorSeleccionado),x(),G("id","comparacion"+e),we("ngModel",n.comparaciones[e].firstColumnSelected),x(),G("ngForOf",n.currentColumns),x(2),we("ngModel",n.comparaciones[e].secondColumnSelected),en("aria-labelledby","comparacion"+e),x(),G("ngForOf",n.currentColumns)}}var sa=class i{constructor(t,e){this.tablaService=t;this.calculosService=e}numeroDeColumnas=2;columnaOptions=Array.from({length:30},(t,e)=>e+2);comparacionesOptions=Array.from({length:8},(t,e)=>e+1);numeroDeComparaciones=1;comparaciones=Array.from({length:this.numeroDeComparaciones},()=>({firstColumnSelected:"",secondColumnSelected:"",colorSeleccionado:"#9FA1F4"}));currentColumns=[];coloresPredefinidos=["#9FA1F4","#EFB2B2","#B2D8F0","#E3B2F0","#B2ECF0","#EFF0B2","#B2F0C5","#FFE9D6"];ngAfterViewInit(){this.tablaService.tablaLista$.subscribe(t=>{t&&(this.limpiarDatos(),setTimeout(()=>{this.cargarColumnasActuales()}))})}cargarColumnasActuales(){this.currentColumns=this.tablaService.getColumnsData().slice(1).map(t=>({field:t.getField(),title:t.getDefinition().title}))}actualizarColumnas(t){let e=this.currentColumns.length;this.tablaService.updateColumnCount(Number(t)+1),this.cargarColumnasActuales(),this.currentColumns.length<e?(this.verificarComparacionesInvalidas(),this.ejecutarCalculo()):this.onComparacionesDifSig()}onComparacionesChange(){this.comparaciones=Array.from({length:this.numeroDeComparaciones},(n,r)=>({firstColumnSelected:this.comparaciones[r]?.firstColumnSelected||"",secondColumnSelected:this.comparaciones[r]?.secondColumnSelected||"",colorSeleccionado:this.coloresPredefinidos[r]}));let t=this.comparaciones.length,e=this.calculosService.getComparaciones().length;if(t<e){let n=this.filtrarComparacionesValidas();this.calculosService.setComparaciones(n),this.tablaService.applyColorsToColumns(1),this.ejecutarCalculo()}}limpiarDatos(){this.tablaService.limpiarDatosTabla(),this.comparaciones=Array.from({length:this.numeroDeComparaciones},(t,e)=>({firstColumnSelected:"",secondColumnSelected:"",colorSeleccionado:this.coloresPredefinidos[e]}))}onComparacionesDifSig(){let t=this.filtrarComparacionesValidas();this.calculosService.setComparaciones(t),this.tablaService.applyColorsToColumns(1)}ejecutarCalculo(){let t=this.tablaService.getTableInstance();this.calculosService.ejecutarCalculoMedias(t.getData()),this.tablaService.applyColorsToColumns(3)}filtrarComparacionesValidas(){return this.comparaciones.filter(t=>t.firstColumnSelected&&t.secondColumnSelected).map(t=>({col1:t.firstColumnSelected,col2:t.secondColumnSelected,color:t.colorSeleccionado}))}isOptionDisabled(t,e){let n=this.currentColumns.findIndex(s=>s.field===t);if(n===-1)return!1;let r=this.comparaciones[e];if(r&&(r.firstColumnSelected===t||r.secondColumnSelected===t))return!0;for(let s=0;s<this.comparaciones.length;s++){if(s===e)continue;let o=this.comparaciones[s];if(o.firstColumnSelected&&o.secondColumnSelected){let a=this.currentColumns.findIndex(u=>u.field===o.firstColumnSelected),l=this.currentColumns.findIndex(u=>u.field===o.secondColumnSelected);if(a!==-1&&l!==-1){let u=Math.min(a,l),c=Math.max(a,l);if(n>=u&&n<=c)return!0}}}return!1}verificarComparacionesInvalidas(){let t=this.calculosService.getComparaciones(),e=!1;for(let n of t){let r=this.currentColumns.some(o=>o.field===n.col1),s=this.currentColumns.some(o=>o.field===n.col2);if(!r||!s){e=!0;break}}if(e){let n=t.filter(r=>{let s=this.currentColumns.some(a=>a.field===r.col1),o=this.currentColumns.some(a=>a.field===r.col2);return s&&o});this.calculosService.setComparaciones(n)}}static \u0275fac=function(e){return new(e||i)(D(Ne),D(Me))};static \u0275cmp=ie({type:i,selectors:[["app-button-medias"]],standalone:!0,features:[re],decls:24,vars:5,consts:[[1,"row","mt-5"],[1,"col-12","col-sm-6","col-md-3","d-flex","align-items-center"],["for","columnCount",1,"me-4","mb-0"],[1,"contenedor-icono"],["id","columnCount",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"icon","fas","fa-caret-down",2,"color","black"],["for","comparaciones",1,"me-4","mb-0"],["id","comparaciones",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"row","mt-3"],["class","col-12 col-sm-6 col-md-3 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"col-6","d-flex","justify-content-start"],[1,"btn","btn-primary",3,"click"],[1,"col-6","d-flex","justify-content-end"],[1,"btn","btn-danger",3,"click"],[3,"value"],[1,"me-4","mb-0",3,"for"],["type","color","aria-labelledby","'comparacion' + index",1,"form-control","form-control-md","input-botones","me-2",3,"ngModelChange","id","ngModel"],[1,"form-control",3,"ngModelChange","change","id","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"fas","fa-minus","mx-2"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value","disabled"]],template:function(e,n){e&1&&(w(0,"div",0)(1,"div",1)(2,"label",2),k(3,"Cantidad Columnas:"),C(),w(4,"div",3)(5,"select",4),Ee("ngModelChange",function(s){return xe(n.numeroDeColumnas,s)||(n.numeroDeColumnas=s),s}),V("change",function(){return n.actualizarColumnas(n.numeroDeColumnas)}),Ce(6,fx,2,2,"option",5),C(),P(7,"span",6),C()(),w(8,"div",1)(9,"label",7),k(10,"Cantidad Comparaciones:"),C(),w(11,"div",3)(12,"select",8),Ee("ngModelChange",function(s){return xe(n.numeroDeComparaciones,s)||(n.numeroDeComparaciones=s),s}),V("change",function(){return n.onComparacionesChange()}),Ce(13,px,2,2,"option",5),C(),P(14,"span",6),C()(),w(15,"div",9),Ce(16,bx,9,11,"div",10),C(),w(17,"div",9)(18,"div",11)(19,"button",12),V("click",function(){return n.ejecutarCalculo()}),k(20," Ejecutar calculo "),C()(),w(21,"div",13)(22,"button",14),V("click",function(){return n.limpiarDatos()}),k(23," Limpiar Datos "),C()()()()),e&2&&(x(5),we("ngModel",n.numeroDeColumnas),x(),G("ngForOf",n.columnaOptions),x(6),we("ngModel",n.numeroDeComparaciones),x(),G("ngForOf",n.comparacionesOptions),x(3),G("ngForOf",n.comparaciones))},dependencies:[Hi,Pi,Vi,ln,un,Li,Pn,At,vi],styles:["body[_ngcontent-%COMP%]{text-align:center;padding:20px}.comparacion-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:10px}.btn-dark[_ngcontent-%COMP%], .btn-light[_ngcontent-%COMP%]{width:40px;height:40px;padding:0}.input-botones[_ngcontent-%COMP%]{width:30%}.form-control[_ngcontent-%COMP%]:focus{border-color:green!important;box-shadow:0 0 0 .2rem #00800040}.form-control[_ngcontent-%COMP%]{border-color:#b3e6b3}.custom-select[_ngcontent-%COMP%]{background-color:#32cd32;color:#fff;cursor:pointer}select[_ngcontent-%COMP%]{cursor:pointer}.contenedor-icono[_ngcontent-%COMP%]{position:relative}.contenedor-icono[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding-right:30px;appearance:none;-webkit-appearance:none;-moz-appearance:none}.icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);pointer-events:none;color:#fff}"]})};var vx=["table"],oa=class i{constructor(t,e){this.calculosService=t;this.tablaService=e}tableElement;table;ngAfterViewInit(){ot.registerModule([Lt]),this.table=new ot(this.tableElement.nativeElement,{data:[],columnDefaults:{minWidth:70,resizable:!1,headerSort:!1,formatter:"html"},columns:[{title:"Letras",field:"id",headerSort:!1,resizable:!1,formatter:"html"},{title:"A",field:"a",headerSort:!1,resizable:!1,formatter:"html",minWidth:70},{title:"B",field:"b",headerSort:!1,resizable:!1,formatter:"html",minWidth:70}],rowContextMenu:[{label:"Copiar selecci\xF3n",action:(s,o)=>{this.table.copyToClipboard()}}],layout:"fitDataFill",selectableRange:!0,selectableRangeColumns:!0,selectableRangeRows:!0,selectableRangeClearCells:!0,clipboard:!0,clipboardCopyStyled:!0,clipboardCopyRowRange:"range",clipboardCopyConfig:{rowHeaders:!1,columnHeaders:!1},clipboardPasteParser:"range",clipboardPasteAction:void 0});let t=!1,e=null,n=20;this.table.on("cellMouseDown",(s,o)=>{t=!0}),this.table.on("cellMouseUp",(s,o)=>{t=!1,e&&(clearInterval(e),e=null)}),this.table.on("cellMouseMove",(s,o)=>{if(!t)return;let a=s,l=this.tableElement.nativeElement.querySelector(".tabulator-tableholder");if(!l)return;let u=l.getBoundingClientRect(),c=a.clientX,d=a.clientY;e&&(clearInterval(e),e=null),e=setInterval(()=>{let h=!1;c<u.left+50?(l.scrollLeft-=n,h=!0):c>u.right-50&&(l.scrollLeft+=n,h=!0),d<u.top+50?(l.scrollTop-=n,h=!0):d>u.bottom-50&&(l.scrollTop+=n,h=!0),h||(clearInterval(e),e=null)},50)});let r=this.tableElement.nativeElement.querySelector(".tabulator-tableholder");r&&r.addEventListener("mouseleave",()=>{e&&(clearInterval(e),e=null)}),this.table.on("tableBuilt",()=>{this.calculosService.columns$.subscribe(s=>{if(s.length>0){let o=s.map(a=>F(y({},a),{editor:!1,formatter:"html"}));this.table.setColumns(o)}this.tablaService.setTableResultMediaInstance(this.table)}),this.calculosService.resultados$.subscribe(s=>{this.table.setData(s)})})}copiarTabla(){let t=s=>{let o=document.createElement("div");return o.innerHTML=s,o.textContent||o.innerText||""},e=this.table.getData();if(!e||e.length===0){console.warn("\u26A0\uFE0F No hay datos para copiar.");return}let r=e.map(s=>{let o=y({},s);return delete o.id,Object.values(o)}).map(s=>s.map(o=>{let a=String(o??"");return a=t(a),a=a.replace(/\r?\n/g," "),a}).join("	")).join(`
`);navigator.clipboard.writeText(r).catch(s=>{console.error("\u274C Error al copiar:",s)})}static \u0275fac=function(e){return new(e||i)(D(Me),D(Ne))};static \u0275cmp=ie({type:i,selectors:[["app-tabla-resultado-media"]],viewQuery:function(e,n){if(e&1&&tn(vx,5),e&2){let r;gt(r=bt())&&(n.tableElement=r.first)}},standalone:!0,features:[re],decls:7,vars:0,consts:[["table",""],[1,"centrar"],[1,""],[1,"d-flex","justify-content-end"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Copiar todo",1,"btn","btn-success",3,"click"],[1,"fas","fa-copy"]],template:function(e,n){if(e&1){let r=Ye();w(0,"div",1),P(1,"div",2,0),C(),w(3,"div",3)(4,"button",4),V("click",function(){return se(r),oe(n.copiarTabla())}),P(5,"i",5),k(6," Copiar Datos "),C()()}}})};var aa=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ie({type:i,selectors:[["app-medias"]],standalone:!0,features:[re],decls:6,vars:0,consts:[[1,"tables","mt-2"],[1,"col-6"]],template:function(e,n){e&1&&(P(0,"app-button-medias"),w(1,"div",0)(2,"div",1),P(3,"app-tabla"),C(),w(4,"div",1),P(5,"app-tabla-resultado-media"),C()())},dependencies:[an,oa,sa],styles:[".tables[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:50px}"]})};function yx(i,t){if(i&1){let e=Ye();w(0,"div",2)(1,"label",13),k(2,"Cantidad Filas:"),C(),w(3,"input",14),Ee("ngModelChange",function(r){se(e);let s=ee();return xe(s.numeroDeFilas,r)||(s.numeroDeFilas=r),oe(r)}),V("keydown.enter",function(){se(e);let r=ee();return oe(r.actualizarFilas(r.numeroDeFilas))})("keydown",function(r){se(e);let s=ee();return oe(s.evitarCeroInicial(r))}),C()()}if(i&2){let e=ee();x(3),we("ngModel",e.numeroDeFilas)}}function Cx(i,t){if(i&1&&(w(0,"option",15),k(1),C()),i&2){let e=t.$implicit;G("value",e),x(),Le(" ",e," ")}}var la=class i{constructor(t,e){this.tablaService=t;this.calculosService=e}numeroDeFilas=10;numeroDeColumnas;columnaOptions=[];mode="";currentColumns=[];ngAfterViewInit(){this.tablaService.tablaLista$.subscribe(t=>{t&&(this.limpiarDatos(),setTimeout(()=>{this.mode=this.tablaService.getMode(),this.mode==="porcentajes-normas"?this.columnaOptions=Array.from({length:5},(e,n)=>n+1):this.columnaOptions=Array.from({length:10},(e,n)=>n+1),this.numeroDeColumnas=1,this.cargarColumnasActuales()}))})}cargarColumnasActuales(){this.currentColumns=this.tablaService.getColumnsData().slice(1).map(t=>({field:t.getField(),title:t.getDefinition().title}))}actualizarColumnas(t){this.mode==="porcentajes-normas"?this.tablaService.updateColumnCountPorcentajesNormas(Number(t)):this.tablaService.updateColumnCount(Number(t)+1),this.cargarColumnasActuales()}limpiarDatos(){this.tablaService.limpiarDatosTabla()}ejecutarCalculo(){let t=this.tablaService.getTableInstance().getData();this.mode==="medias-normas"?this.calculosService.ejecutarCalculoMediaNorma(t):this.calculosService.ejecutarCalculoPorcentajesNormas(t)}evitarCeroInicial(t){(t.key==="0"&&(!this.numeroDeFilas||this.numeroDeFilas.toString().length===0)||t.key==="-")&&t.preventDefault()}actualizarFilas(t){t>0&&this.tablaService.updateRowCount(t)}static \u0275fac=function(e){return new(e||i)(D(Ne),D(Me))};static \u0275cmp=ie({type:i,selectors:[["app-button-normas"]],standalone:!0,features:[re],decls:16,vars:3,consts:[[1,"row","mt-5"],["class","col-12 col-sm-6 col-md-3 d-flex align-items-center",4,"ngIf"],[1,"col-12","col-sm-6","col-md-3","d-flex","align-items-center"],["for","columnCount",1,"me-4","mb-0"],[1,"contenedor-icono"],["id","columnCount",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"icon","fas","fa-caret-down",2,"color","black"],[1,"row","mt-3"],[1,"col-6","d-flex","justify-content-start"],[1,"btn","btn-primary",3,"click"],[1,"col-6","d-flex","justify-content-end"],[1,"btn","btn-danger",3,"click"],["for","rowCount",1,"me-4","mb-0"],["type","number","id","rowCount",1,"form-control","form-control-md","input-botones",3,"ngModelChange","keydown.enter","keydown","ngModel"],[3,"value"]],template:function(e,n){e&1&&(w(0,"div",0),Ce(1,yx,4,1,"div",1),w(2,"div",2)(3,"label",3),k(4,"Cantidad Columnas:"),C(),w(5,"div",4)(6,"select",5),Ee("ngModelChange",function(s){return xe(n.numeroDeColumnas,s)||(n.numeroDeColumnas=s),s}),V("change",function(){return n.actualizarColumnas(n.numeroDeColumnas)}),Ce(7,Cx,2,2,"option",6),C(),P(8,"span",7),C()(),w(9,"div",8)(10,"div",9)(11,"button",10),V("click",function(){return n.ejecutarCalculo()}),k(12," Ejecutar calculo "),C()(),w(13,"div",11)(14,"button",12),V("click",function(){return n.limpiarDatos()}),k(15," Limpiar Datos "),C()()()()),e&2&&(x(),G("ngIf",n.mode==="porcentajes-normas"),x(5),we("ngModel",n.numeroDeColumnas),x(),G("ngForOf",n.columnaOptions))},dependencies:[Hi,Pi,Vi,ln,Br,un,Li,Pn,At,vi,Do],styles:["body[_ngcontent-%COMP%]{text-align:center;padding:20px}.btn-dark[_ngcontent-%COMP%], .btn-light[_ngcontent-%COMP%]{width:40px;height:40px;padding:0}.input-botones[_ngcontent-%COMP%]{width:30%}.form-control[_ngcontent-%COMP%]:focus{border-color:green!important;box-shadow:0 0 0 .2rem #00800040}.form-control[_ngcontent-%COMP%]{border-color:#b3e6b3}.custom-select[_ngcontent-%COMP%]{background-color:#32cd32;color:#fff;cursor:pointer}select[_ngcontent-%COMP%]{cursor:pointer}.contenedor-icono[_ngcontent-%COMP%]{position:relative}.contenedor-icono[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding-right:30px;appearance:none;-webkit-appearance:none;-moz-appearance:none}.icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:10px;transform:translateY(-50%);pointer-events:none;color:#fff}"]})};var wx=["table"],ua=class i{constructor(t,e){this.calculosService=t;this.tablaService=e}tableElement;table;mode="";ngOnInit(){this.mode=this.tablaService.getMode()}ngAfterViewInit(){ot.registerModule([Lt]);let t=this.getColumnsForMode();this.initializeTable(t),this.setupAutoScroll(),this.setupSubscriptions()}initializeTable(t){this.table=new ot(this.tableElement.nativeElement,{data:[],columnDefaults:{minWidth:78,resizable:!1,headerSort:!1,formatter:"html"},columns:t,layout:"fitDataFill",selectableRange:!0,selectableRangeColumns:!0,selectableRangeRows:!0,selectableRangeClearCells:!0,clipboard:!0,clipboardCopyStyled:!0,clipboardCopyRowRange:"range",clipboardCopyConfig:{rowHeaders:!1,columnHeaders:!1},clipboardPasteParser:"range",clipboardPasteAction:void 0,rowContextMenu:[{label:"Copiar selecci\xF3n",action:(e,n)=>this.table.copyToClipboard()}],history:!0})}copiarTabla(){let t=s=>{let o=document.createElement("div");return o.innerHTML=s,o.textContent||o.innerText||""},e=this.table.getData();if(!e||e.length===0){console.warn("\u26A0\uFE0F No hay datos para copiar.");return}let r=e.map(s=>{let o=y({},s);return delete o.id,Object.values(o)}).map(s=>s.map(o=>{let a=String(o??"");return a=t(a),a=a.replace(/\r?\n/g," "),a}).join("	")).join(`
`);navigator.clipboard.writeText(r).catch(s=>{console.error("\u274C Error al copiar:",s)})}getColumnsForMode(){return this.mode==="medias-normas"?[{title:"Letras",field:"id"},{title:"A",field:"a"}]:[{title:"Letras",field:"id"},{title:"A",field:"a"},{title:"A Norma",field:"a-norma"}]}setupSubscriptions(){this.table.on("tableBuilt",()=>{this.calculosService.columns$.subscribe(t=>{if(t&&t.length>0){let e=t.map(n=>F(y({},n),{editor:!1,formatter:"html"}));this.table.setColumns(e)}this.tablaService.setTableResultMediaInstance(this.table)}),this.calculosService.resultados$.subscribe(t=>{this.table.setData(t)})})}setupAutoScroll(){let t=!1,e=null,n=20;this.table.on("cellMouseDown",(s,o)=>{t=!0}),this.table.on("cellMouseUp",(s,o)=>{t=!1,e&&(clearInterval(e),e=null)}),this.table.on("cellMouseMove",(s,o)=>{if(!t)return;let a=s,l=this.tableElement.nativeElement.querySelector(".tabulator-tableholder");if(!l)return;let u=l.getBoundingClientRect(),c=a.clientX,d=a.clientY;e&&(clearInterval(e),e=null),e=setInterval(()=>{let h=!1;c<u.left+50?(l.scrollLeft-=n,h=!0):c>u.right-50&&(l.scrollLeft+=n,h=!0),d<u.top+50?(l.scrollTop-=n,h=!0):d>u.bottom-50&&(l.scrollTop+=n,h=!0),h||(clearInterval(e),e=null)},50)});let r=this.tableElement.nativeElement.querySelector(".tabulator-tableholder");r&&r.addEventListener("mouseleave",()=>{e&&(clearInterval(e),e=null)})}static \u0275fac=function(e){return new(e||i)(D(Me),D(Ne))};static \u0275cmp=ie({type:i,selectors:[["app-tabla-resultado-norma"]],viewQuery:function(e,n){if(e&1&&tn(wx,5),e&2){let r;gt(r=bt())&&(n.tableElement=r.first)}},standalone:!0,features:[re],decls:7,vars:0,consts:[["table",""],[1,"centrar"],[1,""],[1,"d-flex","justify-content-end"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Copiar todo",1,"btn","btn-success",3,"click"],[1,"fas","fa-copy"]],template:function(e,n){if(e&1){let r=Ye();w(0,"div",1),P(1,"div",2,0),C(),w(3,"div",3)(4,"button",4),V("click",function(){return se(r),oe(n.copiarTabla())}),P(5,"i",5),k(6," Copiar Datos "),C()()}}})};var zr=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ie({type:i,selectors:[["app-medias-normas"]],standalone:!0,features:[re],decls:6,vars:0,consts:[[1,"tables","mt-2"],[1,"col-6"]],template:function(e,n){e&1&&(P(0,"app-button-normas"),w(1,"div",0)(2,"div",1),P(3,"app-tabla"),C(),w(4,"div",1),P(5,"app-tabla-resultado-norma"),C()())},dependencies:[an,la,ua],styles:[".tables[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:50px}"]})};var Ag=[{path:"",redirectTo:"porcentajes",pathMatch:"full"},{path:"porcentajes",component:ra,data:{mode:"porcentajes"}},{path:"medias",component:aa,data:{mode:"medias"}},{path:"medias-normas",component:zr,data:{mode:"medias-normas"}},{path:"porcentajes-normas",component:zr,data:{mode:"porcentajes-normas"}}];var kg={providers:[em({eventCoalescing:!0}),sg(Ag)]};var Ex=()=>["/porcentajes"],ca=()=>({exact:!1}),Dx=()=>["/medias"],Mx=()=>["/medias-normas"],Sx=()=>["/porcentajes-normas"];function _x(i,t){i&1&&(w(0,"div",6)(1,"a",2),k(2,"Medias"),C(),w(3,"a",2),k(4,"Porcentajes"),C()()),i&2&&(x(),G("routerLink",It(4,Mx))("routerLinkActiveOptions",It(5,ca)),x(2),G("routerLink",It(6,Sx))("routerLinkActiveOptions",It(7,ca)))}var da=class i{constructor(t,e){this.router=t;this.elementRef=e}showDropdown=!1;toggleDropdown(){this.showDropdown=!this.showDropdown}isNormasActive(){return this.router.url.includes("/medias-normas")||this.router.url.includes("/porcentajes-normas")}closeDropdown(t){this.elementRef.nativeElement.contains(t.target)||(this.showDropdown=!1)}static \u0275fac=function(e){return new(e||i)(D(Ti),D(ke))};static \u0275cmp=ie({type:i,selectors:[["app-navbar"]],hostBindings:function(e,n){e&1&&V("click",function(s){return n.closeDropdown(s)},!1,ip)},standalone:!0,features:[re],decls:10,vars:11,consts:[[1,"menu-container"],[1,"menu"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"dropdown",3,"click"],[1,"dropdown-title"],["class","dropdown-content",4,"ngIf"],[1,"dropdown-content"]],template:function(e,n){e&1&&(w(0,"div",0)(1,"div",1)(2,"a",2),k(3,"Porcentajes"),C(),w(4,"a",2),k(5,"Medias"),C(),w(6,"div",3),V("click",function(){return n.toggleDropdown()}),w(7,"span",4),k(8,"Normas"),C(),Ce(9,_x,5,8,"div",5),C()()()),e&2&&(x(2),G("routerLink",It(7,Ex))("routerLinkActiveOptions",It(8,ca)),x(2),G("routerLink",It(9,Dx))("routerLinkActiveOptions",It(10,ca)),x(2),lr("active",n.isNormasActive()),x(3),G("ngIf",n.showDropdown))},dependencies:[jo,rg,At,Do],styles:['.menu-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;position:fixed;top:0;left:0;background-color:#fff;padding:10px 0;z-index:1000}.menu[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:18px;font-weight:700;list-style:none}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;padding-bottom:5px;position:relative}.menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:green;font-weight:700}.menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:4px;background-color:green;position:absolute;bottom:0;left:0}.dropdown[_ngcontent-%COMP%]{position:relative;cursor:pointer}.dropdown-title[_ngcontent-%COMP%]{font-weight:700;padding:8px}.dropdown-content[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #ccc;margin-top:5px;min-width:150px;padding:5px 0;box-shadow:0 4px 6px #0000001a}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 12px;text-decoration:none;color:#333}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#eee}.dropdown.active[_ngcontent-%COMP%]   .dropdown-title[_ngcontent-%COMP%]{font-weight:700;color:green}.dropdown.active[_ngcontent-%COMP%]   .dropdown-title[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:4px;background-color:green;position:absolute;bottom:0;left:0}']})};var ha=class i{title="Proyecto";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ie({type:i,selectors:[["app-root"]],standalone:!0,features:[re],decls:3,vars:0,consts:[[1,"main-content"]],template:function(e,n){e&1&&(P(0,"app-navbar"),w(1,"div",0),P(2,"router-outlet"),C())},dependencies:[wc,da],styles:[".main-content[_ngcontent-%COMP%]{margin-top:100px}"]})};wm(ha,kg).catch(i=>console.error(i));
